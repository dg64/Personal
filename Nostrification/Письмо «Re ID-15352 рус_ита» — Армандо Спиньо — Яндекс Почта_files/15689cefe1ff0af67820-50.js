webpackJsonp([50],{215:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(4210);t.n(r);Jane.module("left.js",(function(){t(4211),t(4214),t(4248)}))},4210:function(e,o){},4211:function(e,o,t){t(4212),t(4213)},4212:function(e,o){!(function(){function e(){ns.events.off("onCollectorCheckStart"),ns.events.off("onCollectorCheckSuccess"),ns.events.off("onCollectorCheckFail"),ns.events.off("onCollectorEditFail"),ns.events.off("daria:oauth-token:update")}ns.action.define("collector.update-oauth-token",(function(e,o,t,r){ns.events.on("daria:oauth-token:update",(function(e,o){$(t).find('[name="social_task_id"]').val(o.task_id),ns.action.run("collector.edit-password",o,t,r)})),ns.action.run("generate-oauth-token",o)})),ns.action.define("generate-oauth-token-callback",(function(e,o){var t=o.callback;t&&ns.events.once("daria:oauth-token:update",(function(e,o){t(o)})),ns.action.run("generate-oauth-token",o.oauthParams)})),ns.action.define("collector.warning",(function(e,t,r,n){var s;n?(s=n.target,Jane.c(["Left column","Broken collector","click on stripe"])):s=t;var a=$(s).closest(".js-collectors-item-warning"),i=a.prev(),l=i.attr("data-popid"),u=ns.Model.get("collectors"),c=u.getById(l);if(c){var d={};$.each(c,(function(e,o){if("password"===e)return!0;d[e]=o})),"1"===c.is_oauth&&(d.social_task_id="");var f=i.text(),m=i.data("help-link"),p=i.data("company")||f.split("@")[1]||"",h={hidden:d,mail:f,popid:l,is_oauth:c.is_oauth,oauth_app:c.oauth_app,time:c.human_time,server:p,company:p.substr(0,1).toUpperCase()+p.substr(1)};m&&(h.link=m);var P=i.offset().top+i.outerHeight()/2+1;o(i,h).find("form, .b-mail-button").filter("form").data({popid:l,y:P,$warning:a,$unactive:i})}})),ns.action.define("collector.edit-password",(function(o,t,r,n){function s(o,t){e(),ns.events.trigger("daria:vCollectors:log","click on new password error"),window.clearTimeout(i),m.addClass("g-hidden"),(t&&"1"===t.is_oauth?f:d).removeClass("g-hidden"),Jane.enableButton(p)}var a={event:n,params:t};a.event.preventDefault();var i,l=$(a.event.target),u=l.data(),c=l.find(".b-notification_loading, .b-mail-button, .b-notification_auth_failed, .b-notification_oauth_failed"),d=c.filter(".b-notification_auth_failed"),f=c.filter(".b-notification_oauth_failed"),m=c.filter(".b-notification_loading"),p=c.filter(".b-mail-button");e(),ns.events.on("onCollectorCheckStart",(function(){i=window.setTimeout((function(){m.removeClass("g-hidden"),d.addClass("g-hidden")}),250)})),ns.events.on("onCollectorCheckFail",s),ns.events.on("onCollectorEditFail",s),ns.events.on("onCollectorEditSuccess.password-"+a.params.popid,(function(){e(),ns.events.trigger("daria:vCollectors:log","click on new password success"),window.clearTimeout(i),ns.forcedRequest(["do-collector-on"],{popid:u.popid}),Daria.Dialog.open({body:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_Сбор_писем_прождолжен"),src:"b-mail-icon_green-tick.gif"}),onTarget:{target:$(".js-collector-unactive[data-popid="+a.params.popid+"]"),side:"left",pos:"top"},onopen:function(){window.setTimeout((function(){Daria.Dialog.$dialog.hasClass("b-collectors__tick")&&Daria.Dialog.close()}),2e3)},additionalClass:"b-popup_yellow b-collectors__popup b-collectors__tick"}),u.$warning.remove()})),Jane.Services.runModules(["setup.js"],(function(){Daria.Collectors.Editor.run(l,a.params.owner)}))})),ns.action.define("collector.stop",(function(e,o,t,r){var n={event:r,params:o};ns.events.trigger("daria:vCollectors:log","click on stop message collecting");var s={};n.event&&(s=$(n.event.target).closest("form").data()),Daria.Dialog.close().open({title:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_remove")}),body:Jane.tt("left:collector-remove-popup",{mail:n.params.mail,popid:n.params.popid}),width:480,onTarget:{x:$(".ns-view-left-box").outerWidth()+9,y:s.y-$(window).scrollTop(),side:"left",pos:"top"},additionalClass:"b-popup_yellow b-collectors__popup"}).$dialog.data(s)})),ns.action.define("collector.kill",(function(e,o){var t=o.popid;ns.forcedRequest([{id:"do-collector-remove",params:{popid:t}},{model:ns.Model.get("collectors").getMasterRequest()}]).then((function(){var e=Vow.resolve(),o=ns.Model.get("filters").getForCollector(t),r=_.map(o,(function(e){return{id:"do-filters-delete",params:{id:e.filid}}}));r.length&&(e=ns.forcedRequest([].concat(r,[{model:ns.Model.get("filters").getMasterRequest()}]))),e.then((function(){ns.events.atrigger("daria:vCollectors:update")}))})),Daria.Dialog.close()})),ns.action.define("collector.close-remove-popup",(function(){Daria.Dialog.close()})),ns.action.define("collector.help-go",(function(){return ns.events.trigger("daria:vCollectors:log","go to settings"),!0})),ns.action.define("collector.support-go",(function(){return ns.events.trigger("daria:vCollectors:log","go to support"),!0})),ns.action.define("message-collector.disable",(function(){var e={no_collectors_promo:!0};return ns.Model.get("settings").setSettings(e,(function(){ns.events.trigger("daria:vCollectors:update")})),Jane.c("message-collector","Клик на нет других ящиков"),!0}));var o=function(e,o){var n="1"===o.is_oauth?"left:oauth-collector-warning-popup":"left:collector-warning-popup";Daria.Dialog.open({title:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_warning-popup-header",_.escape(o.mail))}),body:Jane.tt(n,o),width:480,onopen:function(o){Jane.c(["Left column","Broken collector","show"]),o._repositionDialog=r.bind(this,e),ns.events.on("minify",o._repositionDialog)},onTarget:t(e),onclose:function(e){ns.events.trigger("daria:vCollectors:log","closing popup"),ns.events.trigger("daria:vCollectors:setBrokenCollectorCookie"),ns.events.off("minify",e._repositionDialog),delete e._repositionDialog},oncancel:function(){Jane.c("Left column","Collectors promo","Click on cross")},additionalClass:"b-popup_yellow b-collectors__popup"});var s=Daria.Dialog.$dialog,a=s.find(".js-dialog-button");return s.on("keyup",".js-collector-passwd",(function(){var e=nb.block(a.get(0)),o=nb.block(this);return e?$.trim(o.getValue())?void e.enable():void e.disable():e})),s},t=function(e,o){var t={default:{target:e,side:"left",pos:"top",needTail:!0}};return o&&Object.assign(t.default,{newTop:o}),t.default},r=function(e,o){Daria.Dialog.params.onTarget=t(e,o),Daria.Dialog.position()}})()},4213:function(e,o){ns.action.define("hide",(function(e,o,t){t.style.display="none"}))},4214:function(e,o,t){t(4215),t(4218),t(4219),t(4220),t(4221),t(4222),t(4223),t(4224),t(4225),t(4226),t(4227),t(4228),t(4229),t(4230),t(4231),t(4232),t(4233),t(4234),t(4235),t(4236),t(4237),t(4238),t(4239),t(4240),t(4241),t(4242),t(4243),t(4244),t(4245),t(4246),t(4247)},4215:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(4216);t.n(r);!(function(){var e={useSSL:!0,useProtocol:"imap",imap:{port:143,tpl:"login@domain",ssl:{port:993}},pop:{port:110,tpl:"login@domain",ssl:{port:995}}};ns.Model.define("collector-settings",{events:{"ns-model-init":function(){this.setData(r.WellKnownCollectorSettings)}},methods:{getDefaultConfig:function(o,t){var r=$.extend({},e);return void 0!==o&&null!==o||(o=r.useProtocol),$.extend(r,r[o]),void 0!==t&&null!==t||(t=r.useSSL),t&&$.extend(r,r[o].ssl||{}),r.useProtocol=o,r.useSSL=t,delete r.imap,delete r.pop,delete r.ssl,r},getByDomain:function(o,t,r){if(!o)return null;for(var n,s=this.getData(),a=0,i=s.length;a<i;a++){var l=s[a];if(l.name&&$.inArray(o,l.name)>-1){n=$.extend(!0,{},e,l);break}}if(!n)return null;if(void 0!==t&&null!==t||(t=n.imap?"imap":"pop"),!n[t])return null;if($.extend(n,n[t]),void 0!==r&&null!==r||(r=n.useSSL),r){if(!n[t].ssl)return null;$.extend(n,n[t].ssl||{})}return n.useProtocol=t,n.useSSL=r,delete n.imap,delete n.pop,delete n.name,delete n.ssl,n},getByServer:function(e){return _.find(this.getData(),(function(o){return o.pop&&o.pop.server===e||o.imap&&o.imap.server===e}))}}},ns.ModelStatic)})()},4216:function(e,o,t){"use strict";var r,n,s,a,i,l,u,c,d,f,m,p,h,P,g,v,y,b,_,M,S,A,w,I,k,O,F,C,L,D,x,B,j,T,N,E,R,U,$,W,V,K,H,q,z,J,X,Y,G,Q,Z,ee,oe,te,re,ne,se,ae,ie,le,ue,ce,de,fe,me,pe,he,Pe,ge,ve,ye,be,_e,Me,Se,Ae,we,Ie,ke,Oe,Fe,Ce,Le,De,xe,Be,je,Te,Ne,Ee,Re,Ue,$e,We,Ve,Ke,He,qe,ze,Je,Xe,Ye,Ge,Qe,Ze,eo,oo,to,ro,no,so,ao,io,lo,uo;Object.defineProperty(o,"__esModule",{value:!0}),o.WellKnownCollectorSettings=void 0;var co=t(4217);o.WellKnownCollectorSettings=[(r={name:["mail.ru"],useProtocol:co.Protocols.IMAP},r[co.Protocols.IMAP]={server:"imap.mail.ru"},r[co.Protocols.POP]={server:"pop.mail.ru",tpl:"login"},r.teaser="mail",r.help="http://help.mail.ru/mail-support",r.company="mail.ru",r.SSLOnly=!0,r),(n={name:["list.ru"],useProtocol:co.Protocols.IMAP},n[co.Protocols.IMAP]={server:"imap.mail.ru"},n[co.Protocols.POP]={server:"pop.list.ru",tpl:"login"},n.favicon="mail.ru",n.teaser="mail",n.help="http://help.mail.ru/mail-support",n.company="mail.ru",n.SSLOnly=!0,n),(s={name:["bk.ru"],useProtocol:co.Protocols.IMAP},s[co.Protocols.IMAP]={server:"imap.mail.ru"},s[co.Protocols.POP]={server:"pop.bk.ru",tpl:"login"},s.favicon="mail.ru",s.teaser="mail",s.help="http://help.mail.ru/mail-support",s.company="mail.ru",s.SSLOnly=!0,s),(a={name:["inbox.ru"],useProtocol:co.Protocols.IMAP},a[co.Protocols.IMAP]={server:"imap.mail.ru"},a[co.Protocols.POP]={server:"pop.inbox.ru",tpl:"login"},a.favicon="mail.ru",a.teaser="mail",a.help="http://help.mail.ru/mail-support",a.company="mail.ru",a.SSLOnly=!0,a),(i={name:["gmail.com"],useProtocol:co.Protocols.IMAP},i[co.Protocols.IMAP]={server:"imap.gmail.com"},i[co.Protocols.POP]={server:"pop.gmail.com"},i.favicon="mail.google.com",i.teaser="gmail",i.help="http://support.google.com/mail",i.company="gmail.com",i),(l={name:["km.ru"],useSSL:!1},l[co.Protocols.IMAP]=null,l[co.Protocols.POP]={server:"pop.km.ru"},l),(u={name:["bossmail.ru"],useSSL:!1},u[co.Protocols.IMAP]=null,u[co.Protocols.POP]={server:"pop.bossmail.ru"},u.favicon="km.ru",u),(c={name:["girlmail.ru"],useSSL:!1},c[co.Protocols.IMAP]=null,c[co.Protocols.POP]={server:"pop.girlmail.ru"},c.favicon="km.ru",c),(d={name:["boymail.ru"],useSSL:!1},d[co.Protocols.IMAP]=null,d[co.Protocols.POP]={server:"pop.boymail.ru"},d.favicon="km.ru",d),(f={name:["freemail.ru"],useSSL:!1},f[co.Protocols.IMAP]=null,f[co.Protocols.POP]={server:"pop.freemail.ru"},f.favicon="km.ru",f),(m={name:["megabox.ru"],useSSL:!1},m[co.Protocols.IMAP]=null,m[co.Protocols.POP]={server:"pop.megabox.ru"},m.favicon="km.ru",m),(p={name:["safebox.ru"],useSSL:!1},p[co.Protocols.IMAP]=null,p[co.Protocols.POP]={server:"pop.safebox.ru"},p.favicon="km.ru",p),(h={name:["ua.fm"]},h[co.Protocols.IMAP]=null,h[co.Protocols.POP]={server:"pop.ua.fm"},h.favicon="i.ua",h),(P={name:["ngs.ru","eml.ru","mosk.ru"]},P[co.Protocols.IMAP]=null,P[co.Protocols.POP]={server:"mail.ngs.ru"},P),(g={name:["mtu.ru","mtu-net.ru"],useSSL:!1},g[co.Protocols.IMAP]=null,g[co.Protocols.POP]={server:"pop.mtu.ru"},g.favicon="mts.ru",g),(v={name:["umail.ru"]},v[co.Protocols.IMAP]=null,v[co.Protocols.POP]={server:"pop.umail.ru",tpl:"login"},v),(y={name:["nic.ru"],useProtocol:co.Protocols.IMAP},y[co.Protocols.IMAP]={server:"mail.nic.ru",tpl:"login"},y[co.Protocols.POP]={server:"mail.nic.ru",tpl:"login"},y),(b={name:["i.ua"]},b[co.Protocols.IMAP]=null,b[co.Protocols.POP]={server:"pop.i.ua"},b),(_={name:["yahoo.com","yahoo.co.kr","yahoo.co.nz","yahoo.com.mx","yahoo.com.tr","yahoo.dk","yahoo.gr","yahoo.ie","yahoo.in","yahoo.nl","yahoo.no","yahoo.pl","yahoo.ru","yahoo.se","yahoo.","yahoo.","yahoo.","yahoo."],useProtocol:co.Protocols.IMAP},_[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},_[co.Protocols.POP]={server:"pop.mail.yahoo.com"},_.teaser="yahoo",_),(M={name:["yahoo.ca"],useProtocol:co.Protocols.IMAP},M[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},M[co.Protocols.POP]={server:"pop.mail.yahoo.ca"},M.teaser="yahoo",M),(S={name:["yahoo.cn"],useProtocol:co.Protocols.IMAP},S[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},S[co.Protocols.POP]={server:"pop.mail.yahoo.cn"},S.teaser="yahoo",S),(A={name:["yahoo.co.id"],useProtocol:co.Protocols.IMAP},A[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},A[co.Protocols.POP]={server:"pop.mail.yahoo.co.id"},A.teaser="yahoo",A),(w={name:["yahoo.co.in"],useProtocol:co.Protocols.IMAP},w[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},w[co.Protocols.POP]={server:"pop.mail.yahoo.co.in"},w.teaser="yahoo",w),(I={name:["yahoo.co.jp"],useProtocol:co.Protocols.IMAP},I[co.Protocols.IMAP]={server:"imap.mail.yahoo.co.jp"},I[co.Protocols.POP]={server:"pop.mail.yahoo.co.jp",tpl:"login"},I.teaser="yahoo",I),(k={name:["yahoo.co.th"],useProtocol:co.Protocols.IMAP},k[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},k[co.Protocols.POP]={server:"pop.mail.yahoo.co.th"},k.teaser="yahoo",k),(O={name:["yahoo.co.uk"],useProtocol:co.Protocols.IMAP},O[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},O[co.Protocols.POP]={server:"pop.mail.yahoo.co.uk"},O.teaser="yahoo",O),(F={name:["yahoo.com.ar"],useProtocol:co.Protocols.IMAP},F[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},F[co.Protocols.POP]={server:"pop.mail.yahoo.com.ar"},F.teaser="yahoo",F),(C={name:["yahoo.com.au"],useProtocol:co.Protocols.IMAP},C[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},C[co.Protocols.POP]={server:"pop.mail.yahoo.com.au"},C.teaser="yahoo",C),(L={name:["yahoo.com.br"],useProtocol:co.Protocols.IMAP},L[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},L[co.Protocols.POP]={server:"pop.mail.yahoo.com.br"},L.teaser="yahoo",L),(D={name:["yahoo.com.cn"],useProtocol:co.Protocols.IMAP},D[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},D[co.Protocols.POP]={server:"pop.mail.yahoo.com.cn"},D.teaser="yahoo",D),(x={name:["yahoo.com.hk"],useProtocol:co.Protocols.IMAP},x[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},x[co.Protocols.POP]={server:"pop.mail.yahoo.com.hk"},x.teaser="yahoo",x),(B={name:["yahoo.com.my"],useProtocol:co.Protocols.IMAP},B[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},B[co.Protocols.POP]={server:"pop.mail.yahoo.com.my"},B.teaser="yahoo",B),(j={name:["yahoo.com.pe"],useProtocol:co.Protocols.IMAP},j[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},j[co.Protocols.POP]={server:"pop.mail.yahoo.com.ar"},j.teaser="yahoo",j),(T={name:["yahoo.com.ph"],useProtocol:co.Protocols.IMAP},T[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},T[co.Protocols.POP]={server:"pop.mail.yahoo.com.ph"},T.teaser="yahoo",T),(N={name:["yahoo.com.sg"],useProtocol:co.Protocols.IMAP},N[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},N[co.Protocols.POP]={server:"pop.mail.yahoo.com.sg"},N.teaser="yahoo",N),(E={name:["yahoo.com.tw"],useProtocol:co.Protocols.IMAP},E[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},E[co.Protocols.POP]={server:"pop.mail.yahoo.com.tw"},E.teaser="yahoo",E),(R={name:["yahoo.com.vn"],useProtocol:co.Protocols.IMAP},R[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},R[co.Protocols.POP]={server:"pop.mail.yahoo.com.vn"},R.teaser="yahoo",R),(U={name:["yahoo.de"],useProtocol:co.Protocols.IMAP},U[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},U[co.Protocols.POP]={server:"pop.mail.yahoo.de"},U.teaser="yahoo",U),($={name:["yahoo.es"],useProtocol:co.Protocols.IMAP},$[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},$[co.Protocols.POP]={server:"pop.mail.yahoo.es"},$.teaser="yahoo",$),(W={name:["yahoo.fr"],useProtocol:co.Protocols.IMAP},W[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},W[co.Protocols.POP]={server:"pop.mail.yahoo.fr"},W.teaser="yahoo",W),(V={name:["yahoo.it"],useProtocol:co.Protocols.IMAP},V[co.Protocols.IMAP]={server:"imap.mail.yahoo.com"},V[co.Protocols.POP]={server:"pop.mail.yahoo.it"},V.teaser="yahoo",V),(K={name:["ameritech.net"]},K[co.Protocols.IMAP]=null,K[co.Protocols.POP]={server:"pop.ameritech.yahoo.com"},K.teaser="yahoo",K),(H={name:["flash.net"]},H[co.Protocols.IMAP]=null,H[co.Protocols.POP]={server:"pop.flash.yahoo.com"},H.teaser="yahoo",H),(q={name:["nvbell.net"]},q[co.Protocols.IMAP]=null,q[co.Protocols.POP]={server:"pop.nvbell.yahoo.com"},q.teaser="yahoo",q),(z={name:["pacbell.net"]},z[co.Protocols.IMAP]=null,z[co.Protocols.POP]={server:"pop.pacbell.yahoo.com"},z.teaser="yahoo",z),(J={name:["prodigy.net"]},J[co.Protocols.IMAP]=null,J[co.Protocols.POP]={server:"pop.prodigy.yahoo.com"},J.teaser="yahoo",J),(X={name:["sbcglobal.net"]},X[co.Protocols.IMAP]=null,X[co.Protocols.POP]={server:"pop.sbcglobal.yahoo.com"},X.teaser="yahoo",X),(Y={name:["snet.net"]},Y[co.Protocols.IMAP]=null,Y[co.Protocols.POP]={server:"pop.snet.yahoo.com"},Y.teaser="yahoo",Y),(G={name:["swbell.net"]},G[co.Protocols.IMAP]=null,G[co.Protocols.POP]={server:"pop.swbell.yahoo.com"},G.teaser="yahoo",G),(Q={name:["verizon.net"]},Q[co.Protocols.IMAP]=null,Q[co.Protocols.POP]={server:"incoming.yahoo.verizon.net"},Q.teaser="yahoo",Q),(Z={name:["wans.net"]},Z[co.Protocols.IMAP]=null,Z[co.Protocols.POP]={server:"pop.wans.yahoo.com"},Z.teaser="yahoo",Z),(ee={name:["btinternet.com"]},ee[co.Protocols.IMAP]=null,ee[co.Protocols.POP]={server:"mail.btinternet.com"},ee.teaser="yahoo",ee),(oe={name:["rogers.com","nl.rogers.com"]},oe[co.Protocols.IMAP]=null,oe[co.Protocols.POP]={server:"pop.broadband.rogers.com"},oe.teaser="yahoo",oe),(te={name:["aol.com"],useSSL:!1,useProtocol:co.Protocols.IMAP},te[co.Protocols.IMAP]={server:"imap.aol.com",tpl:"login"},te[co.Protocols.POP]={server:"pop.aol.com",tpl:"login"},te.favicon="aol.com",te.teaser="aol",te),(re={name:["wow.com","love.com","game.com"],useSSL:!1,useProtocol:co.Protocols.IMAP},re[co.Protocols.IMAP]={server:"imap.aol.com",tpl:"login"},re[co.Protocols.POP]={server:"pop.aol.com",tpl:"login"},re.teaser="aol",re),(ne={name:["rol.ru"],useProtocol:co.Protocols.IMAP},ne[co.Protocols.IMAP]={server:"imap.rol.ru"},ne[co.Protocols.POP]={server:"pop.rol.ru"},ne),(se={name:["ukr.net"],useProtocol:co.Protocols.IMAP},se[co.Protocols.IMAP]={server:"imap.ukr.net"},se[co.Protocols.POP]={server:"pop3.ukr.net"},se),(ae={name:["freemail.ukr.net"]},ae[co.Protocols.IMAP]=null,ae[co.Protocols.POP]={server:"freemail.ukr.net"},ae),(ie={name:["infobox.ru"]},ie[co.Protocols.IMAP]=null,ie[co.Protocols.POP]={server:"mail.infobox.ru"},ie),(le={name:["mtw.ru"],useProtocol:co.Protocols.IMAP},le[co.Protocols.IMAP]={server:"imap.mtw.ru",tpl:"login"},le[co.Protocols.POP]={server:"pop.mtw.ru",tpl:"login"},le),(ue={name:["aaanet.ru"],useSSL:!1},ue[co.Protocols.IMAP]=null,ue[co.Protocols.POP]={server:"pop3.aaanet.ru",tpl:"login"},ue),(ce={name:["tochka.ru"]},ce[co.Protocols.IMAP]=null,ce[co.Protocols.POP]={server:"pop.tochka.ru",tpl:"login"},ce),(de={name:["mx.kaluga.ru"]},de[co.Protocols.IMAP]=null,de[co.Protocols.POP]={server:"mx.kaluga.ru",tpl:"login"},de.favicon="kaluga.ru",de),(fe={name:["permonline.ru"]},fe[co.Protocols.IMAP]=null,fe[co.Protocols.POP]={server:"pop.permonline.ru"},fe),(me={name:["yandex.ru","narod.ru","ya.ru","yandex.com","yandex.com.tr","yandex.ua","yandex.kz","yandex.by","yandex.az","yandex.com.am","yandex.com.ge","yandex.co.il","yandex.kg","yandex.lv","yandex.lt","yandex.md","yandex.tj","yandex.tm","yandex.uz","yandex.fr","yandex.ee","яндекс.рф","aeterna.ru","avril.ru","borda.ru","fotoplenka.ru","fromru.com","front.ru","hotbox.ru","hotmail.ru","justlunch.ru","krovatka.su","land.ru","loveplanet.ru","mail15.com","mail333.com","memori.ru","newmail.ru","nightmail.ru","nm.ru","photofile.ru","pisem.net","pochta.com","pochta.ru","pochtamt.ru","pop3.ru","qip.ru","rbcmail.ru","smtp.ru","webmail.ru","zahvat.ru","ziza.ru","5ballov.ru","e1.ru"],useProtocol:co.Protocols.IMAP},me[co.Protocols.IMAP]={server:"imap.yandex.ru"},me[co.Protocols.POP]={server:"pop.yandex.ru"},me.favicon="mail.yandex.ru",me.isOwn=!0,me.teaser="yandex",me.help="https://yandex.ru/support/mail/web/preferences/collector.html#collector-problems__yes",me),(pe={name:["mynet.com"]},pe[co.Protocols.IMAP]=null,pe[co.Protocols.POP]={server:"pop.mynet.com"},pe.useSSL=!1,pe),(he={name:["superonline.com"]},he[co.Protocols.IMAP]={server:"mail.superonline.com"},he[co.Protocols.POP]=null,he.useProtocol=co.Protocols.IMAP,he.useSSL=!0,he),(Pe={name:["e-kolay.net"]},Pe[co.Protocols.IMAP]={server:"pop3.e-kolay.net"},Pe[co.Protocols.POP]=null,Pe.useProtocol=co.Protocols.IMAP,Pe.useSSL=!0,Pe.favicon="ekolay.net",Pe),(ge={name:["ttnet.net.tr"]},ge[co.Protocols.IMAP]={server:"mail.ttnet.net.tr"},ge[co.Protocols.POP]=null,ge.useProtocol=co.Protocols.IMAP,ge.useSSL=!0,ge.favicon="ttnet.com.tr",ge),(ve={name:["turk.net"]},ve[co.Protocols.IMAP]={server:"pop3.turk.net"},ve[co.Protocols.POP]=null,ve.useProtocol=co.Protocols.IMAP,ve.useSSL=!0,ve),(ye={name:["mynet.com.tr"]},ye[co.Protocols.IMAP]=null,ye[co.Protocols.POP]={server:"pop.mynet.com.tr"},ye.favicon="mynet.com",ye),(be={name:["74.ru","chelyabinsk.ru","chel.ru","domchel.ru","autochel.ru","chelfin.ru","mychel.ru","2074.ru","cheldiplom.ru"]},be[co.Protocols.IMAP]=null,be[co.Protocols.POP]={server:"pop3.74.ru"},be),(_e={name:["t-online.de"],useProtocol:co.Protocols.IMAP},_e[co.Protocols.IMAP]={server:"secureimap.t-online.de"},_e[co.Protocols.POP]={server:"popmail.t-online.de"},_e.teaser="yahoo",_e),(Me={name:["alice.fr","aliceadsl.fr"]},Me[co.Protocols.IMAP]=null,Me[co.Protocols.POP]={server:"pop.alice.fr"},Me.teaser="yahoo",Me),(Se={name:["arcor.de"],useProtocol:co.Protocols.IMAP},Se[co.Protocols.IMAP]={server:"imap.arcor.de",tpl:"login"},Se[co.Protocols.POP]={server:"pop3.arcor.de",tpl:"login"},Se.teaser="yahoo",Se),(Ae={name:["bbox.fr"],useProtocol:co.Protocols.IMAP},Ae[co.Protocols.IMAP]={server:"imap.bbox.fr"},Ae[co.Protocols.POP]={server:"pop3.bbox.fr"},Ae.teaser="yahoo",Ae),(we={name:["bouygtel.fr"],useProtocol:co.Protocols.IMAP},we[co.Protocols.IMAP]={server:"imap.bouygtel.fr"},we[co.Protocols.POP]={server:"pop.bouygtel.fr"},we.teaser="yahoo",we),(Ie={name:["caramail.com"]},Ie[co.Protocols.IMAP]=null,Ie[co.Protocols.POP]={server:"pop.lycos.co.uk"},Ie.teaser="yahoo",Ie),(ke={name:["cegetel.fr","cegetel.net"]},ke[co.Protocols.IMAP]={server:"imap.cegetel.net"},ke[co.Protocols.POP]=null,ke.useProtocol=co.Protocols.IMAP,ke.teaser="yahoo",ke),(Oe={name:["club-internet.fr","club-internet.net"]},Oe[co.Protocols.IMAP]=null,Oe[co.Protocols.POP]={server:"pop3.club-internet.fr"},Oe.teaser="yahoo",Oe),(Fe={name:["email.de"]},Fe[co.Protocols.IMAP]=null,Fe[co.Protocols.POP]={server:"pop3.web.de"},Fe.teaser="yahoo",Fe),(Ce={name:["fastwebnet.it"]},Ce[co.Protocols.IMAP]=null,Ce[co.Protocols.POP]={server:"pop.fastwebnet.it"},Ce.teaser="yahoo",Ce),(Le={name:["free.fr"],useProtocol:co.Protocols.IMAP},Le[co.Protocols.IMAP]={server:"imap.free.fr",tpl:"login"},Le[co.Protocols.POP]={server:"pop.free.fr",tpl:"login"},Le.teaser="yahoo",Le),(De={name:["freenet.de"],useProtocol:co.Protocols.IMAP},De[co.Protocols.IMAP]={server:"mx.freenet.de"},De[co.Protocols.POP]={server:"mx.freenet.de"},De.teaser="yahoo",De),(xe={name:["gmx.de","gmx.net","gmx.at","gmx.ch","gmx.eu","gmx.biz","gmx.org","gmx.info"],useProtocol:co.Protocols.IMAP},xe[co.Protocols.IMAP]={server:"imap.gmx.net"},xe[co.Protocols.POP]={server:"pop.gmx.net"},xe.teaser="yahoo",xe),(Be={name:["googlemail.com"],useProtocol:co.Protocols.IMAP},Be[co.Protocols.IMAP]={server:"imap.googlemail.com"},Be[co.Protocols.POP]={server:"pop.googlemail.com"},Be.teaser="yahoo",Be),(je={name:["laposte.net"],useProtocol:co.Protocols.IMAP},je[co.Protocols.IMAP]={server:"imap.laposte.net",tpl:"login"},je[co.Protocols.POP]={server:"pop.laposte.net",tpl:"login"},je.teaser="yahoo",je),(Te={name:["libero.it","iol.it","blu.it","inwind.it"],useProtocol:co.Protocols.IMAP},Te[co.Protocols.IMAP]={server:"imapmail.libero.it"},Te[co.Protocols.POP]={server:"popmail.libero.it"},Te.useSSL=!1,Te.teaser="yahoo",Te),(Ne={name:["lybertysurf.fr"]},Ne[co.Protocols.IMAP]=null,Ne[co.Protocols.POP]={server:"pop.libertysurf.fr"},Ne.teaser="yahoo",Ne),(Ee={name:["lycos.co.uk"]},Ee[co.Protocols.IMAP]=null,Ee[co.Protocols.POP]={server:"pop.lycos.co.uk",tpl:"login"},Ee.teaser="yahoo",Ee),(Re={name:["netcourrier.com"]},Re[co.Protocols.IMAP]=null,Re[co.Protocols.POP]={server:"mail.netcourrier.com"},Re.teaser="yahoo",Re),(Ue={name:["neuf.fr","sfr.fr"],useProtocol:co.Protocols.IMAP},Ue[co.Protocols.IMAP]={server:"imap.sfr.fr"},Ue[co.Protocols.POP]={server:"pop.sfr.fr"},Ue.useSSL=!1,Ue.teaser="yahoo",Ue),($e={name:["noos.fr"]},$e[co.Protocols.IMAP]=null,$e[co.Protocols.POP]={server:"pop.noos.fr"},$e.teaser="yahoo",$e),(We={name:["o2online.de"]},We[co.Protocols.IMAP]=null,We[co.Protocols.POP]={server:"pop.o2online.de"},We.teaser="yahoo",We),(Ve={name:["orange.fr"],useProtocol:co.Protocols.IMAP},Ve[co.Protocols.IMAP]={server:"imap.orange.fr",tpl:"login"},Ve[co.Protocols.POP]={server:"pop.orange.fr",tpl:"login"},Ve.useSSL=!1,Ve.teaser="yahoo",Ve),(Ke={name:["wanadoo.fr"],useProtocol:co.Protocols.IMAP},Ke[co.Protocols.IMAP]={server:"imap.wanadoo.fr"},Ke[co.Protocols.POP]={server:"pop.wanadoo.fr"},Ke.teaser="yahoo",Ke),(He={name:["tele2.fr"]},He[co.Protocols.IMAP]=null,He[co.Protocols.POP]={server:"pop.tele2.fr"},He.teaser="yahoo",He),(qe={name:["telefonica.net"]},qe[co.Protocols.IMAP]={server:"imap.telefonica.net"},qe[co.Protocols.POP]=null,qe.useProtocol=co.Protocols.IMAP,qe.teaser="yahoo",qe),(ze={name:["terra.es"],useProtocol:co.Protocols.IMAP},ze[co.Protocols.IMAP]={server:"imap4.terra.es"},ze[co.Protocols.POP]={server:"pop3.terra.es"},ze.useSSL=!1,ze.teaser="yahoo",ze),(Je={name:["tim.it"]},Je[co.Protocols.IMAP]={server:"easyimap4.posta.tim.it"},Je[co.Protocols.POP]=null,Je.useProtocol=co.Protocols.IMAP,Je.teaser="yahoo",Je),(Xe={name:["tin.it"]},Xe[co.Protocols.IMAP]=null,Xe[co.Protocols.POP]={server:"box.tin.it"},Xe.teaser="yahoo",Xe),(Ye={name:["tiscali.fr"],useProtocol:co.Protocols.IMAP},Ye[co.Protocols.IMAP]={server:"imap.tiscali.fr"},Ye[co.Protocols.POP]={server:"pop.tiscali.fr"},Ye.teaser="yahoo",Ye),(Ge={name:["tiscali.it"],useProtocol:co.Protocols.IMAP},Ge[co.Protocols.IMAP]={server:"imap.tiscali.it"},Ge[co.Protocols.POP]={server:"pop.tiscali.it"},Ge.teaser="yahoo",Ge),(Qe={name:["tre.it"]},Qe[co.Protocols.IMAP]={server:"imap.tre.it"},Qe[co.Protocols.POP]=null,Qe.useProtocol=co.Protocols.IMAP,Qe.teaser="yahoo",Qe),(Ze={name:["virgilio.it"]},Ze[co.Protocols.IMAP]=null,Ze[co.Protocols.POP]={server:"in.virgilio.it",tpl:"login"},Ze.teaser="yahoo",Ze),(eo={name:["vodafone.de"]},eo[co.Protocols.IMAP]=null,eo[co.Protocols.POP]={server:"pop.email.vodafone.de"},eo.teaser="yahoo",eo),(oo={name:["vodafone.it"]},oo[co.Protocols.IMAP]=null,oo[co.Protocols.POP]={server:"popmail.vodafone.it"},oo.teaser="yahoo",oo),(to={name:["email.ua"]},to[co.Protocols.IMAP]={server:"imap.email.ua"},to[co.Protocols.POP]={server:"pop.email.ua"},to),(ro={name:["3g.ua"]},ro[co.Protocols.IMAP]=null,ro[co.Protocols.POP]={server:"pop.3g.ua"},ro),(no={name:["mail.ua"],useProtocol:co.Protocols.IMAP},no[co.Protocols.IMAP]={server:"imap.mail.ru"},no[co.Protocols.POP]={server:"pop.mail.ru"},no.useSSL=!0,no),(so={name:["a.ua"],useProtocol:co.Protocols.IMAP},so[co.Protocols.IMAP]={server:"imap.a.ua"},so[co.Protocols.POP]={server:"pop.a.ua"},so),(ao={name:["ukrpost.net"],useProtocol:co.Protocols.IMAP},ao[co.Protocols.IMAP]={server:"mail.ukrpost.ua"},ao[co.Protocols.POP]={server:"mail.ukrpost.ua"},ao),(io={name:["online.ua"]},io[co.Protocols.IMAP]=null,io[co.Protocols.POP]={server:"pop3.online.ua"},io.useSSL=!1,io),(lo={name:["meta.ua"]},lo[co.Protocols.IMAP]=null,lo[co.Protocols.POP]={server:"pop.meta.ua"},lo.useSSL=!0,lo),(uo={name:["tut.by"],useProtocol:co.Protocols.IMAP},uo[co.Protocols.IMAP]={server:"imap.yandex.ru"},uo[co.Protocols.POP]={server:"pop.yandex.ru"},uo.useSSL=!0,uo)]},4217:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Protocols=void 0;!(function(e){e.IMAP="imap",e.POP="pop"})(o.Protocols||(o.Protocols={}))},4218:function(e,o){!(function(){ns.Model.define("collectors",{params:{no_cache:null},split:{items:".",params:{popid:".popid"},model_id:"collector"},methods:{getMasterRequest:function(){var e=this,o=ns.Model.get(this.id,_.assign({},this.params,{no_cache:1}));return o.destroy(),o.once("ns-model-changed",(function(){e.setData(this.getData())})),o},getData:function(){return this.data||[]},exists:function(e){return this.models.some((function(o){return o.get(".email")===e}))},getById:function(e){return ns.Model.get("collector",{popid:e}).getData()},getCount:function(){return this.models.length}}})})()},4219:function(e,o){ns.Model.define("collector",{events:{"ns-model-changed":"onModelChanged"},params:{popid:null},methods:{preprocessData:function(e){e.body&&(e=e.body);var o=e.email;if(!o)if(_.contains(e.login,"@"))o=e.login;else{var t=ns.Model.get("collector-settings").getByServer(e.server);o=t?e.login+"@"+t.name:e.login}return e.email=o,e},markJustCreated:function(){this.set(".justCreated",!0)},onModelChanged:function(){var e=this.getData();e.last_connect&&(e.human_time=Jane.Date.humanDate(new Date(1e3*e.last_connect)))}}})},4220:function(e,o){ns.Model.define("do-folder-clear",{params:{fid:null,method:null,old_f:null,from_f:null,subj_f:null}})},4221:function(e,o){ns.Model.define("do-folder-create-hidden-trash",{})},4222:function(e,o){ns.Model.define("do-folder-mark-read",{params:{fid:null,tabId:null}})},4223:function(e,o){ns.Model.define("do-folder-move",{params:{fid:null,parent_id:null}})},4224:function(e,o){ns.Model.define("do-folder-purge-hidden-trash",{})},4225:function(e,o){ns.Model.define("do-folder-rename",{params:{fname:null,fid:null,parent_id:null}})},4226:function(e,o){ns.Model.define("do-folder-set-options",{params:{fid:null,prev:null}})},4227:function(e,o){ns.Model.define("do-folder-set-symbol",{params:{fid:null,symbol:null}})},4228:function(e,o){ns.Model.define("do-folders-add",{params:{folder_name:null,parent_id:null,symbol:null},methods:{getFid:function(){return this.get(".body.updated")}}})},4229:function(e,o){ns.Model.define("do-folder-remove",{params:{fid:null,force:"yes"}})},4230:function(e,o){ns.Model.define("do-labels-add",{params:{label_name:null,label_color:null,label_type:null}})},4231:function(e,o){ns.Model.define("do-labels-add-by-symbol",{params:{symbol:null}})},4232:function(e,o){ns.Model.define("do-label",{params:{lid:null,ids:null,tids:null,fid:null,tabId:null},methods:{getAffectedTids:function(){return this.select('.thread[.lid == "'+this.params.lid+'"].tid')}}})},4233:function(e,o){ns.Model.define("do-unlabel",{params:{lid:null,ids:null,tids:null,fid:null,tabId:null},methods:{getAffectedTids:function(){return this.select('.thread[.lid != "'+this.params.lid+'"].tid')}}})},4234:function(e,o){function t(e,o){return s(e)||n(e,o)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,o){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],r=!0,n=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(t.push(a.value),!o||t.length!==o);r=!0);}catch(e){n=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw s}}return t}}function s(e){if(Array.isArray(e))return e}function a(e,o,t,r,n,s,a){try{var i=e[s](a),l=i.value}catch(e){return void t(e)}i.done?o(l):Promise.resolve(l).then(r,n)}function i(e){return function(){var o=this,t=arguments;return new Promise(function(r,n){function s(e){a(l,r,n,s,i,"next",e)}function i(e){a(l,r,n,s,i,"throw",e)}var l=e.apply(o,t);s(void 0)})}}ns.Model.define("tab",{params:{id:null},methods:{request:(function(){function e(){return o.apply(this,arguments)}var o=i(regeneratorRuntime.mark((function e(){var o,r,n,s,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns.request(["tabs"]);case 2:o=e.sent,r=t(o,1),n=r[0],s=n.getTabs().find((function(e){return e.id===a.params.id})),s&&this.setData(s);case 7:case"end":return e.stop()}}),e,this)})));return e})(),getUnreadCount:function(){return this.get(".counters.new")||0},getCount:function(){return this.get(".counters.all")},_setUnreadCount:function(e){return this.set(".counters.new",e)},getRecent:function(){return this.get(".counters.recent")},setRecent:function(){this.setIfChanged(".counters.recent",!0)},clearRecent:function(){delete this.getData().counters.recent},adjustUnreadCount:function(e){var o=this.getUnreadCount(),t=Math.max(Number(o)+Number(e),0);o!==t&&this._setUnreadCount(t)}}})},4235:function(e,o,t){"use strict";var r=[{id:"relevant",title:i18n("%Folder_tabs_Inbox"),description:"",iconName:"mail--NewTabs-Default",emptyText:i18n("%Empty_tab_inbox")},{id:"news",title:i18n("%Folder_tabs_News"),description:i18n("%Folder_tabs_News_descr"),iconName:"mail--NewTabs-News",emptyText:i18n("%Empty_tab_maillists")},{id:"social",title:i18n("%Folder_tabs_Social"),description:i18n("%Folder_tabs_Social_descr"),iconName:"mail--NewTabs-Social",emptyText:i18n("%Empty_tab_social")}];ns.Model.define("tabs",{split:{items:".tabs",params:{id:".id"},model_id:"tab"},methods:{preprocessData:function(e){return{tabs:r.map((function(o){return Object.assign({},o,e[o.id])}))}},getTab:function(e){var o=ns.Model.get("tab",{id:e});return o.isValid()?o:null},getTabs:function(){return this.models.slice()},getFoldersTabsList:function(){return this.models.map((function(e){return e.getData()}))},getFoldersTabsIds:function(){return r.map((function(e){return e.id}))},getUnreadCount:function(e){var o=this.getTab(e);return o?o.getUnreadCount():0},adjustUnreadCounters:function(e){var o=this;return Object.keys(e).reduce((function(t,r){var n=o.getTab(r);if(n){var s=e[r];return n.adjustUnreadCount(s),t+s}return t}),0)}}})},4236:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(139);t.n(r);ns.Model.define("folder",{params:{fid:null},methods:{preprocessData:function(e){if(Daria.IS_CORP&&this.data){["new","count"].some((function(o){return this.get("."+o)!==e[o]}),this)&&this._messagesInvalidate()}return e},hasDataChanged:function(e){return!_.isEqual(this.getData(),e)},getRecent:function(){return this.get(".recent")},adjustUnreads:function(e){if(this.isValid()){var o=this.getUnreadsCount(),t=Math.max(o+e,0);t!==o&&(this.set(".new",t),this.setHasUnread(t>0))}},getParent:function(){var e=this.get(".parent_id");return e?ns.Model.get("folder",{fid:e}):null},getUnreadsCount:function(){return this.get(".new")},getSubfolders:function(){return this.get(".subfolder")},hasUnreads:function(){return this.getUnreadsCount()>0},hasUnreadsDeep:function(){return this.get(".has-unread")||this.hasUnreads()},hasNestingToggler:function(){var e=this.getSubfolders();if(!e||!e.length)return!1;var o=!0;if(ns.Model.get("settings").getSetting("hide_empty_folders")&&this.hasUnreads()){var t=!1;e.forEach((function(e){t=t||!ns.Model.get("folders").isIncoming(e)||ns.Model.get("folder",{fid:e}).hasUnreads()})),t||(o=!1)}return o},isFolded:function(){return this.get(".folded")},isOpen:function(){return this.get(".opened")},updateCounts:function(e){if(this.isValid()){var o={};if(_.isNumber(e.count)){var t=this.get(".count"),r=e.count;o.count=r-t,0!==o.count&&this.set(".count",r)}if(_.isNumber(e.new)){var n=this.getUnreadsCount(),s=e.new;if(o.new=s-n,0!==o.new){this.set(".new",s);var a=ns.Model.get("folders");a.spamOrTrash(this.params.fid)||a.adjustAllUnreads(o.new)}}return o}},recalcOpened:function(){var e=ns.Model.get("folders").isFolder(this.get(".fid"),r.WellKnownFolderSymbol.ARCHIVE);if(Daria.areFoldersTabsEnabled()&&e)return void this.setIfChanged(".opened",!0);var o=this.getParent();if(o){var t=!0;o.isFolded()&&(t=!1),o.isOpen()||(t=!1),this.set(".opened",t),this._toggleSubfoldersOpened()}},setHasUnread:function(e){var o=e||this.hasUnreads();o||this.getSubfolders().forEach((function(e){var t=ns.Model.get("folder",{fid:e}).get(".has-unread");o=o||t})),this.setIfChanged(".has-unread",o);var t=this.getParent();t&&t.get(".symbol")!==r.WellKnownFolderSymbol.INBOX&&t.setHasUnread(e)},setRecent:function(){this.setIfChanged(".recent",!0)},switchFolded:function(e){var o=this.getData(),t=this.get(".fid");if(!this.getSubfolders().length)return!1;var r=ns.Model.get("folders"),n=r.getOpenedFolders(),s=o.folded;if(_.isBoolean(e)){if(e===s)return s;s=!e}return Jane.Array.remove(n,t),s?(this.set(".folded",!1),n.push(t)):this.set(".folded",!0),ns.Model.get("settings").setOpenedFolders(n),this._toggleSubfoldersOpened(),!s},_toggleSubfoldersOpened:function(){this.getSubfolders().forEach((function(e){ns.Model.get("folder",{fid:e}).recalcOpened()}))},_messagesInvalidate:function(){var e=this.params.fid;ns.page.current.params.current_folder!==e&&(ns.Model.invalidate("messages",(function(o){if(o.params.current_folder===e)return o.models.length&&o.models.forEach((function(e){ns.Model.get("messages",{thread_id:e.get(".tid")}).invalidate()})),!0})),ns.Model.invalidate("messages-item-state",(function(o){return o.params.current_folder===e})))}}})},4237:function(e,o,t){"use strict";function r(e){return a(e)||s(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var o=0,t=new Array(e.length);o<e.length;o++)t[o]=e[o];return t}}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}Object.defineProperty(o,"__esModule",{value:!0});var u=t(139);t.n(u);!(function(){function e(){return u.SystemFolders.slice()}function o(e,t){var r=e[t.parent_id];return r.parent_id?o(e,r):r}var t,n={},s=(t={},l(t,u.WellKnownFolderSymbol.INBOX,i18n("%Folder_inbox")),l(t,u.WellKnownFolderSymbol.SENT,i18n("%Folder_sent")),l(t,u.WellKnownFolderSymbol.TRASH,i18n("%Folder_trash")),l(t,u.WellKnownFolderSymbol.SPAM,i18n("%Folder_spam")),l(t,u.WellKnownFolderSymbol.DRAFT,i18n("%Folder_draft")),l(t,u.WellKnownFolderSymbol.OUTBOX,i18n("%Folder_outbox")),l(t,u.WellKnownFolderSymbol.TEMPLATE,i18n("%Folder_templates")),l(t,u.WellKnownFolderSymbol.ARCHIVE,i18n("%Folder_archive")),l(t,u.WellKnownFolderSymbol.RESTORED,i18n("%Folder_restored")),l(t,u.WellKnownFolderSymbol.REPLY_LATER,i18n("%Folder_reply_later")),t);n.getFolderById=function(e){return ns.Model.get("folder",{fid:e}).getData()},n.hasFolder=function(e){return"object"===i(this.data)&&this.data.folder.some((function(o){return o.fid===e}))},n.getFoldersByName=function(e){var o;return"object"===i(this.data)&&(o=_.find(this.data.folder,(function(o){return o.name===e}))),[o]},n.getSubfolders=function(e){return jpath(this.data,'.folder[.parent_id == "'+e+'"]')},n.isPresentAndNotShared=function(e){return Boolean(jpath(this.data,'.folder[.fid == "'+e+'" && !.shared ]').length)},n.getSubfoldersFid=function(e){return $.map(this.getSubfolders(e)||[],(function(e){return e.fid}))},n.getAllSubfoldersFid=function(e){return function e(o){for(var t=this.getSubfoldersFid(o),r=t.length;r--;)t=t.concat(e.call(this,t[r]));return t}.call(this,e)},n.getInboxFolders=function(){var e=this.get(".folder"),t=e[0].fid,r=e.reduce((function(e,o){return e[o.fid]=o,e}),{}),n=e.reduce((function(e,t){return e[t.fid]=t.parent_id?o(r,t).fid:t.fid,e}),{});return Object.keys(n).filter((function(e){return n[e]===t&&!r[e].shared}))},n.spamOrTrash=function(e){return this.isFolder(e,[u.WellKnownFolderSymbol.TRASH,u.WellKnownFolderSymbol.SPAM])},n.isIncoming=function(e){return!this.isFolder(e,u.NotIncoming)},n.isSystemFolder=function(o){var t=this.getFolderById(o);return!!t&&(!t.user&&this.isFolder(o,e()))},n.isSystemFolderChild=function(o,t){var r=this,n=this.getFolderById(o);if(!n||!n.user||this.isSystemFolder(o))return!1;var s=e(),a="function"==typeof t?s.filter(t):s;return!!a.length&&a.some((function(e){return r.hasChildByFid(r.getFidBySymbol(e),o)}))},n.getDroppableListFid=function(){var e=this,o=$.grep(this.get(".folder"),(function(o){return e.isDroppable(o.fid)}));return o=$.map(o,(function(e){return e.fid}))},n.getMoveFoldersFid=function(e){if(!this.isDraggable(e))return[];var o=this.getDroppableListFid(),t=this.getAllSubfoldersFid(e);return t=t.concat(e),o=$.grep(o,(function(e){return-1===$.inArray(e,t)}))},n.comparePosition=function(e,o){var t=!e.symbol&&e.user,r=!o.symbol&&o.user,n=e.name.toLowerCase(),s=o.name.toLowerCase(),a=e.folder_options.position,i=o.folder_options.position,l=t?a:1e12+Number(e.order||0),c=r?i:1e12+Number(o.order||0);return e.symbol===u.WellKnownFolderSymbol.INBOX&&(l=-1),o.symbol===u.WellKnownFolderSymbol.INBOX&&(c=-1),l<c?-1:l>c?1:n<s?-1:n>s?1:0},n.getNeighborFids=function(e){var o=e&&this.getFolderById(e);if(!o)return[];var t;return t=o.parent_id?this.getSubfolders(o.parent_id):$.grep(this.get(".folder"),(function(e){return!e.parent_id&&e.user&&!e.symbol})),t.sort(this.comparePosition),$.map(t,(function(e){return e.fid}))},n.getParentFid=function(e){var o=e&&this.getFolderById(e);return o&&o.parent_id||this.getFolderBySymbol(u.WellKnownFolderSymbol.INBOX).fid},n.getTopParent=function(e){for(var o=this.getFolderById(this.getParentFid(e));o&&!o.symbol;)o=this.getFolderById(this.getParentFid(o.fid));return o},n.isDroppable=function(e){var o=e&&this.getFolderById(e);if(!o)return!1;var t=this.getTopParent(e);return!(!t||t.symbol!==u.WellKnownFolderSymbol.INBOX)&&(o.user&&!o.symbol&&!o.shared||o.symbol===u.WellKnownFolderSymbol.INBOX)},n.isDraggable=function(e){var o=e&&this.getFolderById(e);if(!o)return!1;var t=this.getTopParent(e);return!(!t||t.symbol!==u.WellKnownFolderSymbol.INBOX)&&(o.user&&!o.symbol&&!o.shared)},n.moveIn=function(e,o){var t=$.Deferred();if(e===o)return t.resolve("donot"),t.promise();var r=this.getFolderById(e),n=this.getParentFid(e),s=this.getFolderById(o);if(!r||!s)return t.reject("notfound"),t.promise();if(!this.isDraggable(e)||!this.isDroppable(o))return t.reject("noaccess"),t.promise();if(n===o)return t.resolve("donot"),t.promise();var a;a=o?this.getSubfolders(o):$.grep(this.get(".folder"),(function(e){return!e.parent_id}));for(var i=0;i<a.length;i++)if(a[i].name===r.name)return t.reject("nameduplicate"),t.promise();return this.getFolderBySymbol(u.WellKnownFolderSymbol.INBOX).fid===o&&(o=0),ns.forcedRequest([{id:"do-folder-move",params:{fid:e,parent_id:o}},{id:"folders"}]).then((function(){t.resolve("ok")}),(function(){t.reject("actionerror")})),t.promise()},n.moveAfter=function(e,o){var t=$.Deferred();if(e===o)return t.resolve("donot"),t.promise();var r=this.getFolderById(e);if(!r||!$.isPlainObject(r.folder_options))return t.reject("notfound"),t.promise();if(!this.isDraggable(e))return t.reject("noaccessfid"),t.promise();var n,s=$({}),a=this;if(o){if(!this.isDroppable(o))return t.reject("noaccessover"),t.promise();var i=this.getParentFid(e),l=this.getParentFid(o);if(i!==l)s.queue((function(o){a.moveIn(e,l).done(o).fail(t.reject)}));else if(n=this.getNeighborFids(e),$.inArray(e,n)===$.inArray(o,n)+1)return t.resolve("donot"),t.promise()}else if(n=this.getNeighborFids(e),0===$.inArray(e,n))return t.resolve("donot"),t.promise();return s.queue((function(){ns.forcedRequest([{id:"do-folder-set-options",params:{fid:e,prev:o||0}},{id:"folders"}]).then((function(){t.resolve("ok");var r=a.getNeighborFids(o||e),n=$.inArray(e,r),s=$.inArray(o,r);(o&&n!==s+1||!o&&0!==n)&&Jane.ErrorLog.send({event:"folders.move.position",status:"position_error",fid:e+":"+a.getFolderById(e).folder_options.position,overFid:o?o+":"+a.getFolderById(o).folder_options.position:void 0})}),(function(){t.reject("actionerror")}))})),t.promise()},n.moveBefore=function(e,o){var t=$.Deferred(),r=this.getNeighborFids(o),n=r[$.inArray(o,r)-1];if(n)this.moveAfter(e,n).done(t.resolve).fail(t.reject);else{var s=$({}),a=this,i=this.getParentFid(o);s.queue((function(o){a.moveIn(e,i).done(o).fail(t.reject)})),s.queue((function(){a.moveAfter(e,!1).done(t.resolve).fail(t.reject)}))}return t.promise()},n.getCount=function(e){var o=this.getFolderById(e);return o?o.count:null},n.getUnreadCount=function(e){var o=e?this.getFolderById(e):this.data;return o?Number(o.new):null},n.getFoldersHash=function(){var e=this.getData(),o={};return e&&$.each(e.folder,(function(){o[this.fid]=0})),o},n.isShared=function(e){var o=this.getFolderById(e);return Boolean(o&&o.shared)},n.getDefaultFolderName=function(e){return s[e]},n.setSymbol=function(e,o){var t=[{id:"do-folder-set-symbol",params:{fid:e,symbol:o}},{id:"folders"}];return ns.forcedRequest(t).then((function(e){var t=Vow.promise(),r=e[1].getFolderBySymbol(o);return r?(ns.events.trigger("daria:mFolders:symbolSet",r),t.fulfill(r)):t.reject(new Error(Daria.supplant("Symbol {symbol} was not set on folder",{symbol:o}))),t}))},n.isArchive=function(e){var o=this.getFolderById(e);return!!o&&o.symbol===u.WellKnownFolderSymbol.ARCHIVE},n.getCountUserFolders=function(){return jpath(this.data,".folder[.user]").length},n.createArchiveFolder=function(){var e,o=this,t=o.getFolderBySymbol(u.WellKnownFolderSymbol.ARCHIVE),r=o.getFoldersByName("Archive").shift(),n="Archive"!==i18n("%Folder_archive")?o.getFoldersByName(i18n("%Folder_archive")).shift():null,s=Vow.promise();return t||r||n?t||!r&&!n?s.fulfill(t):r?s=o.setSymbol(r.fid,u.WellKnownFolderSymbol.ARCHIVE):n&&(e=[{id:"do-folder-rename",params:{fname:"Archive",fid:n.fid}},{id:"folders"}],s=ns.forcedRequest(e).then((function(){return o.setSymbol(n.fid,u.WellKnownFolderSymbol.ARCHIVE).fail((function(){}))}))):(e=[{id:"do-folders-add",params:{folder_name:"Archive"}},{id:"folders"}],s=ns.forcedRequest(e).then((function(e){var o=Vow.promise(),t=e[1],r=t.getFolderByName("Archive");return r&&r.fid?o.fulfill(r):o.reject("New folder has no fid"),o})).then((function(e){return o.setSymbol(e.fid,u.WellKnownFolderSymbol.ARCHIVE).fail((function(){}))}))),s},n.getHierarchyStructure=function(e,o,t){function n(o){var t=[];o=o.sort(s.comparePosition);for(var r=0;r<o.length;++r){var i=o[r];_.isFunction(e)&&!e(i)||(i=_.clone(i),i.subfolder&&(i.items=n(i.subfolder.map(a))),delete i.subfolder,delete i.parent_id,t.push(i))}return t}var s=this,a=this.getFolderById.bind(this),i=this.get(".folder");_.find(i,{symbol:u.WellKnownFolderSymbol.INBOX}).items=n(_.filter(i,(function(e){return e.user&&!e.parent_id})));var l=_.filter(i,(function(e){return!e.user&&!e.parent_id})),c=n(l);if(o){var d=_.findIndex(c,{symbol:u.WellKnownFolderSymbol.INBOX}),f=c[d].items,m=l.slice(0,d),p=l.slice(d+1);c=t?r(f):[].concat(r(m),r(f),r(p))}return c},n.logDragndropAbility=function(){var e=this.get(".folder");if(e)for(var o=0,t=0,r=e.length;t<r;t++)if(this.isDraggable(e[t].fid)&&++o>1)return void Jane.c("Drag-n-drop","Драгндроп папок","Показ папок в инбоксе (больше 1, драг разрешен)")},ns.Model.define("folders",{split:{items:".folder",params:{fid:".fid"},model_id:"folder"},methods:$.extend({_ids:{},_symbols:{},_cacheBySymbol:{},preprocessData:function(e){this._hasUserFolders=!1,this._hasNestedFolders=!1;for(var o=ns.page.current.params.current_folder,t={},r={},n={},a=e.folder,i={},l=this._getOpenedFolders(e),c=0,d=a.length;c<d;c++){var f=a[c],m=f.fid,p=f.symbol;i[m]=f;var h=o&&m!==o,P=this.getFolderById(m),g=P&&f.count!==P.count;h&&g&&Daria.messages.clearCacheByFID(m),p&&(p in s&&(f.name=s[p]),t[p]=m,r[p]=f,n[m]=p),!this._hasUserFolders&&f.user&&(this._hasUserFolders=!0),this._hasNestedFolders||!f.user&&!f.parent_id||(this._hasNestedFolders=!0),f.subfolder.length>0?f.folded=!_.includes(l,m):f.folded=!1,f.opened=!0;var v=Daria.areFoldersTabsEnabled()&&f.symbol===u.WellKnownFolderSymbol.ARCHIVE;if(f.parent_id&&!v){var y=i[f.parent_id];y.folded&&(f.opened=!1),y.opened||(f.opened=!1)}}return this._ids=t,this._cacheBySymbol=r,this._symbols=n,this.toggleMarkFolders(e),e},_getOpenedFolders:function(e){return ns.Model.get("settings").hasSetting("folders_open")?this._getOpenedFoldersFromSettings():this._getOpenedFoldersFromData(e)},_getOpenedFoldersFromSettings:function(){var e=ns.Model.get("settings").getSetting("folders_open");return e?e.split(","):[]},_getOpenedFoldersFromData:function(e){var o=[];return e.folder.forEach((function(e){[u.WellKnownFolderSymbol.INBOX,u.WellKnownFolderSymbol.DRAFT].includes(e.symbol)&&o.push(e.fid),e.subfolder.length&&Array.prototype.push.apply(o,e.subfolder)})),_.uniq(o)},getOpenedFolders:function(){return this._getOpenedFolders(this.data)},symbols:function(){return this._ids},ids:function(){return this._symbols},hasUserFolders:function(){return this._hasUserFolders},hasNestedFolders:function(){return this._hasNestedFolders},getFolderByName:function(e,o){var t,r=this.getData();if(r){var n;o||(n=this.getFidBySymbol(u.WellKnownFolderSymbol.INBOX)),t=_.find(r.folder,(function(t){return t.name===e&&(o?t.parent_id===o:!t.parent_id||t.parent_id===n)}))}return t},getFolderBySymbol:function(e){return this._cacheBySymbol[e]},getFidBySymbol:function(e){return this._ids[e]},isFolder:function(e,o){if(!e)return!1;Array.isArray(o)||(o=[o]);for(var t=0,r=o.length;t<r;t++){var n=o[t];if(this._ids.hasOwnProperty(n)&&e===this._ids[n])return!0}return!1},isReplyLaterAllowed:function(e){return Boolean(e&&this.hasFolder(e)&&!this.isFolder(e,u.ReplyLaterDisabledFolders))},isCurrentFolder:function(e){return this.isFolder(ns.page.current.params.current_folder,e)},createTemplateFolder:function(){var e,o=Vow.promise(),t=this.getFolderBySymbol(u.WellKnownFolderSymbol.TEMPLATE),r=this.getFidBySymbol(u.WellKnownFolderSymbol.DRAFT),n=this.getSubfolders(r),a=_.find(n,(function(e){return"template"===e.name})),i=_.find(n,(function(e){return e.name===s.template}));return t||a||i?t||!a&&!i?o.fulfill(t):a?o=this.setSymbol(a.fid,u.WellKnownFolderSymbol.TEMPLATE):i&&(e=[{id:"do-folder-rename",params:{fname:"template",fid:i.fid,parent_id:r}},{id:"folders"}],o=ns.forcedRequest(e).then(function(){return this.setSymbol(i.fid,u.WellKnownFolderSymbol.TEMPLATE)}.bind(this))):(e=[{id:"do-folders-add",params:{folder_name:"template",parent_id:r}}],o=ns.forcedRequest(e).then(function(e){var o=e[0];return this.setSymbol(o.getFid(),u.WellKnownFolderSymbol.TEMPLATE)}.bind(this))),o},adjustUnreadCounters:function(e){var o=!1,t=0;for(var r in e){var n=ns.Model.get("folder",{fid:r});n.adjustUnreads(e[r]),-1===u.UnreadHiddenFoldersShort.indexOf(n.get(".symbol"))&&(t+=e[r],o=!0)}return o&&this.adjustAllUnreads(t),o},toggleMarkFolders:function(e){var o={};$.each(jpath(e,".folder[.parent_id && !.subfolders]"),(function(t,r){var n,s=0;do{if(r=n?jpath(e,'.folder[.fid == "'+n+'"]')[0]:r,r.symbol===u.WellKnownFolderSymbol.INBOX)return!0;if(s+=Number(r.new),n in o)return!0;s?(r["has-unread"]=!0,o[r.fid]=1):r["has-unread"]=!1,n=r.parent_id}while(n)}))},hasChildByFid:function(e,o){var t=this.getFolderById(e),r=t&&t.subfolder?t.subfolder:[],n=0!==r.length&&r.indexOf(o)>-1,s=this;return _.forEach(r,(function(e){n=n||s.hasChildByFid(e,o)})),n},adjustAllUnreads:function(e){var o=this.get(".new"),t=Math.max(o+e,0);o!==t&&this.set(".new",t)}},n)})})()},4238:function(e,o){ns.Model.define("messages-filters",{events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},ctor:function(){this._onPageBeforeLoad=this._onPageBeforeLoad.bind(this)},methods:{_onInit:function(){this.setData({}),this._onLoad(ns.page.current.params),ns.events.on("ns-page-before-load",this._onPageBeforeLoad)},_onDestroy:function(){ns.events.off("ns-page-before-load",this._onPageBeforeLoad)},_onPageBeforeLoad:function(e,o){this._onLoad(o[1].params)},_onLoad:function(e){var o,t=ns.Model.get("labels"),r=e.current_label===t.getImportantLID();o=e.important||r?"important":e.attachments?"attachments":e.unread?"unread":"inbox";var n=ns.Model.get("labels").getWaitingForReplyLabel();e.current_label&&e.current_label===n.lid&&(o="wait"),this.setIfChanged(".filter",o)}}},ns.ModelStatic)},4239:function(e,o){ns.Model.define("label",{events:{"ns-model-changed.count":"_onChangedCount"},params:{lid:null},methods:{_onChangedCount:function(){if(this.data&&this.data.hasOwnProperty("unused")){var e=this.get(".count");this.setIfChanged(".unused",!e,{silent:!0})}},getUnreadCount:function(){return this.get(".unreadCount")||0},adjustUnreadCount:function(e){var o=this.getUnreadCount(),t=Math.max(o+e,0);this.setIfChanged(".unreadCount",t)}}})},4240:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(678);t.n(r);!(function(){ns.Model.define("labels",{split:{items:".label",params:{lid:".lid"},model_id:"label"},methods:{_cacheByLid:{},_cacheByName:{},_cacheUserLabelsByName:{},LABEL_PINNED_SYMBOL_NAME:"pinned_label",LABEL_MUTE_SYMBOL_NAME:"mute_label",LABEL_PHISHING_NAME:"73",preprocessData:function(e){return this._cacheByName={},this._cacheUserLabelsByName={},this._cacheByLid={},this.sortLabels(e.label),e.label.forEach((function(e){var o,n=e.name,s=t[n];s?("dating"===s?o=i18n("%Labels_Social_Label_Datingsite"):"groupon"===s?o=i18n("%Labels_Social_Label_Grouponsite"):"yasupport"===s?(o=i18n("%Labels_Social_Label_Yasupport"),e.yaservice=!0):"videoletter"===s?(o=i18n("%Labels_Social_Label_Videoletter"),e.yaservice=!0):"eticket"===s?o=i18n("%Labels_Social_Label_Eticket"):n.indexOf("ya")>-1||"moikrug"===n?(o=i18n("%Labels_Social_Label_Yandex",s),e.yaservice=!0):o=i18n("%Labels_Social_Label",s),e.social=!0,e.title=o):(e.user&&e.name.length>15&&(e.name=e.name.substr(0,15)+"…"),delete e.social),e.symbolicName===r.WellKnownLabels.IMPORTANT&&(e.name=i18n("%Labels_Important")),e.symbolicName===r.WellKnownLabels.REMIND_NO_ANSWER&&(e.name=i18n("%Labels_Жду_ответа"))})),e},sortLabels:function(e){var o=ns.Model.get("settings").getSetting("label_sort");o&&e.sort(n[o])},getSOLabelName:function(o){var t=this.getLabelById(o);return t&&t.name&&0===t.name.indexOf(e)?t.name:null},getImportantLID:function(){var e=this.getLabelBySymbolicName("important_label");return e?e.lid:null},getPriorityLID:function(){var e=this.getLabelBySymbolicName("hamon_label");return e?e.lid:null},getLIDByName:function(e){var o=this.getLabelByName(e);return o?o.lid:null},getLabelById:function(e){return ns.Model.get("label",{lid:e}).getData()},getLabelBySymbolicName:function(e){if(!this._cacheByLid.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".symbolicName")===e}));o&&(this._cacheByLid[e]=o.getData())}return this._cacheByLid[e]},getLabelByName:function(e){if(!this._cacheByName.hasOwnProperty(e)&&!this._cacheUserLabelsByName.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".name")===e}));o&&(this._cacheByName[e]=o.getData())}return this._cacheByName[e]||this._cacheUserLabelsByName[e]},getUserLabelByName:function(e){if(!this._cacheUserLabelsByName.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".user")&&o.get(".name")===e}));o&&(this._cacheUserLabelsByName[e]=o.getData())}return this._cacheUserLabelsByName[e]},adjustCounters:function(e){var o=!1;for(var t in e){var r=this.getLabelById(t);if(r){ns.Model.get("label",{lid:r.lid}).set(".count",r.count+e[t]),o=!0}}return o&&this.touch(),o},getLabelsHash:function(){var e={};return this.models.forEach((function(o){var t=o.getData();t.lid&&(t.user||t.default)&&!t.social&&!("deleted"===t.name&&t.default)&&(e[t.lid]=0)})),e},getUserLabelsCount:function(){var e=0;return this.models.forEach((function(o){o.get(".user")&&e++})),e},isSocial:function(e){var o=this.getLabelById(e);return Boolean(o&&"social"in o)},getWaitingForReplyLabel:function(){return this.getLabelBySymbolicName(r.WellKnownLabels.REMIND_NO_ANSWER)},getDelayedMessageLabel:function(){return this.getLabelByName(o)},getPhishingLabel:function(){return this.getLabelByName(this.LABEL_PHISHING_NAME)},getPinnedLabel:function(){return this.getLabelBySymbolicName(this.LABEL_PINNED_SYMBOL_NAME)},canShowEventWidget:function(e){var o=this;return!e.some((function(e){var t=o.getLabelById(e);return t&&"not_show_widget_event"===t.name}))},getMuteThreadLabel:function(){return this.getLabelBySymbolicName(this.LABEL_MUTE_SYMBOL_NAME)},hasUnusedUserLabels:function(){return this.models.some((function(e){return e.get(".user")&&e.get(".unused")}))},getLidsWithUnreadCounter:function(){return[this.getPriorityLID()].filter(Boolean)},adjustUnreadCounters:function(e){Object.keys(e).forEach((function(o){var t=ns.Model.get("label",{lid:o});t&&t.adjustUnreadCount(e[o])}))}}});var e="SystMetkaSO:",o="delayed_message",t={yaru:"Я.ру",yandexfotki:"Яндекс Фотки",yandexvideo:"Яндекс Видео",yadirect:"Яндекс Директ",yacards:"Яндекс Открытки",yamarket:"Яндекс Маркет",yanarod:"Яндекс Народ",yaauto:"Яндекс Авто",yacal:"Яндекс Календарь",yasupport:"yasupport",yamoney:"Яндекс Деньги",yandexmusic:"Яндекс Музыка",yandexwiki:"Яндекс Вики",yasitesearch:"Яндекс Поиск",yaxml:"Яндекс XML",yawebmaster:"Яндекс Вебмастер",yabetatest:"Яндекс Бета",yadisk:"Яндекс Диск",videoletter:"videoletter",moikrug:"Мой Круг",jira:"jira",yandexcom:"Yandex",yandexru:"Яндекс",yandexcomtr:"Yandex",atushka:"atushka",odnoklassniki:"Odnoklassniki.ru",vtnrf0okru:"Odnoklassniki.ru",liveinternet:"Liveinternet.ru",livejournal:"Livejournal.com",vkontakte:"VK.com",vtnrf0vkcom:"VK.com",facebook:"Facebook.com",friendfeed:"Friendfeed.com",habrahabr:"Habrahabr.ru",mirtesen:"Mirtesen.ru",twitter:"Twitter.com",headhunter:"HeadHunter.ru",ozonru:"Ozon.ru",fotostrana:"Fotostrana.ru",subscribe:"Subscribe.ru",mnogoru:"Mnogo.ru",executive:"E-xecutive.ru",myspace:"Myspase.com",youtube:"Youtube.com",professionali:"Professionali.ru",rutube:"Rutube.ru",pingadmin:"Ping-admin.ru",markafoni:"Markafoni.com",yonja:"Yonja.com",formspring:"Formspring.me",oley:"Oley.com",stumbleupon:"Stumbleupon.com",vedomostiru:"Ведомости","yves-rocherru":"yves-rocher.ru",workua:"Work.ua",wordpresscom:"Wordpress",womanjournalru:"wmj.ru",vshtate:"vshtate.ru",vkrugudruzei:"vkrugudruzei",victoriassecretcom:"Victoria's Secret",topshopru:"TOPSHOP",superjob:"SuperJob.ru",smartresponderru:"smartresponder.ru",skyperu:"skype.com",ottoru:"otto.ru",molotokru:"molotok.ru",mcafeecom:"McAfee.com",linkedin:"Linkedin",lamodaru:"lamoda.ru",geometriaru:"Geometria.ru",futuretodayru:"FutureToday.ru",freelance:"Free-lance.ru",evernoteru:"Evernote.com",dissercatcom:"disserCat.com",bookingcom:"Booking.com",b2bcenterru:"B2B-Center.ru",applecom:"Apple.com","24open":"24open",datingsite:"dating",vtnrf0datingsite:"dating",grouponsite:"groupon","4square":"foursquare.com",allegropl:"allegro.pl",darudarorg:"darudar.org",ebaycom:"ebay.com",forum2x2ru:"forum2x2.ru",gideparkru:"gidepark.ru",joobleru:"jooble.ru",justclickru:"JustClick.ru",kolizeoru:"kolizeo.ru",newsprofipostorg:"profi-post.org",newsquickofficecom:"Quickoffice.com",servicegirlsgogamesru:"GirlsgoGames.ru",tradesu:"trade.su",biznesbombaru:"biznesbomba.ru",gate32ru:"gate-32.ru",specservercom:"specserver.com",butikru:"butik.ru",pcdaysru:"pcdays.ru","7yaru":"7ya.ru",info74ru:"info74.ru",floridecorru:"floridecor.ru",allsoftru:"allsoft.ru",forumhouseru:"forumhouse.ru",shopdeluxeru:"shopdeluxe.ru",loccitaneru:"loccitane.ru",emeacom:"ea.com",yarabota:"Яндекс Работа",yarealty:"Яндекс Недвижимость",vtnrf024open:"24open.ru",vtnrf04square:"Foursquare",vtnrf07yaru:"7я.ру",vtnrf0afyru:"AFY.ru",vtnrf0allegropl:"Аллегро",vtnrf0allsoftru:"Allsoft",vtnrf0applecom:"Apple",vtnrf0aukroua:"Aukro.ua",vtnrf0avitoru:"AVITO.ru",vtnrf0b2bcenterru:"В2В-Center",vtnrf0beonru:"BeOn",vtnrf0bigbuzzyru:"groupon",vtnrf0biznesbombaru:"Biznesbomba",vtnrf0bookingcom:"Booking.com",vtnrf0burningmancom:"BurningMan.com",vtnrf0busuucom:"busuu.com",vtnrf0butikru:"Бутик.ру",vtnrf0chocolifeme:"Chocolife.me",vtnrf0crewardscom:"crewards.com",vtnrf0darudarorg:"Дару-дар",vtnrf0dealextremecom:"DealExtreme",vtnrf0diaryru:"Diary.ru",vtnrf0dissercatcom:"DisserCat.com",vtnrf0drimmicom:"Drimmicom",vtnrf0ebaycom:"Ebay",vtnrf0emeacom:"EA.com",vtnrf0emirates:"Emirates",vtnrf0evernoteru:"Evernote",vtnrf0executive:"Executive",vtnrf0facebook:"Facebook",vtnrf0floridecorru:"Флор&Декор",vtnrf0formspring:"Formspring",vtnrf0forum2x2ru:"2x2",vtnrf0forumhouseru:"Хост.ру",vtnrf0freelance:"Freelance",vtnrf0friendfeed:"Friendfeed",vtnrf0futuretodayru:"Futuretoday",vtnrf0gate32ru:"Gate32",vtnrf0geometriaru:"Geometria",vtnrf0getresponsecom:"Getresponse.com",vtnrf0gideparkru:"Гайдпарк",vtnrf0githubcom:"Github.com",vtnrf0googlegroupscom:"Google groups",vtnrf0googlecom:"Google",vtnrf0grouponsite:"groupon",vtnrf0gurboyru:"groupon",vtnrf0habrahabr:"Хабрахабр",vtnrf0headhunter:"HH.ru",vtnrf0imnicamailcom:"Imnica mail",vtnrf0info74ru:"Инфо74",vtnrf0infobonprixde:"Bonprix",vtnrf0internetprosru:"Интернет опрос",vtnrf0iskusnitsaru:"Искусница",vtnrf0jobsmarketru:"Jobsmarket.ru",vtnrf0joobleru:"Joobler.u",vtnrf0justclickru:"Just Click",vtnrf0kolizeoru:"KOLIZEO.ru",vtnrf0lamodaru:"Lamoda.ru",vtnrf0linkedin:"Linkedin",vtnrf0liveinternet:"LiveInternet",vtnrf0livejournal:"Livejournal",vtnrf0loccitaneru:"L'occitane",vtnrf0mailluxaleru:"Luxale",vtnrf0markafoni:"Markafoni",vtnrf0mcafeecom:"McAfee",vtnrf0mirtesen:"Мир Тесен",vtnrf0mnogoru:"MNOGO.ru",vtnrf0moikrug:"Мой Круг",vtnrf0molotokru:"Молоток.ру",vtnrf0myfantru:"groupon",vtnrf0myspace:"MY SPACE ",vtnrf0notifyastrostarru:"Астростар.ру",vtnrf0oley:"Oley",vtnrf0ottoru:"Oтто.ру",vtnrf0ozonru:"Озон.ру",vtnrf0pathcom:"Path.com",vtnrf0paypalcom:"PayPal.com",vtnrf0pcdaysru:"PC Days",vtnrf0pingadmin:"Ping-Admin.Ru",vtnrf0professionali:"Профессионалы",vtnrf0quelleinforu:"Quelle",vtnrf0quickofficecom:"Quickoffice",vtnrf0radiomarketru:"Радио Маркет",vtnrf0rdwru:"Работа для Вас",vtnrf0regru:"reg.ru",vtnrf0rutube:"Rutube",vtnrf0servicegirlsgogamesru:"GirlsgoGames",vtnrf0skyperu:"Skype.ru",vtnrf0smartresponderru:"SmartResponder",vtnrf0specservercom:"specserver.com",vtnrf0sprashivairu:"Спрашивай.ру",vtnrf0stumbleupon:"Stumbleupon",vtnrf0subscribe:"Subscribe",vtnrf0superjob:"Superjob",vtnrf0teszveszhu:"teszves",vtnrf0topshopru:"Топ-Шоп.ру",vtnrf0tradesu:"TRADE.SU",vtnrf0twitter:"twitter",vtnrf0vabankcom:"vabank.com",vtnrf0vedomostiru:"Ведомости",vtnrf0victoriassecretcom:"Victoria's secret",vtnrf0vkrugudruzei:"В кругу друзей ",vtnrf0vshtate:"В Штате",vtnrf0wmjru:"Womanjournal",vtnrf0wordpresscom:"Wordpress",vtnrf0workua:"Work.ua",vtnrf0yangutucom:"Yangutu",vtnrf0yonja:"Yonja",vtnrf0youtube:"Youtube","vtnrf0yves-rocherru":"Yves Rocher",vtnrf07vetrovmskru:"7 Ветров",vtnrf0anketkaru:"Анкетка.ру",vtnrf0askfm:"Ask.fm",vtnrf0aviasalesru:"Aviasales.ru",vtnrf0babyblogru:"БебиБлог",vtnrf0babyru:"бэби.ру",vtnrf0bio4freecom:"Bio4free.com",vtnrf0chingoraclecom:"Chingoracle.com",vtnrf0dotnewsru:"Dotnews.ru",vtnrf0edarlingru:"Edarling.ru",vtnrf0finance1ru:"Finance1.ru",vtnrf0fxcluborg:"Forex club",vtnrf0gamenetru:"GameNet",vtnrf0horoscopofreecom:"Horoscopofree.com",vtnrf0jobru:"Job.ru",vtnrf0kissesru:"Kisses.ru",vtnrf0liststarotaroru:"ТароТаро",vtnrf0liveexpertru:"Liveexpert.ru",vtnrf0livemasterru:"Livemaster.ru",vtnrf0malinaru:"Малина",vtnrf0mamsyru:"Mamsy.ru",vtnrf0meggymallru:"Meggy Mall",vtnrf0mithostru:"Mitinfo.ru",vtnrf0pokerstarscom:"PokerStars.com",vtnrf0prestigeua:"Prestige",vtnrf0probelovnet:"Пробелов.Нет",vtnrf0promenadru:"Promenad",vtnrf0qualitynetua:"Quality.net",vtnrf0rabotaua:"Rabota.ua",vtnrf0rugionru:"RUgion",vtnrf0sapatoru:"Sapato.ru",vtnrf0slandoru:"Slando.ru",vtnrf0softkeyru:"Softkey.ru",vtnrf0stilagoinfo:"Emailvision",vtnrf0taggedmailcom:"Tagged",vtnrf0theboutiqueru:"Boutique.ru",vtnrf0topfacecom:"Topface",vtnrf0torrnadoru:"torrНадо.ru",vtnrf0transportlineru:"TransportLine",vtnrf0trudcom:"Trud.com",vtnrf0westwingru:"Westwing",vtnrf0wildberriesru:"Wildberries",vtnrf0wmmailru:"Wmmail.ru",vtnrf0worldoftanksru:"World of Tanks",vtnrf0yourclotheseu:"Boutique.ru"},n={by_abc:function(e,o){return e instanceof ns.Model&&(e=e.getData()),o instanceof ns.Model&&(o=o.getData()),e.name.toLowerCase().localeCompare(o.name.toLowerCase())||e.user-o.user},by_count:function(e,o){return e instanceof ns.Model&&(e=e.getData()),o instanceof ns.Model&&(o=o.getData()),e.user||o.user?o.count-e.count||n.by_abc(e,o):-1}}})()},4241:function(e,o){ns.Model.define("labels-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({isVisibleUnused:!1})},toggleVisibleUnused:function(){this.set(".isVisibleUnused",!this.isVisibleUnused())},isVisibleUnused:function(){return this.get(".isVisibleUnused")}}},ns.ModelStatic)},4242:function(e,o){ns.Model.define("scroller-left",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerLeft:scroll",_getScroller:function(){return Daria.is2pane()?$(window):$(".js-scroller-left")},getScrollOffset:function(){return 30}}},"scroller-common")},4243:function(e,o){ns.Model.define("left-column-promos",{},ns.ModelStatic)},4244:function(e,o){ns.Model.define("do-collector-remove",{params:{popid:null,fids:null}})},4245:function(e,o){ns.Model.define("do-collector-check",{params:{popid:null,server:null,port:null,login:null,password:null,use_ssl:null,no_delete_msg:"off",protocol:null,social_task_id:null}})},4246:function(e,o){ns.Model.define("do-collector-on",{params:{popid:null}})},4247:function(e,o){ns.Model.define("do-collector-edit",{params:{popid:null,server:null,login:null,password:null,port:null,use_ssl:null,email:null,no_delete_msg:null,protocol:null,is_oauth:null,social_task_id:null,id:null,filter_name:null,cliker_folder:null,cliker_label:null,move_folder:null,move_label:null}})},4248:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t(693),n=(t.n(r),t(4249));t(4253),t(4254),t(4255),t(4256),t(4257),t(4258),t(4259),t(4260),t(4261),ns.View.define("react-left-column",Object(r.NsReactView)({component:n.a,yateModule:"mail",methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(){}}})),ns.View.define("react-main-buttons",Object(r.NsReactView)({component:n.c,yateModule:"mail"})),ns.View.define("react-left-footer",Object(r.NsReactView)({component:n.b,yateModule:"mail"}))},4249:function(e,o,t){"use strict";var r=t(4250);t.d(o,"a",(function(){return r.a}));var n=t(4251);t.d(o,"c",(function(){return n.a}));var s=t(4252);t.d(o,"b",(function(){return s.a}))},4250:function(e,o,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,o,t){return o&&s(e.prototype,o),t&&s(e,t),e}function i(e,o){return!o||"object"!==r(o)&&"function"!=typeof o?l(e):o}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&d(e,o)}function d(e,o){return(d=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function f(e,o,t,r){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={children:void 0}),1===s)o.children=r;else if(s>1){for(var a=new Array(s),i=0;i<s;i++)a[i]=arguments[i+3];o.children=a}if(o&&n)for(var l in n)void 0===o[l]&&(o[l]=n[l]);else o||(o=n||{});return{$$typeof:m,type:e,key:void 0===t?null:""+t,ref:null,props:o,_owner:null}}t.d(o,"a",(function(){return _}));var m,p=t(137),h=t.n(p),P=t(353),g=t(492),v=(t.n(g),t(363)),y=t(426),b=Object(P.observer)((function(e){var o=e.Component,t=e.themesStore,r=e.themeMaster;return f(o,{isDark:r.isActive?r.isPageDark:t.isPageDark,asideContainer:document.querySelector(".js-scroller-left")})})),_=(function(e){function o(){return n(this,o),i(this,u(o).apply(this,arguments))}return c(o,e),a(o,[{key:"render",value:function(){var e=Object(v.getLeftColumn)();return e?f(b,{Component:e,themesStore:y.ThemesStore.instance(),themeMaster:g.ThemeMaster.instance()}):null}}]),o})(h.a.PureComponent)},4251:function(e,o,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,o,t){return o&&s(e.prototype,o),t&&s(e,t),e}function i(e,o){return!o||"object"!==r(o)&&"function"!=typeof o?l(e):o}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&d(e,o)}function d(e,o){return(d=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function f(e,o,t,r){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={children:void 0}),1===s)o.children=r;else if(s>1){for(var a=new Array(s),i=0;i<s;i++)a[i]=arguments[i+3];o.children=a}if(o&&n)for(var l in n)void 0===o[l]&&(o[l]=n[l]);else o||(o=n||{});return{$$typeof:m,type:e,key:void 0===t?null:""+t,ref:null,props:o,_owner:null}}t.d(o,"a",(function(){return A}));var m,p=t(137),h=t.n(p),P=t(515),g=(t.n(P),t(353)),v=t(492),y=(t.n(v),t(363)),b=t(516),_=(t.n(b),t(426)),M=Object(g.observer)((function(e){var o=e.Component,t=e.themesStore,r=e.themeMaster;return f(o,{isDark:r.isActive?r.isContentDark:t.isContentDark})})),S=Object(y.getMainButtons)()&&Object(P.withPsTransparentTheme)({source:b.DarkSource.Content})(Object(y.getMainButtons)()),A=(function(e){function o(){return n(this,o),i(this,u(o).apply(this,arguments))}return c(o,e),a(o,[{key:"render",value:function(){return S?f(M,{Component:S,themesStore:_.ThemesStore.instance(),themeMaster:v.ThemeMaster.instance()}):null}}]),o})(h.a.PureComponent)},4252:function(e,o,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,o,t){return o&&s(e.prototype,o),t&&s(e,t),e}function i(e,o){return!o||"object"!==r(o)&&"function"!=typeof o?l(e):o}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&d(e,o)}function d(e,o){return(d=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function f(e,o,t,r){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={children:void 0}),1===s)o.children=r;else if(s>1){for(var a=new Array(s),i=0;i<s;i++)a[i]=arguments[i+3];o.children=a}if(o&&n)for(var l in n)void 0===o[l]&&(o[l]=n[l]);else o||(o=n||{});return{$$typeof:m,type:e,key:void 0===t?null:""+t,ref:null,props:o,_owner:null}}t.d(o,"a",(function(){return _}));var m,p=t(137),h=t.n(p),P=t(353),g=t(492),v=(t.n(g),t(363)),y=t(426),b=Object(P.observer)((function(e){var o=e.Component,t=e.themesStore,r=e.themeMaster;return f(o,{isDark:r.isActive?r.isPageDark:t.isPageDark})})),_=(function(e){function o(){return n(this,o),i(this,u(o).apply(this,arguments))}return c(o,e),a(o,[{key:"render",value:function(){var e=Object(v.getLeftFooter)();return e?f(b,{Component:e,themesStore:y.ThemesStore.instance(),themeMaster:g.ThemeMaster.instance()}):null}}]),o})(h.a.PureComponent)},4253:function(e,o){ns.View.define("collector-metrics-mixin",{methods:{sendMetric:function(){for(var e,o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];(e=Jane).c.apply(e,["Left column",Daria.is2pane()?"2pane":"3pane",ns.Model.get("settings").get(".show_folders_tabs")?"Tabs list":"Folders list","Collectors"].concat(t))}}})},4254:function(e,o){ns.View.define("label-metrics-mixin",{methods:{sendMetric:function(){for(var e,o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];(e=Jane).c.apply(e,["Left column",Daria.is2pane()?"2pane":"3pane",ns.Model.get("settings").get(".show_folders_tabs")?"Tabs list":"Folders list","User labels"].concat(t))}}})},4255:function(e,o){ns.View.define("left-col-setup-focus-mixin",{methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.focusAction()}},focusOn:function(){this.$node.find(".js-left-col-setup-focus-target").addClass("is-focused")},focusOff:function(){this.$node.find(".js-left-col-setup-focus-target").removeClass("is-focused")}}})},4256:function(e,o){ns.View.define("mark-all-as-read-dialog-popup",{yateModule:"left",ctor:function(){this._defaultOptions={withoutTail:!0,autofocus:!0,autoclose:!0,how:{my:"left bottom",at:"right-105px top"}}},methods:{open:function(e,o){this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then((function(){this._popup=nb.block(this.node),e=e||{},this._popup.open(Object.assign({},this._defaultOptions,e)),this._popup.on("click .js-apply-mark-read",this.onMarkAllAsReadPopupApply.bind(this,o)),this._popup.on("click .js-cancel-mark-read",this.onMarkAllAsReadPopupCancel.bind(this)),this._popup.$node.find("input[name=js-always-mark-all-read]").prop("checked",!1),this._popup.on("nb-closed",this.destroySelf.bind(this))}),this)},onMarkAllAsReadPopupApply:function(e){e=e||{},this._popup.$node.find("input[name=js-always-mark-all-read]").prop("checked")&&ns.Model.get("settings").setSettingOn("no_popup_mark_read"),e.tabId&&Daria.MOPS.markReadTab(e.tabId),e.fid&&Daria.Folder.markRead(e.fid),this.close()},onMarkAllAsReadPopupCancel:function(){this.close()},close:function(){this._popup&&(this._popup.close(),this._popup.off("click .js-apply-mark-read"),this._popup.off("click .js-cancel-mark-read"),this._popup.off("click .js-always-mark-read"))},destroySelf:function(){var e=this;_.defer((function(){e._popup&&(e._popup.destroy(),e._popup=null),e.destroy()}))}}})},4257:function(e,o){ns.View.define("main-action-buttons",{events:{"ns-view-htmlinit":"startDetectScrollbar","ns-view-htmldestroy":"cancelDetectScrollbar","ns-view-show":"onChanged","toolbar.fixed":"_adjustElementsForStickyComposeButtons","daria:vApp:changeLeftColumWidth@show":"onChanged","Daria:vToolbar:toggleVisibilityWithUnfoldedSearch":"toggleVisibilityStickyComposeButtons","resize window":"onFolderChanged"},yateModule:"left",ctor:function(){this.onFolderChanged=_.throttle(this.onFolderChanged.bind(this),300),this.observer=new MutationObserver(this.onFolderChanged)},methods:{_getComposeButtonsContainer:function(){return this.$node.find(".js-compose-button-container")},_getLayoutAsideBoxNode:function(){return this.$node.closest(".js-layout-left")},_isMainToolbarHidden:function(){return $(".js-toolbar").hasClass("is-hidden")},_addUnfoldedSearchFlag:function(e){ns.Model.get("app-state").updatePageClasses({"with-unfolded-search":e})},toggleFixedLeftColumnToggler:function(){this._isIE()&&Daria.is2pane()&&this._toggleFixedLayoutAsideNodeIE()},_toggleFixedLayoutAsideNodeIE:function(){this._getLayoutAsideBoxNode().parent().toggleClass("is-ie-fixed",this._isMainToolbarFixed())},_isIE:function(){return"MSIE"===Daria.UA.BrowserName||"Edge"===Daria.UA.BrowserName},toggleFixedComposeButtons:function(){Daria.is2pane()&&this.$node.toggleClass("is-fixed",this._isMainToolbarFixed())},toggleVisibilityStickyComposeButtons:function(e,o){(Daria.CompactMode.isCompactHeader()||Daria.is2pane())&&this._addUnfoldedSearchFlag(o||this._isMainToolbarHidden())},isComposeButtonsScrolled:function(){return 0!==this._getScrollerModel().getScroller().scrollTop()},isMessagesListIn3paneScrolled:function(){return 0!==ns.Model.get("scroller-messages").getScroller().scrollTop()},_isMainToolbarFixed:function(){var e=ns.page.current.page;return ns.Model.get("toolbar",{layout:e}).isFixed()},_getScrollerModel:function(){return ns.Model.get("scroller-left")},_adjustElementsForStickyComposeButtons:function(){this.toggleFixedComposeButtons(),this.setOptimalWidthForComposeButtons(),this.toggleFixedLeftColumnToggler(),this.toggleVisibilityStickyComposeButtons()},setOptimalWidthForComposeButtons:function(){if(Daria.is2pane()){var e=this._getLayoutAsideBoxNode(),o=this._getOptimalPadding();this._isMainToolbarFixed()?this._getComposeButtonsContainer().css("width",e.width()-o):this._getComposeButtonsContainer().css("width","auto")}},_getOptimalPadding:function(){var e={standardPaddingRight:20,compactPaddingRight2pane:12};return Daria.resize.isWithCompactLeftColumn?e.compactPaddingRight2pane:e.standardPaddingRight},startDetectScrollbar:function(){var e={attributes:!0,subtree:!0,childList:!0};this._isNeedToDetectScrollbar()&&this.observer.observe(this._getLayoutAsideBoxNode()[0],e)},cancelDetectScrollbar:function(){this.observer.disconnect()},onFolderChanged:function(){if(this._isNeedToDetectScrollbar()){var e=this._getScrollerNode();return this.$node.toggleClass("with-padding",this._hasScrollbar(e)),!1}},_isNeedToDetectScrollbar:function(){var e=this._getScrollerNode();return Boolean(Daria.is3pane()&&e)},_getScrollerNode:function(){return ns.Model.get("scroller-left").getScroller()[0]},_hasScrollbar:function(e){return e.scrollHeight-e.clientHeight>0},onChanged:function(){this._adjustElementsForStickyComposeButtons(),this.onFolderChanged()}}})},4258:function(e,o){ns.View.edefine("skin-saver",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-page-before-load@show":"onPageBeforeLoad","click .js-preview-skin":"togglePreviewMode","daria:vSkinSaver:rotateSkin@show":"forceUpdate"},models:{settings:{"ns-model-changed":"onSettingsChanged","ns-model-changed.color_scheme":"forceUpdate"},"skin-saver-state":{"ns-model-changed":!1,"ns-model-changed.previewMode":"forceUpdate"}},yateModule:"left",methods:{onShow:function(){var e=this.getModel("skin-saver-state");this.togglePageScroll(!e.isPreviewMode()),this.nbCheckbox=nb.$block(".js-save-skin",this.$node),this.nbCheckbox&&this.nbCheckbox.on("nb-changed",this.onCheckboxChange.bind(this))},onHide:function(){this.togglePageScroll(!0),this.nbCheckbox&&this.nbCheckbox.off("nb-changed")},togglePageScroll:function(e){["DOMMouseScroll","mousewheel","scroll"].forEach((function(o){window.removeEventListener(o,this.preventScroll),e||window.addEventListener(o,this.preventScroll)}),this)},preventScroll:function(e){e.stopPropagation(),e.preventDefault();var o=ns.Model.get("skin-saver-state"),t=o.get(".scrollTop");$("body").scrollTop(t)},onCheckboxChange:function(){var e=ns.Model.get("themes").getCurrentTheme();this.isSaved()?e.removeSavedSkin(!0):(e.saveCurrentSkin(),Jane.c(["Выпадушка тем","оставить этот фон"]))},isSaved:function(){return ns.Model.get("themes").getCurrentTheme().currentSkinIsSaved()},togglePreviewMode:function(){var e=this.getModel("skin-saver-state"),o=!e.isPreviewMode();this.togglePageScroll(!o),e.set(".scrollTop",$("body").scrollTop()),e.togglePreviewMode(o),o&&Jane.c(["Выпадушка тем","показать фон"])},onSettingsChanged:function(e,o){o=o||"",/-skin$/.test(o)&&this.forceUpdate()},hasPreview:function(){return ns.Model.get("themes").getCurrentTheme().hasPreview()},getSkinText:function(){return ns.Model.get("themes").getCurrentTheme().getSkinText()},onPageBeforeLoad:function(e,o){if(!_.isEqual(o[0],o[1])){var t=this.getModel("skin-saver-state");t.isPreviewMode()&&(t.togglePreviewMode(!1),window.history.forward())}}}})},4259:function(e,o){function t(e){return s(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var o=0,t=new Array(e.length);o<e.length;o++)t[o]=e[o];return t}}ns.View.edefine("tabs-metrics-mixin",{events:{click:"open"},methods:{sendMetric:function(e){var o;(o=Jane).c.apply(o,["Left column",Daria.is2pane()?"2pane":"3pane",ns.Model.get("settings").get(".show_folders_tabs")?"Tabs list":"Folders list"].concat(t("inbox"===e?["system","inbox"]:[e]),["click"]))}}})},4260:function(e,o){ns.View.edefine("base-tab",{events:{"click@show .js-tab-mark-all-read":"onClickMarkAllRead","click@show .js-tab-info-link":"onClickInfoLink","ns-view-touch":"onViewTouch","ns-page-after-load@show":"onPageAfterLoad"},methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},focusOn:function(){this.$node.find(".mail-Tabs-Item").addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.find(".mail-Tabs-Item").removeClass("mail-FolderList-Item_focus")},open:function(){ns.page.go(ns.router.generateUrl("messages",{tabId:this.params.id})),this.sendMetric(this.params.id)},onClickMarkAllRead:function(e){e.preventDefault(),e.stopPropagation(),nb.trigger("popup-close"),Daria.Dialog.close(),ns.Model.get("settings").isSet("no_popup_mark_read")?Daria.MOPS.markReadTab(this.params.id):this._showMarkAllReadPopup({where:this.$node},{tabId:this.params.id})},onClickInfoLink:function(e){ns.events.trigger("daria:vMessages:recalculate"),e.stopPropagation()},_showMarkAllReadPopup:function(e,o){ns.View.create("mark-all-as-read-dialog-popup").open(e,o)},CLASS_CURRENT:"mail-NestedList-Item_current",CLASS_UPDATED:"mail-NestedList-Item_updated",onViewTouch:function(){var e=this._getTabIdByParams(ns.page.current.params),o=this._getItemNode();if(!e||e!==this.params.id)return void o.removeClass(this.CLASS_CURRENT);o.addClass(this.CLASS_CURRENT).removeClass(this.CLASS_UPDATED);var t=this.getModel("tabs"),r=t.getTab(e);r&&ns.Model.get("reset-unvisited",{tabId:e}).resetUnvisited().then((function(e){e&&"recent"in r.getData().counters&&r.clearRecent()}))},onPageAfterLoad:function(){var e=ns.page.current.params.tabId;e===this.params.id&&e&&ns.Model.get("tabs").getTab(e)&&!Daria.Page.isSamePageTransition()&&Daria.monitoring.journal("open",{target:"tab",tabId:e})},_getItemNode:function(){return this.$node.find(".js-tabs-item")},_getTabIdByParams:function(e){return"message"===ns.page.current.page&&e.ids?ns.Model.get("message",{ids:e.ids}).getTabId():e.tabId}}},"context-menu-mixin-tabs","tabs-metrics-mixin",ns.View)},4261:function(e,o){ns.View.edefine("base-mimic-tab",{events:{"click@show .js-tab-mark-all-read":"onClickMarkAllRead","click@show .js-tab-info-link":"onClickInfoLink","ns-view-show":"onShow","ns-view-hide":"onHide","ns-view-touch":"updateActiveClass","ns-page-after-load@show":"onPageAfterLoad"},methods:{getTabId:function(){throw new Error('"getTabId" is not implemented')},getIsCurrent:function(){throw new Error('"getIsCurrent" is not implemented')},getMarkAllReadPopupParams:function(){throw new Error('"getMarkAllReadPopupParams" is not implemented')},markRead:function(){throw new Error('"markRead" is not implemented')},updateActiveClass:function(){this.$node.find(".js-tabs-item").toggleClass("mail-NestedList-Item_current",this.getIsCurrent())},getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},focusOn:function(){this.$node.find(".mail-Tabs-Item").addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.find(".mail-Tabs-Item").removeClass("mail-FolderList-Item_focus")},onClickMarkAllRead:function(e){e.preventDefault(),e.stopPropagation(),nb.trigger("popup-close"),Daria.Dialog.close(),ns.Model.get("settings").isSet("no_popup_mark_read")?this.markRead():this._showMarkAllReadPopup({where:this.$node},this.getMarkAllReadPopupParams())},_showMarkAllReadPopup:function(e,o){ns.View.create("mark-all-as-read-dialog-popup").open(e,o)},onClickInfoLink:function(e){ns.events.trigger("daria:vMessages:recalculate"),e.stopPropagation()},onPageAfterLoad:function(){if(this.updateActiveClass(),this.getIsCurrent()&&!Daria.Page.isSamePageTransition()){var e=this.getTabId();Daria.monitoring.journal("open",{target:"tab",tabId:e}),this.sendMetric(e)}},__extractId:function(){return this.getTabId()}}},"context-menu-mixin-tabs","tabs-metrics-mixin",ns.View)}});