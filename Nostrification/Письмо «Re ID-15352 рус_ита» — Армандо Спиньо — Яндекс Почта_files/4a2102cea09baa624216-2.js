webpackJsonp([2],{1221:function(t,e,n){function r(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:o(t,e,n)}var o=n(596);t.exports=r},1222:function(t,e,n){function r(t){return i(t)?s(t):o(t)}var o=n(1223),i=n(885),s=n(1224);t.exports=r},1223:function(t,e){function n(t){return t.split("")}t.exports=n},1224:function(t,e){function n(t){return t.match(f)||[]}var r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",u="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",i,s].join("|")+")[\\ufe0e\\ufe0f]?"+a+")*",c="[\\ufe0e\\ufe0f]?"+a+u,l="(?:"+["[^\\ud800-\\udfff]"+r+"?",r,i,s,"[\\ud800-\\udfff]"].join("|")+")",f=RegExp(o+"(?="+o+")|"+l+c,"g");t.exports=n},1225:function(t,e,n){function r(t,e){return o(e,(function(e){return t[e]}))}var o=n(517);t.exports=r},1236:function(t,e,n){function r(t,e,n,R,U,D){var P,L=e&E,N=e&j,I=e&T;if(n&&(P=U?n(t,R,U,D):n(t)),void 0!==P)return P;if(!x(t))return t;var q=m(t);if(q){if(P=y(t),!L)return l(t,P)}else{var F=v(t),B=F==A||F==k;if(w(t))return c(t,L);if(F==O||F==S||B&&!U){if(P=N||B?{}:g(t),!L)return N?p(t,u(P,t)):f(t,a(P,t))}else{if(!C[F])return U?t:{};P=_(t,F,L)}}D||(D=new o);var H=D.get(t);if(H)return H;D.set(t,P),V(t)?t.forEach((function(o){P.add(r(o,e,n,o,t,D))})):b(t)&&t.forEach((function(o,i){P.set(i,r(o,e,n,i,t,D))}));var $=I?N?d:h:N?keysIn:M,K=q?void 0:$(t);return i(K||t,(function(o,i){K&&(i=o,o=t[i]),s(P,i,r(o,e,n,i,t,D))})),P}var o=n(523),i=n(776),s=n(668),a=n(1237),u=n(1238),c=n(889),l=n(562),f=n(1241),p=n(1242),h=n(670),d=n(890),v=n(464),y=n(1243),_=n(1244),g=n(892),m=n(378),w=n(477),b=n(1248),x=n(387),V=n(1250),M=n(419),E=1,j=2,T=4,S="[object Arguments]",A="[object Function]",k="[object GeneratorFunction]",O="[object Object]",C={};C[S]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[O]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[A]=C["[object WeakMap]"]=!1,t.exports=r},1237:function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(462),i=n(419);t.exports=r},1238:function(t,e,n){function r(t,e){return t&&o(e,i(e),t)}var o=n(462),i=n(524);t.exports=r},1239:function(t,e,n){function r(t){if(!o(t))return s(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var o=n(387),i=n(498),s=n(1240),a=Object.prototype,u=a.hasOwnProperty;t.exports=r},1240:function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},1241:function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(462),i=n(525);t.exports=r},1242:function(t,e,n){function r(t,e){return o(t,i(t),e)}var o=n(462),i=n(777);t.exports=r},1243:function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=n},1244:function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case _:return o(t);case c:case l:return new r(+t);case g:return i(t,n);case m:case w:case b:case x:case V:case M:case E:case j:case T:return u(t,n);case f:return new r;case p:case v:return new r(t);case h:return s(t);case d:return new r;case y:return a(t)}}var o=n(615),i=n(1245),s=n(1246),a=n(1247),u=n(891),c="[object Boolean]",l="[object Date]",f="[object Map]",p="[object Number]",h="[object RegExp]",d="[object Set]",v="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",x="[object Int16Array]",V="[object Int32Array]",M="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]";t.exports=r},1245:function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var o=n(615);t.exports=r},1246:function(t,e){function n(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}var r=/\w*$/;t.exports=n},1247:function(t,e,n){function r(t){return s?Object(s.call(t)):{}}var o=n(401),i=o?o.prototype:void 0,s=i?i.valueOf:void 0;t.exports=r},1248:function(t,e,n){var r=n(1249),o=n(521),i=n(522),s=i&&i.isMap,a=s?o(s):r;t.exports=a},1249:function(t,e,n){function r(t){return i(t)&&o(t)==s}var o=n(464),i=n(388),s="[object Map]";t.exports=r},1250:function(t,e,n){var r=n(1251),o=n(521),i=n(522),s=i&&i.isSet,a=s?o(s):r;t.exports=a},1251:function(t,e,n){function r(t){return i(t)&&o(t)==s}var o=n(464),i=n(388),s="[object Set]";t.exports=r},1252:function(t,e,n){function r(t,e){return e.length<2?t:o(t,i(e,0,-1))}var o=n(527),i=n(596);t.exports=r},1253:function(t,e,n){function r(t){if(!s(t)||o(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==p}var o=n(396),i=n(613),s=n(388),a="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,p=l.call(Object);t.exports=r},1254:function(t,e,n){function r(t){return s(i(t,void 0,o),t+"")}var o=n(782),i=n(894),s=n(784);t.exports=r},1255:function(t,e,n){var r=n(1256),o=n(611),i=n(528),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},1256:function(t,e){function n(t){return function(){return t}}t.exports=n},1284:function(t,e,n){function r(t){var e=i(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||o(n,t,e)}}var o=n(1285),i=n(1292),s=n(798);t.exports=r},1285:function(t,e,n){function r(t,e,n,r){var u=n.length,c=u,l=!r;if(null==t)return!c;for(t=Object(t);u--;){var f=n[u];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<c;){f=n[u];var p=f[0],h=t[p],d=f[1];if(l&&f[2]){if(void 0===h&&!(p in t))return!1}else{var v=new o;if(r)var y=r(h,d,p,t,e,v);if(!(void 0===y?i(d,h,s|a,r,v):y))return!1}}return!0}var o=n(523),i=n(683),s=1,a=2;t.exports=r},1286:function(t,e,n){function r(t,e,n,r,y,g){var m=c(t),w=c(e),b=m?d:u(t),x=w?d:u(e);b=b==h?v:b,x=x==h?v:x;var V=b==v,M=x==v,E=b==x;if(E&&l(t)){if(!l(e))return!1;m=!0,V=!1}if(E&&!V)return g||(g=new o),m||f(t)?i(t,e,n,r,y,g):s(t,e,b,n,r,y,g);if(!(n&p)){var j=V&&_.call(t,"__wrapped__"),T=M&&_.call(e,"__wrapped__");if(j||T){var S=j?t.value():t,A=T?e.value():e;return g||(g=new o),y(S,A,n,r,g)}}return!!E&&(g||(g=new o),a(t,e,n,r,y,g))}var o=n(523),i=n(796),s=n(1290),a=n(1291),u=n(464),c=n(378),l=n(477),f=n(520),p=1,h="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;t.exports=r},1287:function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},1288:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},1289:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=n},1290:function(t,e,n){function r(t,e,n,r,o,V,E){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!V(new i(t),new i(e)));case p:case h:case y:return s(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case m:return t==e+"";case v:var j=u;case g:var T=r&l;if(j||(j=c),t.size!=e.size&&!T)return!1;var S=E.get(t);if(S)return S==e;r|=f,E.set(t,e);var A=a(j(t),j(e),r,o,V,E);return E.delete(t),A;case w:if(M)return M.call(t)==M.call(e)}return!1}var o=n(401),i=n(673),s=n(449),a=n(796),u=n(911),c=n(684),l=1,f=2,p="[object Boolean]",h="[object Date]",d="[object Error]",v="[object Map]",y="[object Number]",_="[object RegExp]",g="[object Set]",m="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",V=o?o.prototype:void 0,M=V?V.valueOf:void 0;t.exports=r},1291:function(t,e,n){function r(t,e,n,r,s,u){var c=n&i,l=o(t),f=l.length;if(f!=o(e).length&&!c)return!1;for(var p=f;p--;){var h=l[p];if(!(c?h in e:a.call(e,h)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var v=!0;u.set(t,e),u.set(e,t);for(var y=c;++p<f;){h=l[p];var _=t[h],g=e[h];if(r)var m=c?r(g,_,h,e,t,u):r(_,g,h,t,e,u);if(!(void 0===m?_===g||s(_,g,n,r,u):m)){v=!1;break}y||(y="constructor"==h)}if(v&&!y){var w=t.constructor,b=e.constructor;w!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(v=!1)}return u.delete(t),u.delete(e),v}var o=n(670),i=1,s=Object.prototype,a=s.hasOwnProperty;t.exports=r},1292:function(t,e,n){function r(t){for(var e=i(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,o(s)]}return e}var o=n(797),i=n(419);t.exports=r},1293:function(t,e,n){function r(t,e){return a(t)&&u(e)?c(l(t),e):function(n){var r=i(n,t);return void 0===r&&r===e?s(n,t):o(e,r,f|p)}}var o=n(683),i=n(685),s=n(912),a=n(526),u=n(797),c=n(798),l=n(443),f=1,p=2;t.exports=r},1294:function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},1295:function(t,e,n){function r(t,e,n){e=o(e,t);for(var r=-1,l=e.length,f=!1;++r<l;){var p=c(e[r]);if(!(f=null!=t&&n(t,p)))break;t=t[p]}return f||++r!=l?f:!!(l=null==t?0:t.length)&&u(l)&&a(p,l)&&(s(t)||i(t))}var o=n(465),i=n(461),s=n(378),a=n(478),u=n(497),c=n(443);t.exports=r},1296:function(t,e,n){function r(t){return s(t)?o(a(t)):i(t)}var o=n(1297),i=n(1298),s=n(526),a=n(443);t.exports=r},1297:function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},1298:function(t,e,n){function r(t){return function(e){return o(e,t)}}var o=n(527);t.exports=r},1299:function(t,e,n){function r(t){if(!t)return 0===t?t:0;if((t=o(t))===i||t===-i){return(t<0?-1:1)*s}return t===t?t:0}var o=n(914),i=1/0,s=1.7976931348623157e308;t.exports=r},1327:function(t,e,n){function r(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1}var o=n(928);t.exports=r},1328:function(t,e){function n(t){return t!==t}t.exports=n},1329:function(t,e){function n(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}t.exports=n},1330:function(t,e,n){function r(t,e){return t&&o(t,e,i)}var o=n(929),i=n(419);t.exports=r},1331:function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++o];if(!1===n(i[u],u,i))break}return e}}t.exports=n},1332:function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!o(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&!1!==r(a[s],s,a););return n}}var o=n(415);t.exports=r},1480:function(t,e,n){function r(t,e,n,r){t=i(t)?t:u(t),n=n&&!r?a(n):0;var l=t.length;return n<0&&(n=c(l+n,0)),s(t)?n<=l&&t.indexOf(e,n)>-1:!!l&&o(t,e,n)>-1}var o=n(928),i=n(415),s=n(1481),a=n(686),u=n(763),c=Math.max;t.exports=r},1481:function(t,e,n){function r(t){return"string"==typeof t||!i(t)&&s(t)&&o(t)==a}var o=n(396),i=n(378),s=n(388),a="[object String]";t.exports=r},1482:function(t,e,n){function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}var o=n(674),i=n(1483),s=4294967295;r.prototype=o(i.prototype),r.prototype.constructor=r,t.exports=r},1483:function(t,e){function n(){}t.exports=n},1484:function(t,e){function n(t){return t.placeholder}t.exports=n},2013:function(t,e,n){function r(t){return o(t,i)}var o=n(1236),i=4;t.exports=r},2014:function(t,e,n){function r(t){return"function"==typeof t?t:o}var o=n(528);t.exports=r},2015:function(t,e,n){function r(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||f(t)||s(t)))return!t.length;var e=i(t);if(e==p||e==h)return!t.size;if(l(t))return!o(t).length;for(var n in t)if(v.call(t,n))return!1;return!0}var o=n(664),i=n(464),s=n(461),a=n(378),u=n(415),c=n(477),l=n(498),f=n(520),p="[object Map]",h="[object Set]",d=Object.prototype,v=d.hasOwnProperty;t.exports=r},2016:function(t,e){function n(t){return void 0===t}t.exports=n},2017:function(t,e,n){function r(t,e,n){e=i(e,t),t=a(t,e);var r=null==t?t:t[u(s(e))];return null==r?void 0:o(r,t,n)}var o=n(616),i=n(465),s=n(893),a=n(1252),u=n(443);t.exports=r},2018:function(t,e,n){function r(t){return o((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}var o=n(698),i=n(936);t.exports=r},2019:function(t,e,n){function r(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||o(t,e,n)}var o=n(561),i=n(449);t.exports=r},2020:function(t,e){function n(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},2021:function(t,e,n){var r=n(528),o=n(2022),i=o?function(t,e){return o.set(t,e),t}:r;t.exports=i},2022:function(t,e,n){var r=n(672),o=r&&new r;t.exports=o},2023:function(t,e,n){function r(t,e,n,m,w,b,x,V,M,E){function j(){for(var h=arguments.length,d=Array(h),v=h;v--;)d[v]=arguments[v];if(k)var y=c(j),_=s(d,y);if(m&&(d=o(d,m,w,k)),b&&(d=i(d,b,x,k)),h-=_,k&&h<E){var g=f(d,y);return u(t,e,r,j.placeholder,n,d,g,V,M,E-h)}var R=S?n:this,U=A?R[t]:t;return h=d.length,V?d=l(d,V):O&&h>1&&d.reverse(),T&&M<h&&(d.length=M),this&&this!==p&&this instanceof j&&(U=C||a(U)),U.apply(R,d)}var T=e&_,S=e&h,A=e&d,k=e&(v|y),O=e&g,C=A?void 0:a(t);return j}var o=n(2024),i=n(2025),s=n(6370),a=n(942),u=n(2026),c=n(1484),l=n(6379),f=n(943),p=n(379),h=1,d=2,v=8,y=16,_=128,g=512;t.exports=r},2024:function(t,e){function n(t,e,n,o){for(var i=-1,s=t.length,a=n.length,u=-1,c=e.length,l=r(s-a,0),f=Array(c+l),p=!o;++u<c;)f[u]=e[u];for(;++i<a;)(p||i<s)&&(f[n[i]]=t[i]);for(;l--;)f[u++]=t[i++];return f}var r=Math.max;t.exports=n},2025:function(t,e){function n(t,e,n,o){for(var i=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,f=r(s-u,0),p=Array(f+l),h=!o;++i<f;)p[i]=t[i];for(var d=i;++c<l;)p[d+c]=e[c];for(;++a<u;)(h||i<s)&&(p[d+n[a]]=t[i++]);return p}var r=Math.max;t.exports=n},2026:function(t,e,n){function r(t,e,n,r,h,d,v,y,_,g){var m=e&l,w=m?v:void 0,b=m?void 0:v,x=m?d:void 0,V=m?void 0:d;e|=m?f:p,(e&=~(m?p:f))&c||(e&=~(a|u));var M=[t,e,h,x,w,V,b,y,_,g],E=n.apply(void 0,M);return o(t)&&i(E,M),E.placeholder=r,s(E,t,e)}var o=n(6371),i=n(2029),s=n(2030),a=1,u=2,c=4,l=8,f=32,p=64;t.exports=r},2027:function(t,e,n){var r=n(2022),o=n(468),i=r?function(t){return r.get(t)}:o;t.exports=i},2028:function(t,e,n){function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var o=n(674),i=n(1483);r.prototype=o(i.prototype),r.prototype.constructor=r,t.exports=r},2029:function(t,e,n){var r=n(2021),o=n(895),i=o(r);t.exports=i},2030:function(t,e,n){function r(t,e,n){var r=e+"";return s(t,i(r,a(o(r),n)))}var o=n(6376),i=n(6377),s=n(784),a=n(6378);t.exports=r},226:function(t,e,n){"use strict";Jane.module("noscript.js",(function(){n(6299)}))},357:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},378:function(t,e){var n=Array.isArray;t.exports=n},379:function(t,e,n){var r=n(547),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},387:function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},388:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},392:function(t,e,n){function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(708),i=n(713);t.exports=r},396:function(t,e,n){function r(t){return null==t?void 0===t?u:a:c&&c in Object(t)?i(t):s(t)}var o=n(401),i=n(709),s=n(710),a="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=r},401:function(t,e,n){var r=n(379),o=r.Symbol;t.exports=o},415:function(t,e,n){function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(469),i=n(497);t.exports=r},419:function(t,e,n){function r(t){return s(t)?o(t):i(t)}var o=n(607),i=n(664),s=n(415);t.exports=r},423:function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(r.Cache||o),n}var o=n(486),i="Expected a function";r.Cache=o,t.exports=r},436:function(t,e,n){var r=n(392),o=r(Object,"create");t.exports=o},437:function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(718),i=n(719),s=n(720),a=n(721),u=n(722);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},438:function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}var o=n(449);t.exports=r},439:function(t,e,n){function r(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}var o=n(724);t.exports=r},443:function(t,e,n){function r(t){if("string"==typeof t||o(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}var o=n(454),i=1/0;t.exports=r},449:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},454:function(t,e,n){function r(t){return"symbol"==typeof t||i(t)&&o(t)==s}var o=n(396),i=n(388),s="[object Symbol]";t.exports=r},461:function(t,e,n){var r=n(765),o=n(388),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},462:function(t,e,n){function r(t,e,n,r){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=r?r(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):o(n,c,l)}return n}var o=n(668),i=n(561);t.exports=r},463:function(t,e){function n(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=n},464:function(t,e,n){var r=n(778),o=n(470),i=n(779),s=n(671),a=n(672),u=n(396),c=n(548),l=c(r),f=c(o),p=c(i),h=c(s),d=c(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},465:function(t,e,n){function r(t,e){return o(t)?t:i(t,e)?[t]:s(a(t))}var o=n(378),i=n(526),s=n(780),a=n(495);t.exports=r},468:function(t,e){function n(){}t.exports=n},469:function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==a||e==u||e==s||e==c}var o=n(396),i=n(387),s="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=r},470:function(t,e,n){var r=n(392),o=n(379),i=r(o,"Map");t.exports=i},477:function(t,e,n){(function(t){var r=n(379),o=n(766),i="object"==typeof e&&e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||o;t.exports=l}).call(e,n(357)(t))},478:function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&o.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},486:function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(705),i=n(723),s=n(725),a=n(726),u=n(727);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},495:function(t,e,n){function r(t){return null==t?"":o(t)}var o=n(760);t.exports=r},497:function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},498:function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},517:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}t.exports=n},520:function(t,e,n){var r=n(767),o=n(521),i=n(522),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},521:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},522:function(t,e,n){(function(t){var r=n(547),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o,a=s&&r.process,u=(function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}})();t.exports=u}).call(e,n(357)(t))},523:function(t,e,n){function r(t){var e=this.__data__=new o(t);this.size=e.size}var o=n(437),i=n(771),s=n(772),a=n(773),u=n(774),c=n(775);r.prototype.clear=i,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,t.exports=r},524:function(t,e,n){function r(t){return s(t)?o(t,!0):i(t)}var o=n(607),i=n(1239),s=n(415);t.exports=r},525:function(t,e,n){var r=n(669),o=n(612),i=Object.prototype,s=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return s.call(t,e)})))}:o;t.exports=u},526:function(t,e,n){function r(t,e){if(o(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}var o=n(378),i=n(454),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=r},527:function(t,e,n){function r(t,e){e=o(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[i(e[n++])];return n&&n==r?t:void 0}var o=n(465),i=n(443);t.exports=r},528:function(t,e){function n(t){return t}t.exports=n},547:function(t,e){var n="object"==typeof global&&global&&global.Object===Object&&global;t.exports=n},548:function(t,e){function n(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,o=r.toString;t.exports=n},561:function(t,e,n){function r(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var o=n(611);t.exports=r},562:function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},596:function(t,e){function n(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}t.exports=n},607:function(t,e,n){function r(t,e){var n=s(t),r=!n&&i(t),l=!n&&!r&&a(t),p=!n&&!r&&!l&&c(t),h=n||r||l||p,d=h?o(t.length,String):[],v=d.length;for(var y in t)!e&&!f.call(t,y)||h&&("length"==y||l&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,v))||d.push(y);return d}var o=n(764),i=n(461),s=n(378),a=n(477),u=n(478),c=n(520),l=Object.prototype,f=l.hasOwnProperty;t.exports=r},608:function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},611:function(t,e,n){var r=n(392),o=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}})();t.exports=o},612:function(t,e){function n(){return[]}t.exports=n},613:function(t,e,n){var r=n(608),o=r(Object.getPrototypeOf,Object);t.exports=o},614:function(t,e,n){function r(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}var o=n(463),i=n(378);t.exports=r},615:function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}var o=n(673);t.exports=r},616:function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},619:function(t,e,n){function r(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?i(t[0],t[1]):o(t):u(t)}var o=n(1284),i=n(1293),s=n(528),a=n(378),u=n(1296);t.exports=r},6299:function(t,e,n){"use strict";window.NS_IS_TOUCH=!1,window.yr=n(6300),window.vow=n(6301),window.Vow=n(6302),n(6303),window.no=n(6304),n(6305),n(6306),no.True=no.true,no.False=no.false,window.jpath=function(t,e){return no.jpath.raw(e,t).toArray()},window.ns=n(6307),n(6308),n(6309),n(6310),n(6311),n(6312),n(6313),n(6314),n(6315),n(6316),n(6317),n(6318),n(6319),n(6320),n(6322),n(6323),n(6324),n(6332),n(6333),n(6334),n(6335),n(6336),n(6337),n(6338),n(6339),n(6340),n(6341),n(6342),n(6343),n(6345),n(6348),n(6349),n(6350),n(6385),n(6386),ns.events.on("ns-page-before-load",(function(t,e,n){var r=ns.page.currentUrl;r&&n!==r&&ns.events.trigger("ns-page-before-changed",r,n),Daria.Page.loadingHash=n,Daria.Page.referrer=ns.page.current.page,Daria.Page.referrerUrl=r})),ns.DEBUG=Daria.DEBUG},6300:function(t,e,n){var r={};!(function(){function t(t){return t.replace(/&/g,"&amp;")}function e(t,e){Array.isArray(t)&&(t={item:t}),this.root={data:t,parent:null,name:e||"",doc:this},this._vars={},this._keys={}}r.log=function(){};var n={},o=/&/g,i=/</g,s=/>/g,a=/"/g,u=/&amp;/g,c=/&lt;/g,l=/&gt;/g;r.text2xml=function(t){return null==t?"":(""+t).replace(o,"&amp;").replace(i,"&lt;").replace(s,"&gt;")},r.xml2text=function(t){return null==t?"":(""+t).replace(c,"<").replace(l,">").replace(u,"&")},r.text2attr=function(t){return null==t?"":(""+t).replace(o,"&amp;").replace(a,"&quot;").replace(i,"&lt;").replace(s,"&gt;")},r.xml2attr=function(t){return null==t?"":(""+t).replace(a,"&quot;").replace(i,"&lt;").replace(s,"&gt;")},r.register=function(t,e){if(r.isRegistered(t))throw Error('Module "'+t+'" already exists');for(var o=e.imports||[],i=[e],s=0,a=o.length;s<a;s++){var u=n[o[s]];if(!u)throw Error('Module "'+o[s]+"\" doesn't exist");i=i.concat(u.imports)}e.imports=i,n[t]=e},r.isRegistered=function(t){return!!n[t]},r.run=function(t,r,o,i,s){o=o||"";var a=n[t];if(!a)throw'Module "'+t+'" is undefined';var u=new e(r,s);return i?a.a.apply(a,[a,0,[u.root],o,{a:{}}].concat(i)):a.a(a,0,[u.root],o,{a:{}})},r.join=function(t,e){return t.concat(e)},r.nodeValue=function(t){var e=t.data;return"object"==typeof e?"":e},r.nodeName=function(t){var e=t[0];return e?e.name:""},r.simpleScalar=function(t,e){var n=e.data;if(!n)return"";if("*"===t){for(var o in n)return r.simpleScalar(o,e);return""}var i=n[t];return"object"==typeof i?"":void 0===i?"":i},r.simpleBoolean=function(t,e){var n=e.data;if(!n)return!1;if("*"===t){for(var o in n){var i=r.simpleBoolean(o,e);if(i)return!0}return!1}var i=n[t];return!!i&&(!Array.isArray(i)||i.length)},r.nodeset2scalar=function(t){if(!t.length)return"";var e=t[0].data;return"object"==typeof e?"":e},r.nodeset2boolean=function(t){return!!(t&&t.length>0)&&!!t[0].data},r.nodeset2xml=function(t){return r.scalar2xml(r.nodeset2scalar(t))},r.nodeset2attrvalue=function(t){return r.scalar2attrvalue(r.nodeset2scalar(t))},r.scalar2xml=r.text2xml,r.xml2scalar=r.xml2text,r.xml2attrvalue=r.xml2attr,r.scalar2attrvalue=r.text2attr,r.object2nodeset=function(t){return[new e(t).root]},r.array2nodeset=function(t){return[new e({item:t}).root]},r.cmpSN=function(t,e){for(var n=0,o=e.length;n<o;n++)if(t==r.nodeValue(e[n]))return!0;return!1},r.cmpNN=function(t,e){var n=e.length;if(0===n)return!1;if(1===n)return r.cmpSN(r.nodeValue(e[0]),t);for(var o=[],i=r.nodeValue(e[0]),s=0,a=t.length;s<a;s++){var u=r.nodeValue(t[s]);if(u==i)return!0;o[s]=u}for(var c=1;c<n;c++){i=r.nodeValue(e[c]);for(var s=0,a=t.length;s<a;s++)if(o[s]==i)return!0}return!1},r.shortTags={br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,wbr:!0},r.closeAttrs=function(t){var e=t.s;if(e){var n="",o=t.a;for(var i in o)n+=" "+i+'="'+o[i].quote()+'"';return n+=r.shortTags[e]?"/>":">",t.s=null,n}return""},r.copyAttrs=function(t,e){for(var n in e)t[n]=e[n]},r.scalarAttr=function(t){this.s=null==t?"":""+t},r.scalarAttr.prototype.quote=function(){return r.text2attr(this.s)},r.scalarAttr.prototype.addxml=function(e){return new r.xmlAttr(t(this.s)+e)},r.scalarAttr.prototype.addscalar=function(t){return new r.scalarAttr(this.s+t)},r.xmlAttr=function(t){this.s=null==t?"":""+t},r.xmlAttr.prototype.quote=function(){return r.xml2attr(this.s)},r.xmlAttr.prototype.addscalar=function(e){return new r.xmlAttr(this.s+t(e))},r.slice=function(t,e,n){return t=""+t,n?t.slice(e,n):t.slice(e)},r.exists=function(t){return t.length>0},r.grep=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r,o)&&n.push(i)}return n},r.byIndex=function(t,e){return t.slice(e,e+1)},r.sort=function(t,e,n){for(var r=[],o=0,i=t.length;o<i;o++){var s=t[o],a=e(s,o,i);r.push({node:s,value:a})}for(var u=n?-1:1,c=n?1:-1,l=r.sort((function(t,e){var n=t.value,r=e.value;return n<r?c:n>r?u:0})),f=[],o=0,i=l.length;o<i;o++)f.push(l[o].node);return f},r.nodeset2data=function(t){var e=t.length;if(0===e)return"";if(1===e)return t[0].data;for(var n=[],r=0;r<e;r++)n.push(t[r].data);return n},r.externals={};var f=function(){};f.prototype.a=function(t,e,n,r,o){var i,s="";arguments.length>5&&(i=Array.prototype.slice.call(arguments,5));for(var a=t.imports,u=0,c=n.length;u<c;u++){for(var l,f,p=n[u],h=!1,d=e,v=a.length;!h&&d<v;){l=a[d++];var y=l.matcher[r];if(y){var _=y[p.name]||y["*"];if(_)for(var g=0,m=_.length;!h&&g<m;){var w=_[g++];f=l[w];var b=f.j;if(b)l.matched(b,f.a,p,u,c)&&(h=w);else for(var x=f.s,V=f.a,M=0,E=x.length;M<E;M++)if(l.matched(x[M],V[M],p,u,c)){h=w;break}}}}h&&(s+=i?f.apply(t,[t,p,u,c,o].concat(i)):f(t,p,u,c,o))}return s},f.prototype.matched=function(t,e,n,r,o){if(1===t)return!n.parent;for(var i=t.length,s=i-2;s>=0;){if(!n)return!1;switch(t[s]){case 0:var a=t[s+1];if("*"!==a&&a!==n.name)return!1;n=n.parent;break;case 2:case 4:if(!(0,t[s+1])(this,n,r,o))return!1}s-=2}return!e||!n.parent},f.prototype.s=function(t,e){return this.n(t,[e])},f.prototype.n=function(t,e){for(var n,o=e,i=o.length,s=0,a=t.length;s<a;s+=2){n=[];var u=t[s],c=t[s+1];switch(u){case 0:for(var l=0;l<i;l++)r.selectNametest(c,o[l],n);break;case 1:for(var l=0;l<i;l++){for(var f=0,p=o[l];f<c&&p;)p=p.parent,f++;p&&n.push(p)}break;case 2:for(var l=0;l<i;l++){var p=o[l];c(this,p,l,i)&&n.push(p)}break;case 3:var p=o[c];n=p?[p]:[];break;case 4:if(i>0){var p=o[0];c(this,p.doc.root,0,1)&&(n=n.concat(o))}}if(o=n,!(i=o.length))return[]}return n},r.selectNametest=function(t,e,n){var o=e.data;if(!o||"object"!=typeof o)return n;if("*"===t){if(Array.isArray(o))for(var i=0,s=o.length;i<s;i++)r.selectNametest(i,e,n);else for(t in o)r.selectNametest(t,e,n);return n}if(void 0===(o=o[t]))return n;var a=e.doc;if(Array.isArray(o))for(var i=0,s=o.length;i<s;i++)n.push({data:o[i],parent:e,name:t,doc:a});else n.push({data:o,parent:e,name:t,doc:a});return n},r.document=function(t){var n;return n=new e(t.length?t[0].data:{}),[n.root]},r.subnode=function(t,e,n){var r=n.doc;if(Array.isArray(e)){for(var o=[],i=0,s=e.length;i<s;i++)o.push({data:e[i],name:t,parent:n,doc:r});return o}return[{data:e,name:t,parent:n,doc:r}]},f.prototype.v=function(t,e){var n=e.doc._vars,r=n[t];if(void 0===r){var o=this.findSymbol(t);r="function"==typeof o?o(this,e,0,1):o,n[t]=r}return r},f.prototype.f=function(t,e,n,r,o){var i=this.findSymbol(t);if(arguments.length>5){var s=Array.prototype.slice.call(arguments);return s[0]=this,i.apply(this,s)}return void 0!==o?i(this,e,n,r,o):i(this,e,n,r)},f.prototype.k=function(t,e,n,o){function i(t){var e,n=l[t];if(u.xml){if(e="",n)for(var r=0,o=n.length;r<o;r++){var i=n[r];e+=a.b(f,i.c,i.i,i.l,{})}}else if(e=[],n)for(var r=0,o=n.length;r<o;r++){var i=n[r];e=e.concat(a.b(f,i.c,i.i,i.l))}return c[t]=e,e}var s=n.doc._keys,a=this.findSymbol(t),u=s[t];u||(u=this._initKey(a,t,e,n));var c=u.values,l=u.nodes,f=this;if(o){var p;if(u.xml){p="";for(var h=0,d=e.length;h<d;h++){var n=e[h];p+=i(r.nodeValue(n))}}else{p=[];for(var h=0,d=e.length;h<d;h++){var n=e[h];p=p.concat(i(r.nodeValue(n)))}}return p}var v=c[e];return void 0===v&&(v=i(e)),v},f.prototype._initKey=function(t,e,n,o){function i(t,e){var n=c[t];n||(n=c[t]=[]),n.push(e)}var s=o.doc._keys,a=s[e]={};a.xml="xml"===t.bt;var u=t.n(this,o),c=a.nodes={};if("nodeset"===t.ut)for(var l=0,f=u.length;l<f;l++)for(var p=u[l],h=t.u(this,p,l,f),d=0,v=h.length;d<v;d++)i(r.nodeValue(h[d]),{c:p,i:l,l:f});else for(var l=0,f=u.length;l<f;l++){var p=u[l],h=t.u(this,p,l,f);i(h,{c:p,i:l,l:f})}return a.values={},a},f.prototype.findSymbol=function(t){for(var e=this.imports,n=0,r=e.length;n<r;n++){var o=e[n],i=o[t];if(void 0!==i)return i}},r.Module=f})(),t.exports=r},6301:function(t,e,n){var r;(function(){!(function(o){var i=(function(){var t=[],e=function(e){return t.push(e),1===t.length},n=function(){var e=t,n=0,r=t.length;for(t=[];n<r;)e[n++]()};if("function"==typeof setImmediate)return function(t){e(t)&&setImmediate(n)};if("object"==typeof process&&process.nextTick)return function(t){e(t)&&process.nextTick(n)};var r=o.MutationObserver||o.WebKitMutationObserver;if(r){var i=1,s=document.createTextNode("");return new r(n).observe(s,{characterData:!0}),function(t){e(t)&&(s.data=i*=-1)}}if(o.postMessage){var a=!0;if(o.attachEvent){var u=function(){a=!1};o.attachEvent("onmessage",u),o.postMessage("__checkAsync","*"),o.detachEvent("onmessage",u)}if(a){var c="__promise"+Math.random()+"_"+new Date,l=function(t){t.data===c&&(t.stopPropagation&&t.stopPropagation(),n())};return o.addEventListener?o.addEventListener("message",l,!0):o.attachEvent("onmessage",l),function(t){e(t)&&o.postMessage(c,"*")}}}var f=o.document;if("onreadystatechange"in f.createElement("script")){var p=function(){var t=f.createElement("script");t.onreadystatechange=function(){t.parentNode.removeChild(t),t=t.onreadystatechange=null,n()},(f.documentElement||f.body).appendChild(t)};return function(t){e(t)&&p()}}return function(t){e(t)&&setTimeout(n,0)}})(),s=function(t){i((function(){throw t}))},a=function(t){return"function"==typeof t},u=function(t){return null!==t&&"object"==typeof t},c=Object.prototype.toString,l=Array.isArray||function(t){return"[object Array]"===c.call(t)},f=function(t){for(var e=[],n=0,r=t.length;n<r;)e.push(n++);return e},p=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},h=function(t,e){return function(n){t.call(this,n,e)}},d=o.PromiseRejectionEvent?function(t,e){new o.PromiseRejectionEvent("unhandledrejection",{promise:e,reason:t})}:"object"==typeof process&&process.emit?function(t,e){process.emit("unhandledRejection",t,e)}:function(){},v=function(){this._promise=new _};v.prototype={promise:function(){return this._promise},resolve:function(t){this._promise.isResolved()||this._promise._resolve(t)},reject:function(t){this._promise.isResolved()||(w.isPromise(t)?(t=t.then((function(t){var e=w.defer();return e.reject(t),e.promise()})),this._promise._resolve(t)):this._promise._reject(t))},notify:function(t){this._promise.isResolved()||this._promise._notify(t)}};var y={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},_=function(t){if(this._value=void 0,this._status=y.PENDING,this._shouldEmitUnhandledRejection=!0,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],t){var e=this,n=t.length;try{t((function(t){e.isResolved()||e._resolve(t)}),n>1?function(t){e.isResolved()||e._reject(t)}:void 0,n>2?function(t){e.isResolved()||e._notify(t)}:void 0)}catch(t){this._reject(t)}}};_.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==y.PENDING},isFulfilled:function(){return this._status===y.FULFILLED},isRejected:function(){return this._status===y.REJECTED},then:function(t,e,n,r){this._shouldEmitUnhandledRejection=!1;var o=new v;return this._addCallbacks(o,t,e,n,r),o.promise()},catch:function(t,e){return this.then(void 0,t,e)},fail:function(t,e){return this.then(void 0,t,e)},always:function(t,e){var n=this,r=function(){return t.call(this,n)};return this.then(r,r,e)},progress:function(t,e){return this.then(void 0,void 0,t,e)},spread:function(t,e,n){return this.then((function(e){return t.apply(this,e)}),e,n)},done:function(t,e,n,r){this.then(t,e,n,r).fail(s)},delay:function(t){var e,n=this.then((function(n){var r=new v;return e=setTimeout((function(){r.resolve(n)}),t),r.promise()}));return n.always((function(){clearTimeout(e)})),n},timeout:function(t){var e=new v,n=setTimeout((function(){e.reject(new w.TimedOutError("timed out"))}),t);return this.then((function(t){e.resolve(t)}),(function(t){e.reject(t)})),e.promise().always((function(){clearTimeout(n)})),e.promise()},_vow:!0,_resolve:function(t){if(!(this._status>y.RESOLVED)){if(t===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=y.RESOLVED,t&&t._vow)return void(t.isFulfilled()?this._fulfill(t.valueOf()):t.isRejected()?(t._shouldEmitUnhandledRejection=!1,this._reject(t.valueOf())):t.then(this._fulfill,this._reject,this._notify,this));if(u(t)||a(t)){var e;try{e=t.then}catch(t){return void this._reject(t)}if(a(e)){var n=this,r=!1;try{e.call(t,(function(t){r||(r=!0,n._resolve(t))}),(function(t){r||(r=!0,n._reject(t))}),(function(t){n._notify(t)}))}catch(t){r||this._reject(t)}return}}this._fulfill(t)}},_fulfill:function(t){this._status>y.RESOLVED||(this._status=y.FULFILLED,this._value=t,this._callCallbacks(this._fulfilledCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},_reject:function(t){if(!(this._status>y.RESOLVED)){if(this._status=y.REJECTED,this._value=t,this._callCallbacks(this._rejectedCallbacks,t),!this._rejectedCallbacks.length){var e=this;i((function(){e._shouldEmitUnhandledRejection&&d(t,e)}))}this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0}},_notify:function(t){this._callCallbacks(this._progressCallbacks,t)},_addCallbacks:function(t,e,n,r,o){n&&!a(n)?(o=n,n=void 0):r&&!a(r)&&(o=r,r=void 0),n&&(this._shouldEmitUnhandledRejection=!1);var i;this.isRejected()||(i={defer:t,fn:a(e)?e:void 0,ctx:o},this.isFulfilled()?this._callCallbacks([i],this._value):this._fulfilledCallbacks.push(i)),this.isFulfilled()||(i={defer:t,fn:n,ctx:o},this.isRejected()?this._callCallbacks([i],this._value):this._rejectedCallbacks.push(i)),this._status<=y.RESOLVED&&this._progressCallbacks.push({defer:t,fn:r,ctx:o})},_callCallbacks:function(t,e){var n=t.length;if(n){var r=(this.isResolved(),this.isFulfilled()),o=this.isRejected();i((function(){for(var i,s,a,u=0;u<n;)if(i=t[u++],s=i.defer,a=i.fn){var c,l=i.ctx;try{c=l?a.call(l,e):a(e)}catch(t){s.reject(t);continue}r||o?s.resolve(c):s.notify(c)}else r?s.resolve(e):o?s.reject(e):s.notify(e)}))}}};var g={cast:function(t){return w.cast(t)},all:function(t){return w.all(t)},race:function(t){return w.anyResolved(t)},resolve:function(t){return w.resolve(t)},reject:function(t){return w.reject(t)}};for(var m in g)g.hasOwnProperty(m)&&(_[m]=g[m]);var w={Deferred:v,Promise:_,defer:function(){return new v},when:function(t,e,n,r,o){return w.cast(t).then(e,n,r,o)},fail:function(t,e,n){return w.when(t,void 0,e,n)},always:function(t,e,n){return w.when(t).always(e,n)},progress:function(t,e,n){return w.when(t).progress(e,n)},spread:function(t,e,n,r){return w.when(t).spread(e,n,r)},done:function(t,e,n,r,o){w.when(t).done(e,n,r,o)},isPromise:function(t){return u(t)&&a(t.then)},cast:function(t){return t&&t._vow?t:w.resolve(t)},valueOf:function(t){return t&&a(t.valueOf)?t.valueOf():t},isFulfilled:function(t){return!t||!a(t.isFulfilled)||t.isFulfilled()},isRejected:function(t){return!(!t||!a(t.isRejected))&&t.isRejected()},isResolved:function(t){return!t||!a(t.isResolved)||t.isResolved()},resolve:function(t){var e=w.defer();return e.resolve(t),e.promise()},fulfill:function(t){var e=w.defer(),n=e.promise();return e.resolve(t),n.isFulfilled()?n:n.then(null,(function(t){return t}))},reject:function(t){var e=w.defer();return e.reject(t),e.promise()},invoke:function(t,e){var n,r=Math.max(arguments.length-1,0);if(r){n=Array(r);for(var i=0;i<r;)n[i++]=arguments[i]}try{return w.resolve(n?t.apply(o,n):t.call(o))}catch(t){return w.reject(t)}},all:function(t){var e=new v,n=l(t),r=n?f(t):p(t),o=r.length,i=n?[]:{};if(!o)return e.resolve(i),e.promise();var s=o;return w._forEach(t,(function(t,n){i[r[n]]=t,--s||e.resolve(i)}),e.reject,e.notify,e,r),e.promise()},allResolved:function(t){var e=new v,n=l(t),r=n?f(t):p(t),o=r.length,i=n?[]:{};if(!o)return e.resolve(i),e.promise();var s=function(){--o||e.resolve(t)};return w._forEach(t,s,s,e.notify,e,r),e.promise()},allPatiently:function(t){return w.allResolved(t).then((function(){var e,n,r,o,i=l(t),s=i?f(t):p(t),a=s.length,u=0;if(!a)return i?[]:{};for(;u<a;)r=s[u++],o=t[r],w.isRejected(o)?(e||(e=i?[]:{}),i?e.push(o.valueOf()):e[r]=o.valueOf()):e||((n||(n=i?[]:{}))[r]=w.valueOf(o));if(e)throw e;return n}))},any:function(t){var e=new v,n=t.length;if(!n)return e.reject(Error()),e.promise();var r,o=0;return w._forEach(t,e.resolve,(function(t){o||(r=t),++o===n&&e.reject(r)}),e.notify,e),e.promise()},anyResolved:function(t){var e=new v;return t.length?(w._forEach(t,e.resolve,e.reject,e.notify,e),e.promise()):(e.reject(Error()),e.promise())},delay:function(t,e){return w.resolve(t).delay(e)},timeout:function(t,e){return w.resolve(t).timeout(e)},_forEach:function(t,e,n,r,o,i){for(var s=i?i.length:t.length,a=0;a<s;)w.when(t[i?i[a]:a],h(e,a),n,r,o),++a},TimedOutError:(function(t){var e=function(e){this.name=t,this.message=e};return e.prototype=new Error,e})("TimedOut")},b=!0;"object"==typeof t&&"object"==typeof t.exports&&(t.exports=w,b=!1),"object"==typeof modules&&a(modules.define)&&(modules.define("vow",(function(t){t(w)})),b=!1),void 0!==(r=function(t,e,n){n.exports=w}.call(e,n,e,t))&&(t.exports=r),b=!1,b&&(o.vow=w)})("undefined"!=typeof window?window:global)}).call(window)},6302:function(t,e,n){var r;(function(){!(function(o){var i=function(t){this._res=t,this._isFulfilled=!!arguments.length,this._isRejected=!1,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[]};i.prototype={valueOf:function(){return this._res},isFulfilled:function(){return this._isFulfilled},isRejected:function(){return this._isRejected},isResolved:function(){return this._isFulfilled||this._isRejected},fulfill:function(t){this.isResolved()||(this._isFulfilled=!0,this._res=t,this._callCallbacks(this._fulfilledCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=s)},reject:function(t){this.isResolved()||(this._isRejected=!0,this._res=t,this._callCallbacks(this._rejectedCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=s)},notify:function(t){this.isResolved()||this._callCallbacks(this._progressCallbacks,t)},then:function(t,e,n,r){e&&!l(e)?(r=e,e=s):n&&!l(n)&&(r=n,n=s);var o,a=new i;return this._isRejected||(o={promise:a,fn:l(t)?t:s,ctx:r},this._isFulfilled?this._callCallbacks([o],this._res):this._fulfilledCallbacks.push(o)),this._isFulfilled||(o={promise:a,fn:e,ctx:r},this._isRejected?this._callCallbacks([o],this._res):this._rejectedCallbacks.push(o)),this.isResolved()||this._progressCallbacks.push({promise:a,fn:n,ctx:r}),a},fail:function(t,e){return this.then(s,t,e)},always:function(t,e){var n=this,r=function(){return t.call(this,n)};return this.then(r,r,e)},progress:function(t,e){return this.then(s,s,t,e)},spread:function(t,e,n){return this.then((function(e){return t.apply(this,e)}),e,n)},done:function(t,e,n,r){this.then(t,e,n,r).fail(c)},delay:function(t){var e,n=this.then((function(n){var r=new i;return e=setTimeout((function(){r.fulfill(n)}),t),r}));return n.always((function(){clearTimeout(e)})),n},timeout:function(t){var e=new i,n=setTimeout((function(){e.reject(Error("timed out"))}),t);return e.sync(this),e.always((function(){clearTimeout(n)})),e},sync:function(t){t.then(this.fulfill,this.reject,this.notify,this)},_callCallbacks:function(t,e){var n=t.length;if(n){var r=this.isResolved(),o=this.isFulfilled();u((function(){for(var i,s,u,c=0;c<n;)if(i=t[c++],s=i.promise,u=i.fn){var l,f=i.ctx;try{l=f?u.call(f,e):u(e)}catch(t){s.reject(t);continue}r?a.isPromise(l)?(function(t){l.then((function(e){t.fulfill(e)}),(function(e){t.reject(e)}),(function(e){t.notify(e)}))})(s):s.fulfill(l):s.notify(l)}else r?o?s.fulfill(e):s.reject(e):s.notify(e)}))}}};var s,a={Promise:i,promise:function(t){return arguments.length?a.isPromise(t)?t:new i(t):new i},when:function(t,e,n,r,o){return a.promise(t).then(e,n,r,o)},fail:function(t,e,n){return a.when(t,s,e,n)},always:function(t,e,n){return a.promise(t).always(e,n)},progress:function(t,e,n){return a.promise(t).progress(e,n)},spread:function(t,e,n,r){return a.promise(t).spread(e,n,r)},done:function(t,e,n,r,o){a.promise(t).done(e,n,r,o)},isPromise:function(t){return t&&l(t.then)},valueOf:function(t){return a.isPromise(t)?t.valueOf():t},isFulfilled:function(t){return!a.isPromise(t)||t.isFulfilled()},isRejected:function(t){return!!a.isPromise(t)&&t.isRejected()},isResolved:function(t){return!a.isPromise(t)||t.isResolved()},fulfill:function(t){return a.when(t,s,(function(t){return t}))},reject:function(t){return a.when(t,(function(t){var e=new i;return e.reject(t),e}))},resolve:function(t){return a.isPromise(t)?t:a.when(t)},invoke:function(t){try{return a.promise(t.apply(o,f.call(arguments,1)))}catch(t){return a.reject(t)}},forEach:function(t,e,n,r){for(var o=r?r.length:t.length,i=0;i<o;)a.when(t[r?r[i]:i],e,n),++i},all:function(t){var e=new i,n=h(t),r=n?d(t):v(t),o=r.length,s=n?[]:{};if(!o)return e.fulfill(s),e;var u=o,c=function(){if(!--u){for(var n=0;n<o;)s[r[n]]=a.valueOf(t[r[n++]]);e.fulfill(s)}},l=function(t){e.reject(t)};return a.forEach(t,c,l,r),e},allResolved:function(t){var e=new i,n=h(t),r=n?d(t):v(t),o=r.length,s=n?[]:{};if(!o)return e.fulfill(s),e;var u=function(){--o||e.fulfill(t)};return a.forEach(t,u,u,r),e},allPatiently:function(t){return a.allResolved(t).then((function(){var e,n,r,o,i=h(t),s=i?d(t):v(t),u=s.length,c=0;if(!u)return i?[]:{};for(;c<u;)r=s[c++],o=t[r],a.isRejected(o)?(e||(e=i?[]:{}),i?e.push(o.valueOf()):e[r]=o.valueOf()):e||((n||(n=i?[]:{}))[r]=a.valueOf(o));if(e)throw e;return n}))},any:function(t){var e=new i,n=t.length;if(!n)return e.reject(Error()),e;var r,o=0,s=function(t){e.fulfill(t)},u=function(t){o||(r=t),++o===n&&e.reject(r)};return a.forEach(t,s,u),e},delay:function(t,e){return a.promise(t).delay(e)},timeout:function(t,e){return a.promise(t).timeout(e)}},u=(function(){var t=[],e=function(e){return 1===t.push(e)},n=function(){var e=t,n=0,r=t.length;for(t=[];n<r;)e[n++]()};if("function"==typeof setImmediate)return function(t){e(t)&&setImmediate(n)};if("object"==typeof process&&process.nextTick)return function(t){e(t)&&process.nextTick(n)};if(o.postMessage){var r=!0;if(o.attachEvent){var i=function(){r=!1};o.attachEvent("onmessage",i),o.postMessage("__checkAsync","*"),o.detachEvent("onmessage",i)}if(r){var s="__promise"+ +new Date,a=function(t){t.data===s&&(t.stopPropagation&&t.stopPropagation(),n())};return o.addEventListener?o.addEventListener("message",a,!0):o.attachEvent("onmessage",a),function(t){e(t)&&o.postMessage(s,"*")}}}var u=o.document;if("onreadystatechange"in u.createElement("script")){var c=function(){var t=u.createElement("script");t.onreadystatechange=function(){t.parentNode.removeChild(t),t=t.onreadystatechange=null,n()},(u.documentElement||u.body).appendChild(t)};return function(t){e(t)&&c()}}return function(t){e(t)&&setTimeout(n,0)}})(),c=function(t){u((function(){throw t}))},l=function(t){return"function"==typeof t},f=Array.prototype.slice,p=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===p.call(t)},d=function(t){for(var e=[],n=0,r=t.length;n<r;)e.push(n++);return e},v=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},y=!0;t.exports=a,y=!1,"object"==typeof modules&&(modules.define("vow",(function(t){t(a)})),y=!1),void 0!==(r=function(t,e,n){n.exports=a}.call(e,n,e,t))&&(t.exports=r),y=!1,y&&(o.Vow=a)})(this)}).call(window)},6303:function(t,e){Vow.Promise.prototype.__reject=Vow.Promise.prototype.reject,Vow.Promise.prototype.reject=function(t){t instanceof Error&&ns.log.exception("promise.exception",t),this.__reject(t)}},6304:function(t,e){var n={};n.inherit=function(t,e,r){var o=function(){};o.prototype=e.prototype;var i=t.prototype=new o;if(r)if(Array.isArray(r))for(var s=0,a=r.length;s<a;s++)n.extend(i,r[s]);else n.extend(i,r);return i.super_=e.prototype,i.constructor=t,t},n.extend=function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];for(var o in r)t[o]=r[o]}return t},n.nop=function(){},n.true=function(){return!0},n.false=function(){return!1},n.value=function(t){return function(){return t}},n.logger=function(t){return t?function(){var e=[].slice.call(arguments);console.log.apply(null,[t].concat(e))}:console.log},n.next=function(t){setTimeout(t,0)},t.exports=n},6305:function(t,e){no.Parser=function(t,e){this._rules=t,this._tokens=e||{}},no.Parser.prototype.start=function(t,e){this.input=t,this.p=0,this.s=t;var n=this.parse(e);return this.s&&this.error("End of string expected"),n},no.Parser.prototype.parse=function(t,e){var n=this._rules[t],r=this.p,o=n.call(this,e);return o._start=r,o._end=this.p,o._input=this.input,o},no.Parser.prototype.test=function(t){var e=this._tokens[t];if(e){var n=e.exec(this.s);return n&&n[0]}if(this.la(t.length)===t)return t},no.Parser.prototype.match=function(t){var e=this.test(t);return e||this.error("Token "+t+" expected"),this.move(e.length),e},no.Parser.prototype.la=function(t){return this.s.substr(0,t||1)},no.Parser.prototype.move=function(t){t||(t=1),this.s=this.s.substr(t),this.p+=t},no.Parser.prototype.skip=function(){var t=/^\s+/.exec(this.s);t&&this.move(t[0].length)},no.Parser.prototype.error=function(t){throw Error(t+" at "+this.p+": "+this.s)}},6306:function(t,e){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!(function(){function t(t){this.data=t}function e(e,n){if(n instanceof t)return r(n,e.scalar());for(var o=n.nodes,i=e.scalar(),s=0;s<o.length;s++)if(i==o[s].scalar())return!0;return!1}function r(e,n){var r=e.data;if(Array.isArray(r)){for(var o=0;o<r.length;o++)if(new t(r[o]).scalar()==n)return!0;return!1}return e.scalar()==n}function o(){this.nodes=[]}function i(t,e){var n=t+"::"+e,r=b[n];return r||(r=b[n]=u(w.start(t,e))),r}function s(t){var e={};for(var n in t)e[n]=no.jpath.expr(t[n]);return function(t,n,r){var o={};for(var i in e)o[i]=no.jpath.toScalar(e[i](t,n,r));return o}}function a(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(no.jpath.expr(t[r]));return function(t,r,o){for(var i=[],s=0;s<n;s++)i.push(no.jpath.toScalar(e[s](t,r,o)));return i}}function u(t){for(var e=[],n="jpath"===t._id?l(t,e):c(t,e),r="",o=0;o<=n;o++)r+="function t"+o+"(node, root, vars, funcs) {\n"+e[o]+"\n}\n\n";return r+="return function(data, vars, funcs) {\nvar node = new no.JNode(data);\nreturn t"+n+"(node, node, vars, funcs);\n}\n",Function("no",r)(no)}function c(t,e){var n="return ("+f(t,e)+");";return e.push(n)-1}function l(t,e){var n="";t.abs&&(n+="node = root;\n");for(var r=t.steps,o=0,i=r.length;o<i;o++){var s=r[o],a=s._id;switch(a){case"nametest":n+='node = node.nametest("'+s.nametest+'");\n';break;case"star":n+="node = node.startest();\n";break;case"pred":case"index":s.expr._as="pred"===a?v:h;n+="node = node."+a+"(t"+c(s.expr,e)+", root, vars, funcs);\n";break;case"guard":n+="if (!("+f(s.expr,e)+")) { return node.empty; }\n"}"guard"!==a&&(n+="if (node.isEmpty()) { return node.empty; }\n")}return n+="return node;",e.push(n)-1}function f(t,e){var n;switch(t._id){case"root":n="root";break;case"self":n="node";break;case"number":n=t.value;break;case"string_literal":n=JSON.stringify(t.value);break;case"string":n="("+t.value.map((function(t){return t._as=h,f(t,e)})).join(" + ")+")";break;case"var":n='(new no.JNode(vars["'+t.name+'"]))';break;case"func":n='funcs["'+t.name+'"](';for(var r=0,o=t.args.length;r<o;r++){var i=t.args[r];i._as=h,n+=r?",":"",n+=f(i,e)}n+=")";break;case"unop":t.expr._as="!"===t.op?v:h,n=t.op+"("+f(t.expr,e)+")";break;case"binop":var s,o=t.left,a=t.right,u=o._type,c=a._type,p=t.op;switch(p){case"&&":case"||":s=u===v&&c===v?v:h;break;case"==":case"!=":u===c||u!==v&&c!==v||(s=v);break;default:s=h}s&&(o._as=a._as=s);var y=f(o,e),_=f(a,e);if("=="===p||"!="===p){if(u===d||c===d){if(u===h){var g=_;_=y,y=g}n="("+y+").cmp"+(u===c?"N":"S")+"("+_+")"}n&&"!="===p&&(n="!("+n+")")}void 0===n&&(n="("+y+" "+t.op+" "+_+")");break;case"subexpr":n="("+f(t.expr,e)+")";break;case"jpath":var m=l(t,e);n="t"+m+"(node, root, vars, funcs)";break;case"filter":var m=l(t.jpath,e);n="t"+m+'(new no.JNode(vars["'+t.name+'"]), root, vars, funcs)'}return t._as&&t._as!==t._type&&(t._type===d?n="("+n+")."+t._as+"()":t._type===h&&(n="!!("+n+")")),n}function p(t){for(var e=t.split("."),n=1,r=e.length-1,o="var r = data; var t;";n<r;n++)o+='t = r["'+e[n]+'"];',o+='if (t == null) { t = r["'+e[n]+'"] = {}; }',o+="r = t;";return o+='r["'+e[n]+'"] = value;',o+="return data;",new Function("data","value",o)}t.prototype.empty=new o,t.prototype.isEmpty=function(){return!1},t.prototype.nametest=function(e,n){var r=this.data;if(!r)return this.empty;if(Array.isArray(r)){n||(n=new o);for(var i=0;i<r.length;i++)new t(r[i]).nametest(e,n);return n}var s=r[e];if(void 0===s)return this.empty;var a=new t(s);return n?n.push(a):a},t.prototype.startest=function(e){e||(e=new o);var n=this.data;if(Array.isArray(n))for(var r=0;r<n.length;r++)new t(n[r]).startest(e);else for(var i in n)this.nametest(i,e);return e},t.prototype.pred=function(e,n,r,i){var s=this.data;if(Array.isArray(s)){for(var a=new o,u=0;u<s.length;u++){var c=new t(s[u]);e(c,n,r,i)&&a.push(c)}return a}return e(this,n,r,i)?this:this.empty},t.prototype.index=function(e,n,r,o){var i=this.data;if(Array.isArray(i)){var s=i[e(this,n,r,o)];return void 0!==s?new t(s).toNodeset():this.empty}return 0===e?this:this.empty},t.prototype.toArray=function(){return[this.data]},t.prototype.toNodeset=function(){return(new o).push(this)},t.prototype.scalar=function(){var t=this.data;return"object"===n(t)?"":t},t.prototype.boolean=function(){var t=this.data;return Array.isArray(t)?t.length>0:Boolean(t)},t.prototype.cmpN=function(n){var r=this.data;if(Array.isArray(r)){for(var o=0;o<r.length;o++)if(e(new t(r[o]),n))return!0;return!1}return e(this,n)},t.prototype.cmpS=function(t){return r(this,t)},o.prototype.empty=t.prototype.empty,o.prototype.isEmpty=function(){return!this.nodes.length},o.prototype.push=function(t){return this.nodes.push(t),this},o.prototype.nametest=function(t,e){var n=this.nodes;e||(e=new o);for(var r=0;r<n.length;r++)n[r].nametest(t,e);return e},o.prototype.startest=function(t){var e=this.nodes;t||(t=new o);for(var n=0;n<e.length;n++)e[n].startest(t);return t},o.prototype.pred=function(t,e,n,r){for(var i=this.nodes,s=new o,a=0;a<i.length;a++){var u=i[a];t(u,e,n,r)&&s.push(u)}return s},o.prototype.index=function(t){var e=this.nodes[t];return void 0!==e?(new o).push(e):this.empty},o.prototype.toArray=function(){for(var t=[],e=this.nodes,n=0;n<e.length;n++)t.push(e[n].data);return t},o.prototype.scalar=function(){var t=this.nodes;return t.length?t[0].scalar():""},o.prototype.boolean=function(){var t=this.nodes;return!!t.length&&t[0].boolean()},o.prototype.cmpN=function(t){for(var e=this.nodes,n=0,r=e.length;n<r;n++)if(e[n].cmpN(t))return!0;return!1},o.prototype.cmpS=function(t){for(var e=this.nodes,n=0,r=e.length;n<r;n++)if(e[n].cmpS(t))return!0;return!1},no.JNode=t,no.JNodeset=o;var h="scalar",d="nodeset",v="boolean",y={"*":6,"/":6,"%":6,"+":5,"-":5,"<=":4,">=":4,"<":4,">":4,"==":3,"!=":3,"&&":2,"||":1},_={};_.SELF=/^\.(?![a-zA-Z_*.[])/,_.ROOT=/^\/(?![.[])/,_.BINOP=/^(?:\+|-|\*|\/|%|==|!=|<=|>=|<|>|&&|\|\|)/,_.UNOP=/^(?:\+|-|!)/,_.DIGIT=/^[0-9]/,_.ID=/^[a-zA-Z_][a-zA-Z0-9-_]*/,_.NUMBER=/^[0-9]+(?:\.[0-9]+)?/,_.CHARS=/^[^"{}\\]+/;var g={};g.expr=function(){function t(t){for(var r,o,i;(r=e[0])&&y[r]>=t;)i=n.shift(),o=n.shift(),n.unshift({_id:"binop",_type:"+-*/%".indexOf(r)>-1?h:v,_local:o._local||i._local,op:e.shift(),left:o,right:i})}var e=[],n=[this.parse("unary")];this.skip();for(var r,o=0;r=this.test("BINOP");){this.move(r.length),this.skip();var i=y[r];i<=o&&t(i),e.unshift(r),n.unshift(this.parse("unary")),this.skip(),o=i}return t(0),n[0]},g.unary=function(){var t;if(t=this.test("UNOP")){this.move();var e=this.parse("unary");return{_id:"unop",_type:"!"===t?v:h,_local:e._local,op:t,expr:e}}return this.parse("primary")},g.primary=function(){switch(this.la()){case'"':return this.parse("string");case".":case"/":return this.parse("jpath");case"(":return this.parse("subexpr")}if(this.test("DIGIT"))return{_id:"number",_type:h,value:this.match("NUMBER")};var t=this.match("ID");if(this.test("."))return{_id:"filter",_type:d,name:t,jpath:this.parse("jpath")};if(this.test("(")){this.move(),this.skip();var e=[];if(!this.test(")"))for(e.push(this.parse("expr")),this.skip();this.test(",");)this.move(),this.skip(),e.push(this.parse("expr")),this.skip();return this.match(")"),{_id:"func",_type:h,name:t,args:e}}return{_id:"var",_type:d,name:t}},g.subexpr=function(){this.move(),this.skip();var t=this.parse("expr");return this.skip(),this.match(")"),{_id:"subexpr",_type:t._type,_local:t._local,expr:t}},g.jpath=function(){if(this.test("SELF"))return this.move(),{_id:"self",_type:d,_local:!0};if(this.test("ROOT"))return this.move(),{_id:"root",_type:d};var t;this.test("/")&&(this.move(),t=!0);for(var e=[];;){var n=this.la();if("."===n)e.push(this.parse("step"));else{if("["!==n)break;var r=this.parse("pred");"guard"===r._id?e.unshift(r):e.push(r)}}return{_id:"jpath",_type:d,_local:!t,abs:t,steps:e}},g.step=function(){this.move();var t=this.la();return"["===t?this.parse("pred"):"*"===t?(this.move(),{_id:"star"}):{_id:"nametest",nametest:this.match("ID")}},g.pred=function(){this.move(),this.skip();var t=this.parse("expr");this.skip(),this.match("]");var e="index";return t._local?e="pred":t._type===v&&(e="guard"),{_id:e,expr:t}},g.string=function(){this.match('"');var t=this.parse("string_content");return this.match('"'),t};var m={"{{":"{","}}":"}",'\\"':'"',"\\\\":"\\"};g.string_content=function(){function t(){o&&(r.push(e(o)),o="")}function e(t){return{_id:"string_literal",_type:h,value:t}}for(var n,r=[],o="";this.s;)if(n=m[this.la(2)])o+=n,this.move(2);else{if('"'===(n=this.la()))break;"\\"===n?(o+=n,this.move()):"{"===n?(t(),this.move(),this.skip(),r.push(this.parse("expr")),this.skip(),this.match("}")):o+=this.match("CHARS")}return t(),r.length||r.push(e("")),{_id:"string",_type:h,value:r}};var w=new no.Parser(g,_),b={};no.jpath=function(t,e,n,r){return no.jpath.toScalar(no.jpath.expr(t)(e,n,r))},no.jpath.raw=function(t,e,n,r){return no.jpath.expr(t)(e,n,r)},no.jpath.scalar=function(t){var e=no.jpath.expr(t);return function(t,n,r){return no.jpath.toScalar(e(t,n,r))}},no.jpath.boolean=function(t){var e=no.jpath.expr(t);return function(t,n,r){return no.jpath.toBoolean(e(t,n,r))}},no.jpath.string=function(t){return i(t,"string_content")},no.jpath.expr=function(t){var e=n(t);return"string"===e?i(t,"expr"):t&&"object"===e?Array.isArray(t)?a(t):s(t):function(){return t}},no.jpath.toScalar=function(e){return e instanceof t?e.data:e instanceof o?e.isEmpty()?void 0:e.toArray():e},no.jpath.toBoolean=function(e){return e instanceof t||e instanceof o?e.boolean():e};var x={};no.jpath.set=function(t,e,n){return(x[t]||(x[t]=p(t)))(e,n)}})()},6307:function(t,e){var n={};n.todo=function(){throw new Error("Unimplemented")},n.parseQuery=function(t){var e={};return t.split("&").forEach((function(r){var o=r.split("="),i=o.shift();if(i){var s=o.join("=");if(void 0===s)s="";else try{s=decodeURIComponent(s)}catch(e){s="",n.log.info("ns.parseQuery.invalid-param",{query:t,chunk:r})}i in e?(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].push(s)):e[i]=s}})),e},n.renderString=function(t,e,n){return yr.run(n||"main",t,e)},n.renderNode=function(t,e,r){var o=n.html2node(n.renderString(t,e,r));return o?o.firstChild:null},n.init=function(){n.action.init(),n.router.init(),n.history.init(),n.initMainView()},n.initMainView=function(){var t=n.View.create("app");t._setNode(document.getElementById("js-mail-app")),t.invalidate(),n.MAIN_VIEW=t},n.assert=function(t,e,r){t||n.assert.fail.apply(this,Array.prototype.slice.call(arguments,1))},n.assert.fail=function(t,e){for(var n=Array.prototype.slice.call(arguments,2),r=0;r<n.length;r++)e=e.replace("%s",n[r]);throw new Error("["+t+"] "+e)},n.key=function(t,e){var n=t;e=e||{};for(var r in e)n+="&"+r+"="+encodeURIComponent(e[r]);return n},n.params2query=function(t){var e,n,r=[];for(e in t)if(n=t[e],Array.isArray(n))for(var o=0;o<n.length;o++)r.push(encodeURIComponent(e)+"="+encodeURIComponent(n[o]));else r.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return r.join("&")},n.reset=function(){n.action&&n.action._reset(),n.router._reset(),n.layout._reset(),n.Model._reset(),n.View._reset(),n.request._reset(),n.page._reset(),n.page.history.reset(),n.MAIN_VIEW=null},t.exports=n},6308:function(t,e){ns.VERSION="0.8.15"},6309:function(t,e){ns.L={},ns.L.VIEW="view",ns.L.ASYNC="async",ns.L.BOX="box",ns.V={},ns.V.STATUS={NONE:"none",LOADING:"loading",OK:"ok",INVALID:"invalid"},ns.M={},ns.M.STATUS={ERROR:"error",INITED:"inited",NONE:"none",OK:"ok",INVALID:"invalid"},ns.R={NOT_APP_URL:"ns-router-not-app",NOT_FOUND:"not-found",REDIRECT:"ns-router-redirect"},ns.U={},ns.U.STATUS={MODELS:"models",EXPIRED:"expired"},ns.U.EXEC={GLOBAL:"global",ASYNC:"async",PARALLEL:"parallel"},ns.DEBUG=!1,ns.H={DEFAULTS:{dataType:"json",type:"POST"}}},6310:function(t,e){ns.V.EVENTS={click:"click",dblclick:"dblclick",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"},ns.V.DOM_EVENTS=["blur","change","input","click","dblclick","dragstart","dragenter","dragover","dragleave","drag","drop","dragend","focus","focusin","focusout","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","resize","scroll","submit","onSave","b-mail-dropdown-open","message","dragndrop.drop","result","wheel","DOMNodeRemoved","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument"],ns.V.NS_EVENTS=["ns-view-async","ns-view-destroyed","ns-view-init","ns-view-htmlinit","ns-view-show","ns-view-touch","ns-view-hide","ns-view-htmldestroy"]},6311:function(t,e){ns.IS_TOUCH=(function(){return"boolean"==typeof window.NS_IS_TOUCH?window.NS_IS_TOUCH:Boolean("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)})(),ns.IS_TOUCH&&(ns.V.DOM_EVENTS.push("swipe","swipeleft","swiperight","tap","touchstart","touchmove","touchend"),ns.V.EVENTS={click:"tap",dblclick:"doubletap",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"})},6312:function(t,e){!(function(t){t.replaceNode=function(t,e){return t===e||!!t.parentNode&&(t.parentNode.replaceChild(e,t),!0)},t.removeNode=function(t){var e=t.parentNode;e&&e.removeChild(t)},t.html2node=function(e){if(!e)return null;var n=document.createElement("div");n.innerHTML=e;for(var r=n.getElementsByTagName("x-a"),o=r.length-1;o>=0;o--){var i=r[o],s=t.renameNode(i,"a");i.parentNode.replaceChild(s,i)}return n},t.renameNode=function(t,e){var n,r,o=document.createElement(e),i=t.attributes;for(n=0,r=i.length;n<r;n++){var s=i[n];o.setAttribute(s.name,s.value)}for(;t.firstChild;)o.appendChild(t.firstChild);return o},t.childrenIterator=function(t){return (function(t){var e=-1;return{getNext:function(){return e++,t[e]||null}}})(t.children)};var e=/[\t\r\n]/g;"undefined"!=typeof document&&document.createElement("div").classList?t.hasClass=function(t,e){return t.classList.contains(e)}:t.hasClass=function(t,n){return n=" "+n+" ",1===t.nodeType&&(" "+t.className+" ").replace(e," ").indexOf(n)>=0},"undefined"!=typeof document&&document.getElementsByClassName?t.byClass=function(t,e){return e=e||document,e.getElementsByClassName(t)}:t.byClass=function(t,e){return e=e||document,$(e).find("."+t)}})(ns)},6313:function(t,e){!(function(t){var e=/[&<>"'\/]/g,n=(function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return function(e){return t[e]}})();t.entityify=function(t){return String(t).replace(e,n)};var r=/&([^&;]+);/g,o=(function(){var t={amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x2F":"/"};return function(e,n){return t[n]||e}})();t.deentityify=function(t){return String(t).replace(r,o)}})(ns)},6314:function(t,e){ns.Events={},ns.Events.on=function(t,e){var n=this._nsevents_handlers||(this._nsevents_handlers={});return ns.assert("function"==typeof e,"ns.Events",'Handler for event "%s" in not a function.',t),(n[t]||(n[t]=[])).push(e),this},ns.Events.once=function(t,e){var n=this,r=function r(){n.off(t,r),e.apply(this,arguments)};return r.__original=e,this.on(t,r),this},ns.Events.off=function(t,e){var n;if(e){if(n=this._nsevents_handlers&&this._nsevents_handlers[t])for(var r=0,o=n.length;r<o;r++)if(n[r]===e||n[r].__original===e){n.splice(r,1);break}}else(n=this._nsevents_handlers)&&(n[t]=null);return this},ns.Events.trigger=function(t,e){var n=this._nsevents_handlers&&this._nsevents_handlers[t];if(n){n=n.slice();for(var r=0,o=n.length;r<o;r++)try{n[r].apply(this,arguments)}catch(e){ns.log.exception("ns.events",e,{name:t})}}return this},ns.Events.atrigger=function(t,e){var n=this,r=arguments;no.next((function(){n.trigger.apply(n,r)}))},ns.Events.forward=function(t,e){return this.on(t,(function(t,n){e.trigger(t,n)}))},ns.events=no.extend({},ns.Events)},6315:function(t,e){!(function(){ns.history={},ns.history.init=function(){window.addEventListener("hashchange",ns.history.onpopstate,!1)},ns.history.pushState=function(t,e){ns.page._forceHashChange=t,window.location.href=t},ns.history.replaceState=function(t,e){ns.page._forceHashChange=t,window.location.replace(t)},ns.history.onpopstate=function(){var t,e=ns.page.getCurrentUrl(),n=ns.page._forceHashChange;try{t=decodeURIComponent(n)}catch(t){}if(n&&n==e||t&&t==e)return!1;ns.page.go(e)},ns.history.followAnchorHref=function(t,e){return ns.page.go(t)},ns.history._onAnchorClick=function(t){var e=t.currentTarget;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return!0;if(e.protocol&&!/^https?:/.test(e.protocol))return!0;if(e.hostname&&e.hostname!==window.location.hostname)return!0;if(ns.router.baseDir){var n=e.pathname,r=ns.router.baseDir;if(n.substr(0,r.length)!==r)return!0}var o=e.getAttribute("href");if(!o||e.getAttribute("target"))return!0;var i=ns.history.followAnchorHref(o,e);return Vow.isPromise(i)?(t.preventDefault(),!0):void 0}})()},6316:function(t,e){ns.http=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=no.extend({},ns.H.DEFAULTS,n),n.url=t,n.data=e,n.traditional=!0;var o=new Vow.Promise;return $.ajax(n).done((function(t){o.fulfill(t)})).fail((function(t,e,n){if(!r){Jane.ErrorLog.send({errorType:"handlersjsx.httperror",status:t.status,headers:t.getAllResponseHeaders()});var i=n||e||"unknown error";o.reject({error:i,xhr:t})}})),o}},6317:function(t,e){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}ns.object={},ns.object.clone=function(t){if(t&&"object"===n(t)){var e;if(Array.isArray(t)){e=[];for(var r=0;r<t.length;r++)e.push(ns.object.clone(t[r]))}else{e={};for(var o in t)e[o]=ns.object.clone(t[o])}return e}return t},ns.object.isEmpty=function(t){for(var e in t)return!1;return!0}},6318:function(t,e){!(function(){ns.profile={},ns.profile.startTimer=function(t){this._profileTimes||(this._profileTimes={}),ns.assert(!this._profileTimes[t],"ns.profile","Timer '%s' is in use",t),this._profileTimes[t]=Date.now()},ns.profile.stopTimer=function(t){return this._profileTimes||(this._profileTimes={}),ns.assert(this._profileTimes[t],"ns.profile","Timer '%s' haven't been started",t),this._profileTimes[t]=Date.now()-this._profileTimes[t],this._profileTimes[t]},ns.profile.switchTimer=function(t,e){this.stopTimer(t),this.startTimer(e)},ns.profile.getTimer=function(t){this._profileTimes||(this._profileTimes={});var e=this._profileTimes[t];return"number"==typeof e?e:NaN},ns.profile.getTimers=function(){return no.extend({},this._profileTimes)}})()},6319:function(t,e){!(function(t,e){t.action={};var n={},r=!1;t.action.define=function(t,e){if(t in n)throw new Error("[ns.action] Can't redefine '"+t+"'");n[t]=e},t.action.copy=function(t,e){if(e in n)throw new Error("[ns.action] Can't redefine '"+e+"'");if(!(t in n))throw new Error("[ns.action] '"+t+"' is not defined");n[e]=n[t]},t.action.run=function(e,r,o,i){if(r=r||{},r.counter){var s=r.counter.split(":");s&&s.length&&Jane.c(s[0],s[1])}r.mcounter&&(Jane.c(r.mcounter.split(":")),r.mcounter=null),["archive","delete","forward","ignore","infolder","label","mark","move","sendon","stop-waitforreply","reply","reply-all","reply-tmpl","unlabel","unmark"].indexOf(e)>-1&&!r.doNotCloseDropdown&&$(document).trigger("b-mail-dropdown-closeall");var a=n[e];t.assert(a,"ns.action","%s is not defined",e);try{return a(e,r,o,i)}catch(e){t.log.exception("ns.action",e)}},t.action.init=function(){if(!r){r=!0;var e=$("body");e.on("submit",".daria-form",(function(e){var n=e.currentTarget,r=!0,o=$(n),i=n.getAttribute("data-click-action");return i&&!o.prop("disabled")&&(r=t.action.run(i,t.action.getParams(n),n,e)),void 0!==r&&r})),e.on("click",".daria-action",(function(e){var n=e.currentTarget,r=!0,o=$(n),i=n.getAttribute("data-action")||n.getAttribute("action");return i&&!o.prop("disabled")&&(r=t.action.run(i,t.action.getParams(n),n,e)),void 0!==r&&r})),["error","load"].forEach((function(e){document.addEventListener(e,(function(n){var r=n.target,o=r&&r.classList;if(o&&-1!==Array.prototype.indexOf.call(o,"ns-action")){var i=r.getAttribute("data-"+e+"-action");i&&n.type===e&&t.action.run(i,t.action.getParams(r),r,n)}}),!0)}));var n=[t.V.EVENTS.click,t.V.EVENTS.dblclick].join(" ");e.on(n,".ns-action",this._process)}},t.action._process=function(e){if(e.isPropagationStopped())return!1;var n=e.currentTarget,r="dblclick"===e.type?n.getAttribute("data-dblclick-action"):n.getAttribute("data-click-action"),o=!0;return r&&(o=t.action.run(r,t.action.getParams(n),n,e)),void 0!==o&&!Vow.isPromise(o)&&o},t.action._reset=function(){n={}},t.action.getParams=function(e){var n=e.getAttribute("data-params")||e.getAttribute("params"),r=e.getAttribute("href");if(n){if(!n||"{"!==n.charAt(0))return t.parseQuery(n||"");try{return JSON.parse(n)}catch(t){}}else if(r)return(t.router(r)||{}).params;return{}}})(ns)},6320:function(t,e,n){function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(2013),i=n(6321),s=n(14).default;!(function(){ns.Model=function(){},no.extend(ns.Model.prototype,ns.Events);var t={},e={},n={},a=0;ns.Model.prototype.STATUS=ns.M.STATUS,ns.Model.prototype.RETRY_LIMIT=3,ns.Model.prototype.status=ns.M.STATUS.NONE,ns.Model.prototype.key=null,ns.Model.prototype.params=null,ns.Model.prototype._errorFixingPromise=null,ns.Model.prototype._init=function(t,e){this.id=t,this._reset(),this.info=ns.Model.info(t),no.extend(this,ns.Model.getKeyAndParams(t,e,this.info)),this._reinit()},ns.Model.prototype._reinit=function(){this.status===this.STATUS.NONE&&(this._bindEvents(),this.status=this.STATUS.INITED,this.trigger("ns-model-init"),this._extractPrefetch())},ns.Model.prototype._extractPrefetch=function(){var t=s.extract(this.id,this.params);t&&ns.request.extractModel(this,t)},ns.Model.prototype._reset=function(t){this.data=null,this.error=null,this._softReset(t),this._version=0},ns.Model.prototype._softReset=function(t){this.status=t||this.STATUS.NONE,this.retries=0},ns.Model.prototype._bindEvents=function(){for(var t in this.info.events){var e=this.info.events[t];Array.isArray(e)||(e=[e]);for(var n=0,r=e.length;n<r;n++)this.on(t,this._prepareCallback(e[n]))}},ns.Model.prototype._unbindEvents=function(){for(var t in this.info.events){var e=this.info.events[t];Array.isArray(e)||(e=[e]);for(var n=0,r=e.length;n<r;n++)this.off(t,this._prepareCallback(e[n]))}},ns.Model.prototype._prepareCallback=function(t){return"string"==typeof t&&(t=this[t]),ns.assert("function"==typeof t,"ns.Model","Can't find method '%s' in '%s' to bind event",t,this.id),t},ns.Model.prototype.invalidate=function(){this._softReset(this.STATUS.INVALID)},ns.Model.prototype.destroy=function(){this.trigger("ns-model-before-destroyed"),this._reset(this.STATUS.NONE),this.trigger("ns-model-destroyed"),this._unbindEvents()},ns.Model.prototype.isValid=function(){return this.status===this.STATUS.OK},ns.Model.prototype.getData=function(){return this.data},ns.Model.prototype.get=function(t){var e=this.data;if(e)return no.jpath(t,e)},ns.Model.prototype.select=function(t){var e=this.data;return e?no.jpath.raw(t,e).toArray():[]},ns.Model.prototype.set=function(t,e,n){var r=this.data;if(this.isValid()&&r){var i=o(this.get(t));no.jpath.set(t,r,e),n=n||{},n.jpath=t,this.touch(n),n.silent||this.triggerChangedEvent(t,n.data,i)}},ns.Model.prototype.triggerChangedEvent=function(t,e,n){e=e||{};for(var r=t.split("."),o=r.length;o>1;){var i=r.slice(0,o).join(".");this.trigger("ns-model-changed"+i,i,t,e,n),o--}},ns.Model.prototype.setIfChanged=function(t,e,n){n=n||{};var r=this.get(t),o=!1;return i(r,e)&&!n.force||(this.set.apply(this,arguments),o=!0),o},ns.Model.prototype.inNotInitedState=function(){return this.status===this.STATUS.NONE},ns.Model.prototype.setData=function(t,e){return this._reinit(),!t||this.isValid()&&!this.hasDataChanged(t)||(this.data=this._beforeSetData(this.preprocessData(t),e),this.status=this.STATUS.OK,this.error=null,this.touch(e)),this},ns.Model.prototype.hasDataChanged=function(t){return Boolean(t)},ns.Model.prototype.getError=function(){return this.error},ns.Model.prototype.setError=function(t,e){if(this.isErrorCanBeFixed(t)?this._errorFixingPromise=this.fixError(t):(this.data=null,this.error=t,this.status=this.STATUS.ERROR),this.status===this.STATUS.ERROR){if(this.trigger("ns-model-error"),t&&"NO_DATA"===t.id)return;var n="HandlerError ".concat(this.id),o={errorType:"HandlerError",name:this.id,key:e||this.key};"object"===r(t)?(Object.assign(o,t),t.code&&(n+=" ".concat(t.code))):n+=" ".concat(t),Jane.ErrorLog.send(o,null,null,n)}},ns.Model.prototype.isErrorCanBeFixed=function(t){return"account-information"!==this.id&&"ckey"===t},ns.Model.prototype.fixError=function(){return ns.forcedRequest(["account-information"])},ns.Model.prototype._beforeSetData=function(t,e){return t},ns.Model.prototype.preprocessData=function(t){return t},ns.Model.prototype.getRequestParams=function(){return ns.Model._getKeyParams(this.id,this.params,this.info)},ns.Model.prototype._canRequest=function(){return this.canRequest()&&(!this.retries||!this.isDo())&&this.retries<this.RETRY_LIMIT},ns.Model.prototype.canRequest=no.true,ns.Model.prototype.extractData=function(t){if(t)return t.data},ns.Model.prototype.extractError=function(t){if(t)return t.error},ns.Model.prototype.isDo=function(){return this.info.isDo},ns.Model.prototype.getVersion=function(){return this._version},ns.Model.prototype._incVersion=function(){this._version++},ns.Model.prototype.touch=function(t){if(t=t||{},!t.silent){this._incVersion(),this.trigger("ns-model-touched");var e=t.jpath||"";this.trigger("ns-model-changed",e)}},ns.Model.prototype.prepareRequest=function(t){return this.requestID=t,this.retries++,this.promise=new Vow.Promise,this},ns.Model.prototype.finishRequest=function(){this._errorFixingPromise?this._errorFixingPromise.then(this.__finishRequest,this.__finishRequest,this):this.__finishRequest()},ns.Model.prototype.__finishRequest=function(){this._errorFixingPromise&&(this._errorFixingPromise=null,this.retries=0),this.promise.fulfill()},ns.Model.prototype.destroyWith=function(t){ns.Model.destroyWith(this,t)},ns.Model.get=function(e,r){var o=this._find(e,r);if(!o){o=new(0,t[e]),o._init(e,r),o.isDo()||(n[e][o.key]=o)}return o._reinit(),o},ns.Model.getValid=function(t,e){var n=this._find(t,e);return n&&n.isValid()?n:null},ns.Model._find=function(t,r){ns.assert(t in e,"ns.Model","'%s' is not defined",t);var o=ns.Model.key(t,r);return n[t][o]||null},ns.Model.destroy=function(t){if(!t.isDo()){var e=t.id,r=t.key;n[e][r]&&t.destroy()}},ns.Model.destroyAll=function(t){Array.isArray(t)||(t=[t]),t.forEach((function(t){ns.Model.isDefined(t)&&ns.Model.traverse(t,ns.Model.destroy)}))},ns.Model.isValid=function(t,e){return Boolean(ns.Model.getValid(t,e))},ns.Model.define=function(r,o,i){ns.assert(!(r in e),"ns.Model","Can't redefine '%s'",r),o=o||{},void 0===o.isCollection&&(o.isCollection=Boolean(o.split));var s=i;"string"==typeof i?(s=t[i],ns.assert(s,"ns.Model","Can't find '%s' to extend '%s'",i,r)):i||(s=o.uniq?ns.ModelUniq:o.isCollection?ns.ModelCollection:ns.Model);var a=o.ctor||function(){};return a=no.inherit(a,s,o.methods),o.ready=!1,e[r]=o,t[r]=a,n[r]={},ns.events.trigger("ns-model-defined:"+r),a},ns.Model.isDefined=function(t){var e=!1;try{ns.Model.infoLite(t)&&(e=!0)}catch(t){}return e},ns.Model._reset=function(){n={},t={},e={}},ns.Model._clear=function(){for(var t in e)n[t]={}},ns.Model.info=function(t){var e=ns.Model.infoLite(t);return e.ready||(e.params=e.params||{},e.events=e.events||{},e.isDo=/^do-/.test(t),e.ready=!0),e},ns.Model.infoLite=function(t){var n=e[t];return ns.assert(n,"ns.Model","'%s' is not defined",t),n},ns.Model.key=function(t,e,n){return ns.Model.getKeyAndParams(t,e,n).key},ns.Model.getKeyAndParams=function(t,e,n){if(n=n||ns.Model.info(t),n.isDo)return{key:"do-"+t+"-"+a++,params:e};var r="model="+t,o=ns.Model._getKeyParams(t,e,n);return{key:ns.key(r,o),params:o}},ns.Model._getKeyParams=function(t,e,n){if(e=e||{},n=n||ns.Model.info(t),"function"==typeof n.params)return n.params(e);for(var r=n.params,o=n.pNames||(n.pNames=Object.keys(n.params)),i={},s=0,a=o.length;s<a;s++){var u=o[s],c=e[u],l=r[u];(n.isStrictParams?void 0!==c:null!=c)?i[u]=c:null!=l&&(i[u]=l)}return"function"==typeof n.paramsRewrite&&(i=n.paramsRewrite(i)),i},ns.Model.invalidate=function(t,e){e=e||function(){return!0};var r=n[t];for(var o in r){var i=r[o];e(i)&&i.invalidate()}},ns.Model.invalidateAll=function(t){Array.isArray(t)||(t=[t]),t.forEach((function(t){ns.Model.isDefined(t)&&ns.Model.invalidate(t)}))},ns.Model.destroyWith=function(t,e){Array.isArray(e)||(e=[e]);for(var n=0,r=e.length;n<r;n++){var o=e[n];ns.assert(o instanceof ns.Model,"ns.Model","destroyWith called for '%s' while one of the withModels is not instance of ns.Model",t.id),o.on("ns-model-destroyed",(function(){ns.Model.destroy(t)}))}},ns.Model.isCollection=function(t){return(t.info||ns.Model.infoLite(t.id)).isCollection},ns.Model.traverse=function(t,e){ns.Model.infoLite(t),ns.assert("function"==typeof e,"ns.Model.traverse","callback must be a function");var r=n[t];for(var o in r)e(r[o])},ns.Model.collectErrorData=function(t){var e={};return t.forEach((function(t,n){e["model."+n]=t.id,e["key."+n]=t.key,e["error."+n]=t.getError(),e["status."+n]=t.status})),e}})()},6321:function(t,e,n){function r(t,e){return o(t,e)}var o=n(683);t.exports=r},6322:function(t,e){ns.ModelArmour=function(){},no.inherit(ns.ModelArmour,ns.Model),ns.ModelArmour.prototype._extractData=ns.Model.prototype.extractData,ns.ModelArmour.prototype.extractData=function(t){return this._extractData(t)||{}}},6323:function(t,e){ns.ModelStatic=function(){},no.inherit(ns.ModelStatic,ns.Model),ns.ModelStatic.prototype.canRequest=no.False,ns.ModelStatic.prototype.destroy=function(){ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelStatic.prototype.invalidate=function(){this.destroy()}},6324:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6325),o=n.n(r),i=n(1480),s=n.n(i),a=n(6327),u=n.n(a),c=n(2015),l=(n.n(c),n(2016)),f=n.n(l),p=n(469),h=n.n(p),d=n(6329),v=n.n(d),y=/^#\s([^#]+)$/,_=/^([^\s>*!]+) > ([^\s>*!]+)$/;ns.ModelFsm=function(){},no.inherit(ns.ModelFsm,ns.Model),ns.ModelFsm.prototype._init=function(){this._transitionEvents={},this._inTransition=!1,this._isSwitchOn=!0,ns.Model.prototype._init.apply(this,arguments)},ns.ModelFsm.prototype.log=function(){var t=u()(arguments);t=["[ns.ModelFsm] id:",this.id].concat(t),ns.log.debug.apply(ns.log,t)},ns.ModelFsm.prototype.request=function(){var t=this.start;return ns.assert(!f()(t),"ns.ModelFsm.onInit","'start' state is required param of FSM"),h()(t)&&(t=this.start()),this.setInitialState(t),vow.Promise.resolve()},ns.ModelFsm.prototype.setInitialState=function(t){this.setData({state:t})},ns.ModelFsm.prototype.setState=function(t,e){var n=this.get(".state"),r=this._checkTransitionToState(t)?vow.resolve():vow.reject(new Error("fsm setState: change state not available")),o={from:n,to:t,data:e};return r.then(function(){this.log("Transition from",n,"to",t,"is started"),this.trigger(n+" > "+t,o)}.bind(this),function(){this.log("Can't do transition from",n,"to",t),this.log("Current state is",n),Jane.ErrorLog.send({errorType:"fsm_transition_failed",fsmModel:this.id,fromState:n,toState:t,inTransition:this._inTransition,isSwitchOn:this._isSwitchOn})}.bind(this)),r},ns.ModelFsm.prototype._checkTransitionToState=function(t){var e=this.get(".state"),n=this.transitions["*"],r=this.transitions[e];return!(this._inTransition||!this._isSwitchOn)&&(t!==e&&(!(!n||!s()(n,t))||!(!s()(r,t)&&!s()(r,"*"))))},ns.ModelFsm.prototype.getState=function(){return this.get(".state")},ns.ModelFsm.prototype.isCurrentState=function(t){return t=$.makeArray(t),s()(t,this.get(".state"))},ns.ModelFsm.prototype._applyState=function(t,e){this.log("Apply state:",t," EventData:",e),this.set(".state",t),this.trigger("# "+t,e),this.trigger("# *",e)},ns.ModelFsm.prototype.transitionEventHandler=function(t,e){var n=this._transitionEvents[t],r=n.handlers;if("* > *"!==t){var i=this._transitionEvents["* > *"];i&&(r=r.concat(i.handlers))}var s=[];this._inTransition=!0,o()(r,(function(n){s.push(n(t,e))})),this._transitionDeferred=new vow.Deferred,this._transitionDeferred.promise().then(this._transitionSuccess.bind(this,e),this._transitionError.bind(this,e)),vow.all(s).then(this._transitionDeferred.resolve.bind(this._transitionDeferred),this._transitionDeferred.reject.bind(this._transitionDeferred))},ns.ModelFsm.prototype._transitionSuccess=function(t){this._inTransition=!1,this.log("Transition from",t.from,"to",t.to,"is success"),this._applyState(t.to,t)},ns.ModelFsm.prototype._transitionError=function(t,e){this._inTransition=!1,t.error=e,this.log("Transition from",t.from,"to",t.to,"failed. Error:",e),this.log("Current state is",t.from),this.trigger(t.from+" !> "+t.to,t),this.trigger("* !> *",t)},ns.ModelFsm.prototype.on=function(t,e){if("transition"===this.getEventData(t).type){var n=this._transitionEvents[t];n||(n=this._transitionEvents[t]={name:t,handlers:[],callback:this.transitionEventHandler.bind(this)},ns.Model.prototype.on.call(this,t,n.callback)),n.handlers.push(e)}else ns.Model.prototype.on.call(this,t,e);return this},ns.ModelFsm.prototype.off=function(t,e){if("transition"===this.getEventData(t).type){var n=this._transitionEvents[t];n&&(n.handlers=v()(n.handlers,(function(t){return t===e})),n.handlers.length||(delete this._transitionEvents[t],ns.Model.prototype.off.call(this,t,n.callback)))}else ns.Model.prototype.off.call(this,t,e);return this},ns.ModelFsm.prototype.trigger=function(t,e){if(this._isSwitchOn)return _.test(t)&&!this._transitionEvents[t]?void this.trigger("* > *",e):"* > *"!==t||this._transitionEvents[t]?void ns.Model.prototype.trigger.apply(this,arguments):(this.log("Transition from",e.from,"to",e.to,"is success"),void this._applyState(e.to,e))},ns.ModelFsm.prototype.getEventData=function(t){var e={type:t,from:"",to:""},n=[t];if(y.test(t)&&(n=t.match(y),e.type="current",e.to=n[1]),"* > *"===t&&(e.type="transition",e.from="*",e.to="*"),_.test(t)){n=t.match(_);var r=n[1],o=n[2];e.type=r&&o?"transition":t,e.from=r,e.to=o}return e},ns.ModelFsm.prototype.inTransition=function(){return this._inTransition},ns.ModelFsm.prototype.abortTransition=function(){this._inTransition&&this._transitionDeferred.reject(new Error("model already in transition"))},ns.ModelFsm.prototype.switchOff=function(){this.log("Model is switchOff"),this.abortTransition(),this._isSwitchOn=!1},ns.ModelFsm.prototype.switchOn=function(){this.log("Model is switchOn"),this._isSwitchOn=!0},ns.ModelFsm.prototype.destroy=function(){this.switchOn(),this.abortTransition(),ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelFsm.prototype.invalidate=ns.ModelFsm.prototype.destroy},6325:function(t,e,n){t.exports=n(6326)},6326:function(t,e,n){function r(t,e){return(a(t)?o:i)(t,s(e))}var o=n(776),i=n(805),s=n(2014),a=n(378);t.exports=r},6327:function(t,e,n){function r(t){if(!t)return[];if(a(t))return u(t)?p(t):i(t);if(y&&t[y])return c(t[y]());var e=s(t);return(e==d?l:e==v?f:h)(t)}var o=n(401),i=n(562),s=n(464),a=n(415),u=n(1481),c=n(6328),l=n(911),f=n(684),p=n(1222),h=n(763),d="[object Map]",v="[object Set]",y=o?o.iterator:void 0;t.exports=r},6328:function(t,e){function n(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}t.exports=n},6329:function(t,e,n){function r(t,e){return(a(t)?o:i)(t,u(s(e,3)))}var o=n(669),i=n(6330),s=n(619),a=n(378),u=n(6331);t.exports=r},6330:function(t,e,n){function r(t,e){var n=[];return o(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}var o=n(805);t.exports=r},6331:function(t,e){function n(t){if("function"!=typeof t)throw new TypeError(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var r="Expected a function";t.exports=n},6332:function(t,e){!(function(){ns.ModelCollection=function(){},no.inherit(ns.ModelCollection,ns.Model),ns.ModelCollection.prototype.DEFAULT_ITEMS_SPLIT=".items",ns.ModelCollection.prototype._init=function(){this._modelsEvents={},this.models=[],ns.Model.prototype._init.apply(this,arguments)},ns.ModelCollection.prototype.getData=function(){if(this.isValid()){var t;t=this.info.split?this.info.split.items:this.info.jpathItems?this.info.jpathItems:this.DEFAULT_ITEMS_SPLIT,this.data||(this.data={}),"/"===t?this.data=[]:no.jpath.set(t,this.data,[]);var e=no.jpath(t,this.data);this.models.forEach((function(t){e.push(t.getData())}))}return this.data},ns.ModelCollection.prototype._reset=function(){ns.Model.prototype._reset.apply(this,arguments),this.clear()},ns.ModelCollection.prototype._beforeSetData=function(t,e){var n=this.info.split;if(n){var r=no.jpath(n.items||this.DEFAULT_ITEMS_SPLIT,t),o=this._splitModels(r,e),i=this.__filterExistsModels(this.models,o),s=this.__filterExistsModels(o,this.models);this.__removeModels(s),this.__insertModels(i,0),this.models=o}else this.clear();return t},ns.ModelCollection.prototype._splitModels=function(t,e){for(var n=this.info.split,r=[],o=0,i=t.length;o<i;o++){var s=t[o],a={};for(var u in n.params)a[u]=no.jpath(n.params[u],s);var c;c="function"==typeof n.model_id?n.model_id(s,a):n.model_id,c&&r.push(ns.Model.get(c,a).setData(s,e))}return r},ns.ModelCollection.prototype._subscribeSplit=function(t){var e=this;this.bindModel(t,"ns-model-changed",(function(n,r){e.onItemChanged(n,t,r)})),this.bindModel(t,"ns-model-touched",(function(n){e.onItemTouched(n,t)})),this.bindModel(t,"ns-model-before-destroyed",(function(n){e.onItemDestroyed(n,t)}))},ns.ModelCollection.prototype.__filterExistsModels=function(t,e){for(var n=this.__buildModelsHash(t),r=[],o=0,i=e.length;o<i;o++){var s=e[o];n.hasOwnProperty(s.key)||r.push(s)}return r},ns.ModelCollection.prototype.__buildModelsHash=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n].key]=0;return e},ns.ModelCollection.prototype.bindModel=function(t,e,n){var r=this._modelsEvents[t.key]||(this._modelsEvents[t.key]={});t.on(e,n),r[e]=n},ns.ModelCollection.prototype.unbindModel=function(t,e){var n=this._modelsEvents[t.key];n&&n[e]&&(t.off(e,n[e]),delete n[e])},ns.ModelCollection.prototype.onItemChanged=function(t,e,n){this.trigger("ns-model-changed",{model:e,jpath:n})},ns.ModelCollection.prototype.onItemTouched=function(t,e){this._version++},ns.ModelCollection.prototype.onItemDestroyed=function(t,e){this.remove(e)},ns.ModelCollection.prototype.getSelfVersion=function(){return this._versionSelf},ns.ModelCollection.prototype._incVersion=function(){ns.Model.prototype._incVersion.apply(this,arguments),this._versionSelf=this._version},ns.ModelCollection.prototype._unsubscribeSplit=function(t){if(t.key in this._modelsEvents){var e=this._modelsEvents[t.key];for(var n in e)t.off(n,e[n]);delete this._modelsEvents[t.key]}},ns.ModelCollection.prototype.clear=function(){var t=this.models;if(this.models=[],t&&t.length){var e=this;t.forEach((function(t){e._unsubscribeSplit(t)})),this.trigger("ns-model-remove",t)}},ns.ModelCollection.prototype.insert=function(t,e){this._reinit(),isNaN(e)&&(e=this.models.length),Array.isArray(t)||(t=[t]);for(var n=[],r=this.__buildModelsHash(t),o=0,i=t.length;o<i;o++){var s=t[o];0===r[s.key]&&(n.push(s),r[s.key]++)}var a=this.__filterExistsModels(this.models,n);return this.__insertModels(a,e)},ns.ModelCollection.prototype.__insertModels=function(t,e){for(var n=0,r=t.length;n<r;n++)this.models.splice(e+n,0,t[n]),this._subscribeSplit(t[n]);return t.length>0&&(this.status=this.STATUS.OK,this.trigger("ns-model-insert",t),!0)},ns.ModelCollection.prototype.remove=function(t){Array.isArray(t)||(t=[t]);for(var e=this._modelsIndexToInstance(t),n=[],r=0,o=e.length;r<o;r++){var i=e[r],s=this.models.indexOf(i);s>-1&&(i._itemToRemoveIndex=s,n.push(i))}return this.__removeModels(n)},ns.ModelCollection.prototype.__removeModels=function(t){t=t.sort((function(t,e){return e._itemToRemoveIndex-t._itemToRemoveIndex}));for(var e=0,n=t.length;e<n;e++)this._unsubscribeSplit(t[e]),this.models.splice(t[e]._itemToRemoveIndex,1);return!!t.length&&(this.trigger("ns-model-remove",t),!0)},ns.ModelCollection.prototype._modelsIndexToInstance=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];if("number"==typeof o){var i=this.models[o];this.models[o]&&e.push(i)}else e.push(o)}return e}})()},6333:function(t,e){ns.ModelCollectionStatic=function(){},no.inherit(ns.ModelCollectionStatic,ns.ModelCollection),ns.ModelCollectionStatic.prototype.canRequest=no.False,ns.ModelCollectionStatic.prototype.destroy=function(){ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelCollectionStatic.prototype.invalidate=ns.ModelCollectionStatic.prototype.destroy},6334:function(t,e){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!(function(){function t(e,i){var s={};if("string"==typeof e)s[e]=!0,e=s;else if(Array.isArray(e)){for(var a=0,u=e.length;a<u;a++)s[e[a]]=!0;e=s}var c={};for(var l in e){var f=l;l.indexOf("{")>-1&&(f=no.jpath.string(l)(i));var p,h=e[l];switch(n(h)){case"function":p=t(h(i),i);break;case"object":case"string":p=t(h,i);break;default:p={}}c[o(f)]={type:r(f),views:p}}return c}function e(t,e){var n=ns.object.clone(e);for(var i in t){var a=i.split(s),u=a.length;if(r(a[u-1])!==ns.L.BOX)throw new Error("[ns.layout] Can't overwrite view layout '"+a[u-1]+"'");for(var c=n,l=0;l<u-1;l++)if(!(c=c[o(a[l])].views))throw new Error('[no.layout] Path "'+a.slice(0,l).join(" ")+'" is undefined in this layout and cannot be extended');c[o(a[u-1])]=t[i]}return n}function r(t){var e=t.substr(-1);return"@"===e?ns.L.BOX:"&"===e?ns.L.ASYNC:ns.L.VIEW}function o(t){if(s.test(t))return t;var e=t.slice(-1);return"@"!==e&&"&"!==e||(t=t.slice(0,-1)),t}ns.layout={};var i={},s=/\s+/;ns.layout.define=function(t,e,n){if(i[t])throw new Error("[ns.layout] Can't redefine '"+t+"'");i[t]={layout:e,parent_id:n}},ns.layout.undefine=function(t){delete i[t]},ns.layout._reset=function(){i={}},ns.layout.page=function(n,r){var o=i[n];if(!o)throw new Error("[ns.layout] '"+n+"' is not defined");var s=t(o.layout,r);if(o.parent_id){s=e(s,ns.layout.page(o.parent_id,r))}return s},ns.layout.generateSimple=function(t,e){e=e||"ns-auto-layout-";var n=e+t;if(n in i)return n;var r={};return r[t]={},ns.layout.define(n,r),n}})()},6335:function(t,e){!(function(t){t.log={},t.log.debug=function(){Daria.DEBUG&&console.log.apply(console,arguments)},t.log.info=function(e,n,r){var o=r;if("ns.Update.restart"===e||"ns.Update.error-content"===e||"ns.View.error-content"===e){r=JSON.stringify(t.Model.collectErrorData(r||[]))}else if(r&&"string"!=typeof r)try{r=JSON.stringify(r)}catch(t){r="JSON.stringify.error"}Daria.DEBUG&&window.console&&window.console.group&&(console.group("[qu.log.info]"),console.log(e),console.log(n),console.log(o),console.groupEnd("[qu.log.info]")),n=n||{},n.event=e,n.level="info",Jane.ErrorLog.send(n,r)},t.log.error=function(t,e,n){},t.log.exception=function(t,e,n){Jane.ErrorLog.sendException(t,e,n)}})(ns)},6336:function(t,e){!(function(){function t(t){return ns.events.trigger("ns-page-after-load",t),t}function e(t){return ns.events.trigger("ns-page-error-load",t),Vow.reject(t)}ns.page={},ns.page.HOME_HASH="#inbox",ns.page.current={page:null,params:{}},ns.page.currentUrl=null,ns.page._forceHashChange=null,ns.page._lastTransition={url:null,count:0},ns.page._lastTransition.set=function(t,e){!e&&t&&(this.url===t?++this.count:(this.url=t,this.count=1))},ns.page._lastTransition.unset=function(t,e){if(!e&&this.url&&this.url===t){var n=Math.max(this.count-1,0);this.count=n,this.url=n?this.url:null}},ns.page._lastTransition.shouldBlockByTransition=function(t,e){return e&&this.url&&this.url!==t},ns.page.DEFAULT_HISTORY_ACTION="push",ns.page.home=function(t){return ns.page.go(ns.page.HOME_HASH,t?"replace":"push")},ns.page.refresh=function(){return ns.page.go(ns.page.currentUrl),new vow.Promise(function(t){ns.events.once("ns-page-after-load",t)})},ns.page.go=function(t,n){var r,o=ns.page._go(t,n);if(t=o.url,n=o.historyAction,r=o.stopPromise)return r;n?!0===n&&(n="replace"):n=ns.page.DEFAULT_HISTORY_ACTION;var i=!1;if(t||(t=ns.page.getCurrentUrl(),i=!0),!ns.page.block.check(t))return t!==ns.page.currentUrl&&ns.history.replaceState(ns.page.currentUrl),Vow.reject("block");var s=ns.router(t);return s.page===ns.R.NOT_APP_URL?("replace"===n?window.location.replace(s.redirect):window.location=s.redirect,new Vow.Promise):(ns.events.trigger("ns-page-before-load",[ns.page.current,s],t),ns.page._lastTransition.set(t,i),"push"===n&&t===ns.page.currentUrl&&(n="preserve"),ns.page.followRoute(s).then((function(){return ns.page._lastTransition.shouldBlockByTransition(t,i)?(ns.log.debug("[ns.page.go] refresh "+t+" blocked by transition to "+ns.page._lastTransition.url),Vow.reject("block by transition")):(ns.page._setCurrent(s,t),ns.page._fillHistory(t,n),s.page===ns.R.REDIRECT?ns.page.redirect(s.redirect):(ns.page.title(),ns.page.startUpdate(s)))}),e).then((function(e){return ns.page._lastTransition.unset(t,i),e}),(function(e){return ns.page._lastTransition.unset(t,i),Vow.reject(e)})))},ns.page._go=function(t,e){return ns.log.debug("[ns.page.go]",t,e),t&&"#"!==t.charAt(0)?(!0===e||"replace"===e?window.location.replace(t):window.location=t,{stopPromise:new Vow.Promise}):("done"===ns.page.current.page&&(e=!0),{url:t,historyAction:e})},ns.page.followRoute=function(){var t=new Vow.Promise;return!Jane.Services.hasNewVersion()||Daria.Page.loadingHash===ns.page.currentUrl||/^#compose/.test(ns.page.currentUrl)||/^#done/.test(Daria.Page.loadingHash)?(Jane.Services.run(Daria.Page.loadingHash,(function(){t.fulfill()})),t):(ns.page.forceReload(Daria.Page.loadingHash),t)},ns.page.startUpdate=function(n){var r=ns.layout.page(n.page,n.params);return new ns.Update(ns.MAIN_VIEW,r,n.params).start().then(t,e)},ns.page._setCurrent=function(t,e){ns.page.current=t,ns.page.currentUrl=e},ns.page._fillHistory=function(t,e){switch(e){case"init":ns.page.history.push(t);break;case"push":ns.history.pushState(t),ns.page.history.push(t);break;case"replace":ns.history.replaceState(t),ns.page.history.replace(t);break;case"redirect":ns.history.replaceState(t),ns.page.history.redirect(t)}},ns.page.redirect=function(t){return ns.history.replaceState(t),ns.page.go(t,"redirect")},ns.page.title=no.nop,ns.page._reset=function(){this.current={},this.currentUrl=""},ns.page.getDefaultUrl=function(){return ns.router.url(ns.page.HOME_HASH)},ns.page.getCurrentUrl=function(){var t=window.location.href,e=t.indexOf("#");return-1!==e?t.substr(e):ns.page.HOME_HASH},ns.page.forceReload=function(t){if(ns.page.blockReload.check(ns.page.currentUrl)){var e=window.location;window.removeEventListener("hashchange",ns.history.onpopstate,!1),e.replace(t||e.hash),e.reload()}},ns.page.hashReplace=function(t){if(!t)return!1;ns.page._forceHashChange=t;var e=window.location.href.toString().replace(/#.+$/,"")+t;return window.location.replace(e),!0},ns.page.replacePage=function(t,e){var n=ns.router.generateUrl(t,e);ns.page.hashReplace(n),ns.page._setCurrent({page:t,params:e},n)}})()},6337:function(t,e){!(function(){ns.page.block={},ns.page.block._checkers=[],ns.page.block.add=function(t){return ns.page.block._checkers.push(t),this},ns.page.block.remove=function(t){var e=ns.page.block._checkers,n=e.indexOf(t);return n>-1&&e.splice(n,1),this},ns.page.block.clear=function(){return ns.page.block._checkers=[],this},ns.page.block.check=function(t){for(var e=ns.page.block._checkers,n=0,r=e.length;n<r;n++)if(!1===e[n](t))return!1;return!0}})()},6338:function(t,e){!(function(){ns.page.blockReload={},ns.page.blockReload._checkers=[],ns.page.blockReload.add=function(t){return ns.page.blockReload._checkers.push(t),this},ns.page.blockReload.remove=function(t){var e=ns.page.blockReload._checkers,n=e.indexOf(t);return n>-1&&e.splice(n,1),this},ns.page.blockReload.clear=function(){return ns.page.blockReload._checkers=[],this},ns.page.blockReload.check=function(t){for(var e=ns.page.blockReload._checkers,n=0,r=e.length;n<r;n++)if(!1===e[n](t))return!1;return!0}})()},6339:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2015),o=n.n(r),i=n(1480),s=n.n(i);!(function(){ns.page.history={},ns.page.history._current=null,ns.page.history._history=[],ns.page.history.push=function(t){var e=ns.page.history;if(e._current&&e._current!==t){ns.page.history.getPrevious()===t?e._history.pop():e._history.push(e._current)}e._current=t},ns.page.history.replace=function(t){var e=ns.page.history,n=e._history.pop(),r=e._current;n&&n!==t&&r!==t&&e._history.push(n),e._current=t},ns.page.history.redirect=function(t){var e=ns.page.history;e._current=t,e._previous=e.getPrevious()},ns.page.history.back=function(){var t=ns.page.history,e=t.getPrevious();return e?t._history.pop():e=ns.page.getDefaultUrl(),t._current=e,ns.page.go(e)},ns.page.history.getPrevious=function(t){t=t||0;var e=ns.page.history._history;return e[e.length-t-1]},ns.page.history.reset=function(){ns.page.history._current=null,ns.page.history._history=[]},ns.page.history.getPreviousPageUrl=function(t){t=t||{};var e,n,r=-1,i=$.makeArray(t.match),a=$.makeArray(t.mismatch),u=(function(){var t=o()(i)?function(){return!0}:function(t){return s()(i,t)},e=function(t){return!s()(a,t)};return function(n){return t(n)&&e(n)}})();do{(e=ns.page.history.getPrevious(++r))&&(n=ns.router(e).page)}while(e&&!u(n));return e},ns.page.history.getFirstValidPrevious=function(t){for(var e,n=ns.page.history._history.concat(ns.page.currentUrl),r=n.length;r--;)if(e=n[r],t(e))return e;return null}})()},6340:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(640);!(function(){function t(t){if("json"===ns.request.FORMAT)return{models:t.map((function(t){var e=t.getRequestParams();return{name:i(t),params:t.info.isStrictParams?e:ns.parseQuery(ns.params2query(e)),meta:{requestAttempt:t.retries}}}))};for(var e={},n=0,r=t.length;n<r;n++){var o="."+n,s=t[n];e["_model"+o]=i(s);var a=s.getRequestParams();for(var u in a)e[u+o]=a[u]}return e}function e(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n.push({id:t[r],params:e});return n}function n(t){return t.promise}function o(t,n){"string"==typeof t&&(t=[t]),"string"==typeof t[0]&&(n=n||{},t=e(t,n));for(var r=[],o=0,i=t.length;o<i;o++){var s=t[o];s instanceof ns.Model?r.push(s):s.model&&s.model instanceof ns.Model?r.push(s.model):r.push(ns.Model.get(s.id,s.params))}return r}function i(t){return t.info.serverId||t.id}ns.request=function(t,e,n){return ns.request.models(o(t,e),n)},ns.forcedRequest=function(t,e,n){return n=n||{},n.forced=!0,ns.request.models(o(t,e),n)},ns.request.models=function(t,e){return t=t.map((function(t){return t.getRequest?t.getRequest():t})),new a(t,e).start()},ns.request.requestParams={},ns.request.addRequestParams=function(t){return no.extend(t,ns.request.requestParams,Daria.commonRequestParams(t))},ns.request.URL=Daria.api.models,ns.request.FORMAT=Daria.api["models-format"],ns.request.fetchModels=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.map(i),o=ns.request.URL+"?_m="+r.join(","),s=t(e),a={};return ns.request.addRequestParams(s),Object.assign(s,n),"json"===ns.request.FORMAT&&(s=JSON.stringify(s),a.contentType="application/json; encoding=utf-8"),ns.http(o,s,a)},ns.request.canProcessResponse=function(t){var e=t.timestamp;return e&&Object(r.b)(e),Daria.parseLoginInfo(t)},ns.request._reset=function(){ns.request.manager._keys={}},ns.request.extractModel=function(t,e){var n,r;e?(n=t.extractData(e))||(r=t.extractError(e))||(r={id:"INVALID_FORMAT",reason:"response should contain result or error"}):r={id:"NO_DATA",reason:"Server returned no data"},n?t.setData(n):t.setError(r),t&&e&&e.xRequestId&&(t.xRequestId=e.xRequestId)};var s=0,a=function(t,e){this.id=s++,this.models=t,this.options=e||{},this.promise=new Vow.Promise};a.prototype.start=function(){for(var t=[],e=[],n=this.models,r=0,o=n.length;r<o;r++){var i=n[r],s=ns.request.manager.add(i,this.id,this.options.forced);!0===s?e.push(i):s instanceof ns.Model&&t.push(i)}return this.request(t,e),this.promise},a.prototype.request=function(t,e){var r,o=[];if(e.length){var i=[],s=[];e.forEach((function(t){if("function"==typeof t.request){var e=t.request().then((function(){ns.request.manager.done(t)}),(function(){ns.request.manager.done(t)}));t.promise=e,s.push(e)}else i.push(t)})),o=o.concat(s),i.length&&(r=ns.request.fetchModels(i),o=o.concat(i.map(n)))}if(t.length&&(o=o.concat(t.map(n))),o.length){var a=this;r&&r.then((function(t){!1===ns.request.canProcessResponse(t)?(ns.request.manager.clean(a.models),a.promise.reject({error:"CANT_PROCESS",invalid:a.models,valid:[]})):a.extract(i,t)}),(function(t){ns.log.error("ns.request.http",t),a.extract(i,{})})),Vow.all(o).then(this.start.bind(this))}else{ns.request.manager.clean(this.models);for(var u=[],c=[],l=0,f=this.models.length;l<f;l++){var p=this.models[l];p.isValid()?u.push(p):c.push(p)}c.length?this.promise.reject({invalid:c,valid:u}):this.promise.fulfill(this.models)}},a.prototype.extract=function(t,e){for(var n=e&&e.models||[],r=0,o=t.length;r<o;r++){var i=t[r],s=n[r];i.requestID>this.id||(ns.request.extractModel(i,s),ns.request.manager.done(i),i.finishRequest())}},Daria.parseLoginInfo=function(t){var e=jpath(t,".models.error.code")[0]||jpath(t,".error.code")[0];if("AUTH_NO_AUTH"===e||"AUTH_WRONG_GUARD"===e)return Jane.doLogin("parseLoginInfo"),ns.request._reset(),!1;var n=t.uid;return n&&n!==Daria.uid?(Jane.locate("/"),!1):(t.cookieRenew&&!Jane.cookieRenewFrameTimer&&(document.cookie="Cookie_check=1; domain=."+Daria.Config["yandex-domain"]+"; path=/",$('<iframe id="jane-cookie-renew" src="//'+Daria.Config["passport-host"]+'/auth/update/" class="g-invisible"/>').appendTo("body"),Jane.cookieRenewFrameTimer=window.setTimeout((function(){delete Jane.cookieRenewFrameTimer,$("#jane-cookie-renew").remove()}),6e4)),!0)}})()},6341:function(t,e){ns.request.manager={STATUS:{LOADING:0,FAILED:1,DONE:2},_keys:{},add:function(t,e,n){var r=this.STATUS,o=t.key,i=this._keys[o];return i?!(t.isValid()&&!n)&&(i.status===r.LOADING?t.isDo()?i.model:n?(i.model.requestID=e,!0):i.model:i.status===r.FAILED?i.model._canRequest()?(this._createRequest(t,e),!0):(t.status=t.STATUS.ERROR,this.done(t,!0),!1):!t.isValid()&&(!!t._canRequest()&&(this._createRequest(t,e),!0))):t.isValid()?!(!n||t.requestID===e)&&(this._createRequest(t,e),!0):!!t.canRequest()&&(this._createRequest(t,e),!0)},done:function(t,e){var n=this._keys[t.key];n&&(t.isValid()||e?n.status=this.STATUS.DONE:n.status=this.STATUS.FAILED)},clean:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.retries=0,delete this._keys[r.key]}},_createRequest:function(t,e){this._keys[t.key]={status:this.STATUS.LOADING,model:t},t.prepareRequest(e)}}},6342:function(t,e){function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ns.router=function(t,e){var n=ns.router.baseDir,r=ns.router._routes;if(0!==t.indexOf(n))return{page:ns.R.NOT_APP_URL,params:{},redirect:t};(t=t.substring(n.length))||(t="/");var o=ns.router._processRedirect(r.redirect,t,e);if(o)return{page:ns.R.REDIRECT,params:{},redirect:n+o};var i=t.split("?"),s=i.shift();if(s in r.rewriteUrl){var a=i.join("?");t=r.rewriteUrl[s]+(a?"?"+a:"")}for(var u=r.route,c=0,l=u.length;c<l;c++){var f=u[c],p=ns.router._parseUrl(f,t);if(p)return f.page in r.rewriteParams&&(p=r.rewriteParams[f.page](p)),{page:f.page,params:p}}return{page:ns.R.NOT_FOUND,params:{}}},ns.router.encodeParamValue=encodeURIComponent,ns.router.decodeParamValue=decodeURIComponent,ns.router.URL_FIRST_SYMBOL="#",ns.router._getParamsRouteFromUrl=function(t,e){for(var n,r=t.params,o={},i=r.length,s=0;s<i;s++){n=r[s];var a=e[s+1];if(a)try{a=ns.router.decodeParamValue(a,n.name)}catch(t){a=""}a||(a=n.default_value),o[n.name]=a}return o},ns.router._parseUrl=function(t,e){var n=t.regexp.exec(e);if(n){var r=ns.router._getParamsRouteFromUrl(t,n),o=n[t.params.length+1];return o&&no.extend(r,ns.parseQuery(o)),r}return null},ns.router._processRedirect=function(t,e){for(var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,s=t.length;i<s;i++){var a=t[i];if("function"==typeof a.path){var u=ns.router._parseUrl(a,e);u&&(n=a.path(r({},u,{},o),e))}else a.regexp.test(e)&&(n=a.path);if(n)return n}return null},ns.router.init=function(){var t=ns.router.routes;ns.router._regexps={};for(var e in ns.router.regexps)ns.router._regexps[e]=new RegExp("^"+ns.router.regexps[e]+"$");var n={};n.redirect=t.redirect||{},n.rewriteUrl=t.rewriteUrl||{},n.rewriteParams=t.rewriteParams||{};var r=t.route||{},o=[],i={};for(var s in r){var a=r[s],u=ns.router.compile(s);u.page=a,o.push(u),i[a]=i[a]||[],i[a].push(u)}n.route=o,n.routeHash=i;var c=t.redirect||{},l=[];for(var f in c){var u=ns.router.compile(f);l.push({regexp:u.regexp,path:c[f],params:u.params})}n.redirect=l,ns.router._routes=n},ns.router.url=function(t){return ns.router.baseDir+t||"/"},ns.router.generateUrl=function(t,e){e=e||{},delete e.threaded,delete e["_actions-dropdown-type"],(e.attachments||e.unread)&&(delete e.extra_cond,delete e.goto);var n,r=ns.router._routes.routeHash[t];e=e||{},ns.assert(r&&r.length,"ns.router","Could not find route with id '%s'!",t);for(var o=0;o<r.length&&null===(n=ns.router._generateUrl(r[o],e));o++);return ns.assert(null!==n,"ns.router","Could not generate url for layout id '%s'!",t),ns.router.url(n)},ns.router.buildFoldersUrls=function(){var t=ns.Model.get("folders"),e=t.symbols();for(var n in e)ns.router.routes.rewriteUrl["#"+n]="#folder/"+e[n]},ns.router._generateUrl=function(t,e){for(var n,r,o,i,s,a=[],u=no.extend({},e),c=ns.router._routes.rewriteUrl,l=0;l<t.sections.length;l++){r=t.sections[l],o="";for(var f=0;f<r.items.length;f++)if(s=r.items[f],s.name){i=e[s.name];var p=s.name in e;if(s.is_optional&&!p&&(i=s.default_value),s.is_filter&&i!==s.filter_value)return null;if(!s.is_optional&&!p)return null;if(s.is_optional&&!p)continue;if(i=ns.router.encodeParamValue(i,s.name),!ns.router._isParamValid(i,s.type))return null;o+=i,delete u[s.name]}else o+=s.default_value;!o&&r.is_optional||a.push(o)}n=a.join("/"),n=n?ns.router.URL_FIRST_SYMBOL+n:"";for(var h=!0;h;){h=!1;for(var d in c){var v=c[d],y=v.length;if(n.substr(0,y)===v){var _=n.charAt(y);"/"!==_&&"?"!==_&&_||(n=d+n.substr(v.length),h=!0)}}}var g=ns.params2query(u);return g?n+"?"+g:n},ns.router.compile=function(t){t=t.replace(/\/$/,""),t[0]===ns.router.URL_FIRST_SYMBOL&&(t=t.substr(1));var e=t.split("/"),n=e.map(ns.router._parseSection),r=n.map(ns.router._generateSectionRegexp);"/"===r[0][0]&&(r[0]=ns.router.URL_FIRST_SYMBOL+r[0].substr(1));var o=r.join(""),i=[];return n.forEach((function(t){i=i.concat(t.items.filter((function(t){return Boolean(t.name)})))})),o="^"+o+"/?(?:\\?(.*))?$",{regexp:new RegExp(o),params:i,sections:n}},ns.router._parseSection=function(t){for(var e=0,n=-1,r=-1,o=[];;){if((n=t.indexOf("{",e))<0)break;r=t.indexOf("}",n),ns.assert(r>0,"ns.router","could not parse parameter in url section: %s",t),n>e&&o.push({default_value:t.substr(e,n-e)}),o.push(ns.router._parseParam(t.substr(n+1,r-n-1))),e=r+1}return e<t.length&&o.push({default_value:t.substr(e)}),{is_optional:o.length&&o.filter((function(t){return t.is_optional})).length===o.length,items:o}},ns.router._parseParam=function(t){var e,n,r,o,i,s,a=!1;e=t.split("=");var u=e[0].split(":");return s=u[0],n=u[1]||"id",3===e.length?(o=!1,a=!0,i=e[2],ns.assert(i,"ns.router","Parameter '%s' value must be specified",s),ns.assert(ns.router._isParamValid(i,n),"ns.router","Wrong value for '%s' parameter",s)):(o=2===e.length,r=e[1]),{name:s,type:n,default_value:r,is_optional:o,is_filter:a,filter_value:i}},ns.router._generateSectionRegexp=function(t){var e="";return t.items.forEach((function(t){e+=ns.router._generateParamRegexp(t)})),e=t.is_optional?"(?:/(?!/)"+e+")?":"/"+e},ns.router._generateParamRegexp=function(t){var e,n=ns.router.regexps;return t.default_value&&!t.name?t.default_value:(t.type&&ns.assert(t.type in n,"ns.router","Could not find regexp for type '%s'!",t.type),t.is_filter&&t.filter_value?e="("+t.filter_value+")":(e=n[t.type],e="("+e+")",t.is_optional&&(e="(?:"+e+")?")),e)},ns.router._isParamValid=function(t,e){var n=ns.router._regexps[e];return ns.assert(n,"ns.router","Could not find regexp for type '%s'!",e),n.test(t)},ns.router._reset=function(){this.baseDir="",this._routes=null,this.routes={},this.regexps={id:"[A-Za-z_][A-Za-z0-9_-]*",int:"[0-9]+"}},ns.router._reset()},6343:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(685),o=n.n(r),i=n(1480),s=n.n(i),a=n(6344),u=n.n(a);!(function(){function t(t){for(var e={},n=[],r=0,o=t.length;r<o;r++){var i=t[r].models;for(var s in i){var a=i[s],u=a.key;e[u]||(n.push(a),e[u]=!0)}}return n}function e(t){return t.parentUpdate?e(t.parentUpdate):t.EXEC_FLAG===ns.U.EXEC.PARALLEL}ns.Update=function(t,e,n,o){if(this.view=t,!(this.view.id in e))throw new Error("[ns.Update] Can't find view layout");this.layout=e[this.view.id],this.params=n,this.id=++r,this.promise=new Vow.Promise,o=o||{},this.EXEC_FLAG=o.execFlag||ns.U.EXEC.GLOBAL,this.parentUpdate=o.parentUpdate,this.log("created instance",this,"with layout",this.layout,"and params",this.params),this.startTimer("full"),o.timers&&(this._profileTimes.__parent=o.timers),ns.Update._addToQueue(this)||this.abort()},no.extend(ns.Update.prototype,ns.profile);var n=[],r=-1;ns.Update.prototype.STATUS=ns.U.STATUS,ns.Update.prototype._EVENTS_ORDER=["ns-view-hide","ns-view-htmldestroy","ns-view-htmlinit","ns-view-async","ns-view-show","ns-view-touch"],ns.Update.prototype._requestCount=0,ns.Update.prototype.log=function(){if(ns.DEBUG){var t=Array.prototype.slice.apply(arguments);"generated html"===t[0]&&(t[1]=ns.html2node(t[1])),ns.log.debug.apply(ns.log,["[ns.Update]",this.id].concat(t))}},ns.Update.prototype._requestModels=function(t){var e="requestModels."+this._requestCount;if(this.startTimer(e),this.log("started models request",t),!this._checkModelsInvalid(t))return this.stopTimer(e),this.log("received models",t),Vow.fulfill(t);var n=ns.request.models(t);return n.always((function(){this.stopTimer(e)}),this),n.then(this._onRequestModelsOK,this._onRequestModelsError,this)},ns.Update.prototype._onRequestModelsOK=function(t){return this.log("received models",t),t},ns.Update.prototype._onRequestModelsError=function(t){this.log("failed to receive models",t);var e={error:this.STATUS.MODELS,expired:this._expired(),invalidModels:t.invalid,validModels:t.valid};return ns.Update.handleError(e,this)?[].concat(t.invalid,t.valid):Vow.reject(e)},ns.Update.prototype._checkModelsInvalid=function(t){return(t||[]).some((function(t){return!t.isValid()}))},ns.Update.prototype._getActiveViews=function(){var t="collectModels."+this._requestCount;this.startTimer(t);var e={sync:[],async:[],hasPatchLayout:!1};return this.view.destroyed||this.view._getRequestViews(e,this.layout,this.params),this.stopTimer(t),this.log("collected incomplete views",e),e},ns.Update.prototype._requestSyncModels=function(){var e=this._getActiveViews(),n=t(e.sync);return this.log("collected needed models",n),this._requestModels(n).then((function(t){if(e.hasPatchLayout&&!this._checkModelsInvalid(t))return this._requestCount++,this._requestSyncModels()}),null,this)},ns.Update.prototype._requestAllModels=function(){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);var e=new Vow.Promise,n=this._getActiveViews(),r=t(n.sync);this.log("collected needed models",r);var o=this._requestModels(r),i=n.async.map((function(t){return t.updateAfter(this.promise,this.params,this)}),this);return o.then((function(t){if(n.hasPatchLayout&&!this._checkModelsInvalid(t))return this._requestCount++,void e.sync(this._requestAllModels());e.fulfill({async:i})}),(function(t){e.reject(t)}),this),e},ns.Update.prototype._applyLayout=function(){this._getActiveViews()},ns.Update.prototype._generateHTML=function(){return this._expired()?this._rejectWithStatus(this.STATUS.EXPIRED):Vow.fulfill(this._renderUpdateTree())},ns.Update.prototype._renderUpdateTree=function(){this.startTimer("collectViews");var t={views:{}};this.view.destroyed||this.view._getUpdateTree(t),this.log("created render tree",t),this.stopTimer("collectViews");var e;return ns.object.isEmpty(t.views)||(this.startTimer("generateHTML"),e=this.applyTemplate(t,this.params,this.layout),this.log("generated html",e),this.stopTimer("generateHTML")),e},ns.Update.prototype._insertNodes=function(t){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);this.startTimer("triggerHideEvents");var e={"ns-view-hide":[],"ns-view-htmldestroy":[]};this.view.destroyed||this.view.beforeUpdateHTML(e,!1),this._triggerViewEvents(e);var n={"ns-view-async":[],"ns-view-htmlinit":[],"ns-view-show":[],"ns-view-touch":[]};return this.switchTimer("triggerHideEvents","insertNodes"),this.view.destroyed||this.view._updateHTML(t,{toplevel:!0},n),this.switchTimer("insertNodes","triggerEvents"),this._triggerViewEvents(n),this.stopTimer("triggerEvents"),Vow.fulfill()},ns.Update.prototype._triggerViewEvents=function(t){for(var e=this.getTimers(),n=0,r=this._EVENTS_ORDER.length;n<r;n++)for(var o=this._EVENTS_ORDER[n],i=t[o]||[],s=i.length-1;s>=0;s--)i[s].trigger(o,this.params,e)},ns.Update.prototype._updateDOM=function(){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);var t=this._renderUpdateTree();this.startTimer("html2node");var e=ns.html2node(t||"");this.stopTimer("html2node"),this._insertNodes(e)},ns.Update.prototype.prefetch=function(){return this.log("started `prefetch` scenario"),this._requestSyncModels().then(this._fulfill,this._reject,this),this.promise},ns.Update.prototype.generateHTML=function(){return this.log("started `generateHTML` scenario"),Vow.invoke(this._requestSyncModels.bind(this)).then(this._generateHTML,null,this).then(this._fulfill,this._reject,this),this.promise},ns.Update.prototype.prerender=function(){return this.log("started `prerender` scenario"),ns.todo(),this.promise},ns.Update.prototype.render=function(){return this._expired()?(this._reject({error:this.STATUS.EXPIRED}),this.promise):(this.log("started `render` scenario"),Vow.invoke(this._requestAllModels.bind(this)).then((function(t){this._updateDOM(),this._fulfill(t)}),this._reject,this).then(null,this._reject,this),this.promise)},ns.Update.prototype.start=ns.Update.prototype.render,ns.Update.prototype.reconstruct=function(t){return this.log("started `reconstruct` scenario"),this._applyLayout(),Vow.invoke(this._insertNodes.bind(this),t).then((function(){this._fulfill({async:[]})}),this._reject,this),this.promise},ns.Update.prototype.applyTemplate=function(t){return ns.renderString(t,null,"common")},ns.Update.prototype._expired=function(){return this.promise.isResolved()||-1===n.indexOf(this)},ns.Update.prototype.abort=function(){this._reject({error:ns.U.STATUS.EXPIRED})},ns.Update.prototype._fulfill=function(t){this.promise.isResolved()||(ns.Update._removeFromQueue(this),this.stopTimer("full"),this.promise.fulfill(t),this.perf(this.getTimers()),this.log("successfully finished scenario"))},ns.Update.prototype._reject=function(t){this.promise.isResolved()||(ns.Update._removeFromQueue(this),this.stopTimer("full"),this.promise.reject(t),this.log("scenario was rejected with reason",t))},ns.Update.prototype._rejectWithStatus=function(t){return Vow.reject({error:t})},ns.Update.prototype.isGlobal=function(){return this.EXEC_FLAG===ns.U.EXEC.GLOBAL},ns.Update.prototype.perf=function(t){try{this._logPerfTimings(t)}catch(t){Jane.ErrorLog.sendException("LongRunError",t)}},ns.Update.prototype._logPerfTimings=function(t){var e=ns.Update.calcPerformanceTimings(t);ns.DEBUG&&this.log("perf",t,e),e.allTime>2e3?this._sendLongRun("LongRun2",e,t):e.selfTime>1e3&&this._sendLongRun("LongRun",e,t)},ns.Update.calcPerformanceTimings=function(t){var e={allTime:0,allSumTime:0,requestTime:0,selfTime:0};for(var n in t)if("_"!==n.charAt(0)){var r=t[n];r.toString().length>10&&(r=Date.now()-r),"full"===n?e.allTime=r:0===n.indexOf("requestModels")?e.requestTime+=r:e.allSumTime+=r,e[n]=r}return e.selfTime=e.allTime-e.requestTime,e},ns.Update.prototype._sendLongRun=function(t,e,n){var r={event:t,block:this.view.id,theme:Daria.themeId,allTime:e.allTime,requestTime:e.requestTime,selfTime:e.selfTime};for(var o in n)r["perf."+o]=n[o];Jane.ErrorLog.send(r)},ns.Update.handleError=function(t,e){if(u()("outputError",t,e)(e.view))return!0;if(t.expired)return!1;var n,r=!1,i=[];return t.invalidModels&&(n=ns.Model.collectErrorData(t.invalidModels),t.invalidModels.forEach((function(t){"message"!==t.id&&"message-body"!==t.id||t.exists()||(r=!0,i.push(o()(t,"params.ids")))}))),r?(Jane.ErrorLog.send({errorType:"no_such_message",pageType:ns.page.current.page||"",pageReferrer:Daria.Page.referrer||"",pagePrevious:ns.page.history.getPrevious()||"",params:ns.params2query(ns.page.current.params),noSuchMessageIds:i.join(",")}),e._reject({error:"NO_MESSAGE"}),e.promise.then(null,(function(){var t=ns.page.current.params.ids||ns.page.current.params.thread_id;t&&s()(i,t)&&ns.page.go("#no-message")}))):(Jane.ErrorLog.send({errorType:"RunFailed",type:t.error},JSON.stringify(n)),e.EXEC_FLAG===ns.U.EXEC.GLOBAL&&(e.promise.then(null,(function(){ns.page.hashReplace(ns.page.history.getPrevious())})),Daria.Statusline.show({name:"cant_load_data"}))),!1},ns.Update._removeFromQueue=function(t){var e=n.indexOf(t);e>-1&&n.splice(e,1)},ns.Update._addToQueue=function(t){var r,o,i=n,s=ns.U.EXEC,a=s.GLOBAL,u=s.ASYNC,c=t.EXEC_FLAG;if(c===a){var l=[];for(r=i.length-1;r>=0;r--){var f=i[r];e(f)?l.push(f):f.abort()}n=l}else if(c===u&&!e(t))for(r=0,o=i.length;r<o;r++)if(i[r].EXEC_FLAG===a)return!1;return n.push(t),!0}})()},6344:function(t,e,n){var r=n(2017),o=n(698),i=o((function(t,e){return function(n){return r(n,t,e)}}));t.exports=i},6345:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(88),i=n.n(o),s=n(6346),a=n.n(s);!(function(){var t=/ns-view-id-\d+/;ns.View=function(){},no.extend(ns.View.prototype,ns.Events),ns.View.prototype.STATUS=ns.V.STATUS,ns.View.prototype._$document="undefined"==typeof document?null:$(document),ns.View.prototype._$window="undefined"==typeof window?null:$(window),ns.View.prototype.key=null,ns.View.prototype.params=null,ns.View.prototype.node=null,ns.View.prototype.$node=null,ns.View.prototype.views=null,ns.View.prototype.id=null,ns.View.prototype._visible=!1,ns.View.prototype.__uniqueId=null,ns.View.prototype.__modelsEventsBinded=!1,ns.View.prototype._init=function(t,e,n){this.id=t,this.__setUniqueId(),this.async=n,this.info=ns.View.info(t),no.extend(this,ns.View.getKeyAndParams(this.id,e||{},this.info)),this._initModels(),this._modelsVersions={},this.views={},this.status=this.STATUS.NONE,this.destroyed=!1,this.__customInit(),this._bindCreateEvents(),this.trigger("ns-view-init")},ns.View.prototype.__customInit=no.nop,ns.View.prototype._initModels=function(){this.models={},this._modelsHandlers={};for(var t in this.info.models)if(!this.models[t]){var e=ns.Model.get(t,this.params);this.models[t]=e,this._modelsHandlers[e.key]={}}},ns.View.prototype._getView=function(t){return this.views[t]},ns.View.prototype._addView=function(t,e,n){var r=this._getView(t);return r||(r=n===ns.L.BOX?new ns.Box(t,e):ns.View.create(t,e,n===ns.L.ASYNC),this.views[r.id]=r),r},ns.View.prototype.__onHtmldestroy=function(){this._unbindEvents("init")},ns.View.prototype._htmlinit=function(t){this._bindEvents("init"),t.push(this)},ns.View.prototype.hideAndUnbindEvents=function(){this.__onHide()},ns.View.prototype.__onHide=function(){!this.isLoading()&&!0===this._visible&&this._unbindEvents("show"),this._visible=!1},ns.View.prototype._show=function(t){return!this.isLoading()&&!this._visible&&(this.__modelsEventsBinded||this.__bindModelsEvents(),this._bindEvents("show"),this._visible=!0,t&&t.push(this),!0)},ns.View.prototype.__bindModelsEvents=function(){this.__modelsEventsBinded=!0;var t=this.models;for(var e in t){var n=t[e];this.__bindModelEvents(n)}},ns.View.prototype.__bindModelEvents=function(t){var e=this.info.models[t.id];for(var n in e){var r=e[n],o=this[r]||e[n];ns.View.assert("function"==typeof o,4,[this.id,r,t.id]),o===this.keepValid&&(o=no.nop),this.__bindModelEvent(t,n,this._invokeModelHandler.bind(this,o,t))}},ns.View.prototype._invokeModelHandler=function(t,e){return this._saveModelVersion(e.id),t.apply(this,Array.prototype.slice.call(arguments,2))},ns.View.prototype.__bindModelEvent=function(t,e,n){t.on(e,n),this._modelsHandlers[t.key][e]=n},ns.View.prototype.__unbindModelsEvents=function(){var t=this.models;for(var e in t){var n=t[e];this.__unbindModelEvent(n)}},ns.View.prototype.__unbindModelEvent=function(t){var e=this._modelsHandlers[t.key];for(var n in e)t.off(n,e[n]),delete e[n]},ns.View.prototype._prepareCallback=function(t){if("string"==typeof t){var e=this[t];return ns.View.assert(Boolean(e),5,[t,this.id]),e}return t},ns.View.prototype._bindEventHandlers=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r],s=[].concat(i);s[e]=this._prepareCallback(i[e]).bind(this),n.push(s)}return n},ns.View.prototype._getEvents=function(t){var e="_"+t+"Events";if(!this[e]){var n=this.info[t+"Events"],r=this.info[t+"Nsevents"];this[e]={bind:this._bindEventHandlers(n.bind,2),delegate:this._bindEventHandlers(n.delegate,2),nsevents:this._bindEventHandlers(r,1)}}return this[e]},ns.View.prototype._bindEvents=function(t){var e,n,r,o=this.$node,i=this._getEvents(t),s=i.delegate;for(e=0,n=s.length;e<n;e++)r=s[e],"window"===r[1]||"document"===r[1]?this["_$"+r[1]].on(r[0],r[2]):r[1]?o.on(r[0],r[1],r[2]):o.on(r[0],r[2]);var a=i.bind;for(e=0,n=a.length;e<n;e++)r=a[e],o.find(r[1]).on(r[0],r[2]);var u=i.nsevents;for(e=0,n=u.length;e<n;e++)r=u[e],ns.events.on(r[0],r[1])},ns.View.prototype._bindCreateEvents=function(){for(var t=0,e=this.info.createEvents.length;t<e;t++){var n=this.info.createEvents[t];this.on(n[0],this._prepareCallback(n[1]))}},ns.View.prototype._unbindEvents=function(t){var e,n,r,o=this.$node,i=this._getEvents(t),s=i.delegate;for(e=0,n=s.length;e<n;e++)r=s[e],"window"===r[1]||"document"===r[1]?this["_$"+r[1]].off(r[0],r[2]):r[1]?o.off(r[0],r[1],r[2]):o.off(r[0],r[2]);var a=i.bind;for(e=0,n=a.length;e<n;e++)r=a[e],o.find(r[1]).off(r[0],r[2]);var u=i.nsevents;for(e=0,n=u.length;e<n;e++)r=u[e],ns.events.off(r[0],r[1])},ns.View.prototype.invalidate=function(){for(var t=this._getDescendantsAndSelf(),e=0,n=t.length;e<n;e++){var r=t[e];r.status===this.STATUS.OK&&(r.status=this.STATUS.INVALID)}},ns.View.prototype.isOk=function(){return this.status===this.STATUS.OK},ns.View.prototype.isLoading=function(){return this.status===this.STATUS.LOADING},ns.View.prototype.isNone=function(){return this.status===this.STATUS.NONE},ns.View.prototype.isValid=function(){return this.isOk()&&this.isModelsValidWithVersions()},ns.View.prototype.isValidSelf=ns.View.prototype.isValid,ns.View.prototype.isValidWithDesc=function(){if(!this.isValid())return!1;for(var t in this.views)if(!this.views[t].isValidWithDesc())return!1;return!0},ns.View.prototype.isModelsValidWithVersions=function(){return this.isModelsValid(this._modelsVersions)},ns.View.prototype.isModelsValid=function(t){var e=this.models;for(var n in e){if(!e[n].isValid()||t&&this._getModelVersion(n)>t[n])return!1}return!0},ns.View.prototype.isVisible=function(){return this._visible},ns.View.prototype._apply=function(t){var e=this.views;for(var n in e)t(e[n],n)},ns.View.prototype._saveLayout=function(t){this.layout={},this.layout[this.id]={views:t}},ns.View.prototype._getRequestViews=function(t,e,n){var r=this.__evaluateState();this.__registerInUpdate(r,t);var o=!1;r&&(o=!0,"function"==typeof this.patchLayout&&(this.isModelsValid()?this.__patchLayout(e,n):(o=!1,t.hasPatchLayout=!0)));var i=e.views;if(this._saveLayout(i),o){for(var s in i)this._addView(s,n,i[s].type);var a=this.id;this._apply((function(e,r){var o=i[r];ns.View.assert(Boolean(o),13,[a]),e._getRequestViews(t,o,n)}))}return t},ns.View.prototype.__patchLayout=function(t,e){t.views={};var n=this.patchLayout(e);ns.View.assert(Boolean(n),11);var r=ns.layout.page(n,e);this.__checkPatchLayout(r),no.extend(t.views,r)},ns.View.prototype.__checkPatchLayout=function(t){for(var e in t)ns.View.assert(t[e].type===ns.L.BOX,12)},ns.View.prototype.__evaluateState=function(){this.asyncState=!1;var t=!0;return this.async?this.shouldBeSync||this.isModelsValid()?t=!0:(this.asyncState=!0,t=!1):(this.isValidSelf()||this.invalidate(),t=!0),this.shouldBeSync=!1,t},ns.View.prototype.__registerInUpdate=function(t,e){t?e.sync.push(this):e.async.push(this)},ns.View.prototype._getUpdateTree=function(t){return this.isValid()?this._apply((function(e){e._getUpdateTree(t)})):t.views[this.id]=this._getViewTree(),t},ns.View.prototype._getCommonTree=function(){var t={box:this.info.isBox,collection:this.info.isCollection,id:this.id,key:this.key,models:{},params:this.params,state:this.asyncState?"loading":"ok",tree:{},uniqueId:this.__uniqueId,views:{}};return t.tree[this.id]=!0,t},ns.View.prototype._getTree=function(){var t=this._getCommonTree(),e=this.patchTree(t);return e&&"object"===r(e)&&!Array.isArray(e)&&(t=no.extend(e,t)),t},ns.View.prototype._getViewTree=function(){var t=this._getTree();return t.models=this._getModelsForTree(),"loading"===t.state?t:(this.isModelsValid()?t.views=this._getDescViewTree():t.state="error",t)},ns.View.prototype.patchTree=no.nop,ns.View.prototype._getDescViewTree=function(){var t={};return this._apply((function(e,n){t[n]=e._getViewTree()})),t},ns.View.prototype._getPlaceholderTree=function(){var t=this._getTree();return t.state="placeholder",this.info.isCollection?t.views=this._getDescViewTree():this._apply((function(e){e._getUpdateTree(t)})),t},ns.View.prototype._getModelsForTree=function(){var t={},e=this.models;for(var n in e){var r=e[n];t[n]={},r.isValid()?(t[n].status="ok",t[n][n]=r.getData()):(t[n].status="error",t[n][n]=r.getError())}return t},ns.View.prototype.getModel=function(t){return this.models[t]},ns.View.prototype.getModelData=function(t,e){var n=this.getModel(t);return e?n.get(e):n.getData()},ns.View.prototype._getDescendantsAndSelf=function(t){return t=t||[],t.push(this),this._apply((function(e){e._getDescendantsAndSelf(t)})),t},ns.View.prototype._setNode=function(t){var e=this.STATUS;t?(this.node=t,this.$node=$(t),this.status=this.asyncState?e.LOADING:e.OK):this.status=e.NONE},ns.View.prototype._extractNodeByKey=function(e){var n=e.querySelector('[data-key="'+this.key+'"]');if(!n)return null;var r=n.className;return-1===r.indexOf(this.__uniqueId)&&(n.className=r.replace(t,this.__uniqueId)),n},ns.View.prototype._extractNode=function(t){var e=ns.byClass(this.__uniqueId,t)[0];return e&&e.getAttribute("data-key")===this.key||(e=this._extractNodeByKey(t)),e},ns.View.prototype._selfBeforeUpdateHTML=function(t,e){if(e){return void(!0===this._visible&&!this.isLoading()&&t["ns-view-hide"].push(this))}!this.isValidSelf()&&this.node&&!this.isLoading()&&(!0===this._visible&&t["ns-view-hide"].push(this),t["ns-view-htmldestroy"].push(this))},ns.View.prototype.beforeUpdateHTML=function(t,e){this._selfBeforeUpdateHTML(t,e),this.asyncState||this._apply((function(n){n.beforeUpdateHTML(t,e)}))},ns.View.prototype._updateHTML=function(t,e,n){var r;r=e.toplevel?no.extend({},e):e;var o,i=t?this._extractNode(t):null,s=!this.isValid(),a=this.isValid()&&this.node&&i&&i!==this.node&&e.parent_added&&!e.toplevel;(s||a)&&(o=i,ns.View.assert(Boolean(o),6,[this.id]),e.toplevel&&(this.node&&(ns.replaceNode(this.node,o),r.parent_added=!0),r.toplevel=!1),this.node&&!this.isLoading()&&(this.__onHide(),this.__onHtmldestroy()),!this.node||e.parent_added||r.parent_added||ns.replaceNode(this.node,o),this._setNode(o),this.isOk()?this._htmlinit(n["ns-view-htmlinit"]):this.isLoading()&&n["ns-view-async"].push(this),this._saveModelsVersions()),this.isOk()&&(this._show(n["ns-view-show"]),n["ns-view-touch"].push(this)),o=o||t,this.asyncState||this._apply((function(t){t._updateHTML(o,r,n)}))},ns.View.prototype._saveModelsVersions=function(){for(var t in this.models)this._saveModelVersion(t)},ns.View.prototype._getModelVersion=function(t){return this.models[t].getVersion()},ns.View.prototype._saveModelVersion=function(t){this._modelsVersions[t]=this._getModelVersion(t)},ns.View.prototype.keepValid=ns.View.prototype._saveModelsVersions,ns.View.prototype.updateAfter=function(t,e,n){this._asyncPromise=new Vow.Promise;var r=this;return t.then((function(){r.update(e,{parentUpdate:n,timers:n.getTimers()})})),this._asyncPromise},ns.View.prototype.update=function(t,e){this.shouldBeSync=!0;var n=this.params;if(t&&(n=no.extend({},this.params,t)),!this.layout){var r="ns-temp-layout-for-"+this.id,o={};o[this.id]={},ns.layout.define(r,o),this.layout=ns.layout.page(r,n),ns.layout.undefine(r)}e=e||{},e.execFlag=e.execFlag||ns.U.EXEC.ASYNC;var i=new ns.Update(this,this.layout,n,e).render();return this._asyncPromise&&this._asyncPromise.sync(i),i},ns.View.prototype.destroy=function(){this._apply((function(t){t.destroy()})),this.trigger("ns-view-destroyed"),this.views={},this.node&&!this.isLoading()&&(this.isVisible()&&(this.trigger("ns-view-hide"),this.hideAndUnbindEvents()),this.trigger("ns-view-htmldestroy"),this.__onHtmldestroy()),this.__unbindModelsEvents(),this.node&&(this.$node.off().removeData().remove(),this.node=null,this.$node=null),this.info=null,this.layout=null,this.models=null,this.params=null,this.status=this.STATUS.NONE,this.destroyed=!0,this._modelsHandlers=null};var e={},n={};ns.View.define=function(t,r,o){ns.View.assert(!(t in e),1,[t]),r=r||{};var i=this;"string"==typeof o?(i=n[o],ns.View.assert(Boolean(i),2,[o,t])):"function"==typeof o&&(i=o);var s=r.ctor||function(){};return s=no.inherit(s,i,r.methods),r.models=this._formatModelsDecl(r.models||{}),r.events=r.events||{},r.isBox=!1,r.isCollection=!1,r.ready=!1,e[t]=r,n[t]=s,s},ns.View._reset=function(){n={},e={}},ns.View.infoLite=function(t){var n=e[t];return ns.View.assert(Boolean(n),3,[t]),n},ns.View.info=function(t){var e=ns.View.infoLite(t);return e.ready||(ns.View._initInfoParams(e),ns.View._initInfoEvents(e),e.ready=!0),e},ns.View._initInfoParams=function(t){if(t.params){if(ns.View.assert(!t["params+"],7),ns.View.assert(!t["params-"],8),"function"==typeof t.params)return void(t.pGroups=[]);var e,n=[];e=Array.isArray(t.params)?t.params:[t.params];for(var o=0;o<e.length;o++){var i=e[o];n.push({pNames:Object.keys(i),pFilters:i,pDefaults:{}})}t.pGroups=n}else{var s={};for(var a in t.models){var u=ns.Model.info(a);ns.View.assert(Boolean(u),9,[a]),"object"===r(u.params)&&no.extend(s,u.params)}var c=t["params-"];if(c){for(var o=0;o<c.length;o++)delete s[c[o]];delete t["params-"]}t["params+"]&&(no.extend(s,t["params+"]),delete t["params+"]);var l=Object.keys(s);l.length?t.pGroups=[{pNames:l,pFilters:{},pDefaults:s}]:t.pGroups=[]}},ns.View._initInfoEvents=function(t){t.createEvents=[],t.initEvents={bind:[],delegate:[]},t.showEvents={bind:[],delegate:[]},t.initNsevents=[],t.showNsevents=[];for(var e in t.events){var n=e.split(" "),r=n.shift().split("@"),o=r.length>1?r.pop():"";o=!o||"init"!==o&&"show"!==o?"":o;var i=r.join("@"),s=n.join(" ");if(i){var a=t.events[e];if(ns.V.DOM_EVENTS.indexOf(i)>-1){var u=[i,s,t.events[e]],c="window"===s||"document"===s,l=c||!("scroll"===i&&s);o||(o=c?"show":"init"),t[o+"Events"][l?"delegate":"bind"].push(u)}else ns.V.NS_EVENTS.indexOf(i)>-1?t.createEvents.push([i,a]):(o=o||"show",t[o+"Nsevents"].push([i,a]))}}},ns.View.getKey=function(t,e,n){return this.getKeyAndParams(t,e,n).key},ns.View.getKeyAndParams=function(t,e,n){n=n||ns.View.info(t)||{};var r;return r="function"==typeof n.params?n.params(no.extend({},e)):ns.View._getKeyParams(t,e,n),"function"==typeof n.paramsRewrite&&(r=n.paramsRewrite(r)),ns.View.assert(Boolean(r),10,[t]),{params:r,key:ns.key("view="+t,r)}},ns.View._getKeyParams=function(t,e,n){var r={},o=!1;for(var i in n.models){var s=ns.Model.info(i);"function"==typeof s.params&&(o=!0,no.extend(r,s.params(e)))}o&&(no.extend(r,e),e=r);var a=n.pGroups||[];if(!a.length)return o?e:{};for(var u=0;u<a.length;u++){for(var c=a[u],l=c.pNames||[],f=c.pFilters||{},p=c.pDefaults||{},h={},d=0,v=l.length;d<v;d++){var y=l[d],_=e[y],g=f[y],m=y in p;if(null!=(_=void 0===_?p[y]:_)||!m){if(null==_||g&&_!==g){h=null;break}h[y]=_}}if(h)return h}return null},ns.View.create=function(t,e,r){var o=n[t];ns.View.assert(Boolean(o),3,[t]);var i=new o;return i._init(t,e,r),i},ns.View.assert=function(t,e,n){if(!t){n=Array.isArray(n)?n:[];var r=["ns.View",ns.View.ERROR_CODES[e]].concat(n);ns.assert.fail.apply(ns,r)}},ns.View.ERROR_CODES={1:"Can't redefine '%s'",2:"Can't find '%s' to extend '%s'",3:"'%s' is not defined",4:"'%s' can't find handler '%s' for model '%s'",5:"Can't find method '%s' in '%s'",6:"Can't find node for '%s'",7:"you cannot specify params and params+ at the same time",8:"you cannot specify params and params- at the same time",9:"Model %s is not defined!",10:"Could not generate key for view %s",11:"#patchLayout MUST returns valid layout ID",12:"#patchLayout MUST returns layout with ns.Box at top",13:'You cannot change children inside of a regular view. Maybe "%s" should be ns.Box.'},ns.View.defaultModelEvents={"ns-model-insert":"invalidate","ns-model-remove":"invalidate","ns-model-changed":"invalidate","ns-model-destroyed":"invalidate"},ns.View._expandModelsDecl=function(t){if(!Array.isArray(t))return t;for(var e={},n=0,r=t.length;n<r;n++)e[t[n]]=no.extend({},this.defaultModelEvents);return e},ns.View._formatModelsDecl=function(t){var e=this._expandModelsDecl(t);for(var n in e){var r=o(e[n]),i=null;"string"==typeof r&&(i=r,r={});for(var s in this.defaultModelEvents){var a=this.defaultModelEvents[s];void 0===r[s]?r[s]=i||a:r[s]=o(r[s])}e[n]=r}return e};var o=function(t){return!0===t?"invalidate":!1===t?"keepValid":t};ns.View.prototype.logTimings=function(t,e){var n=ns.Update.calcPerformanceTimings(t),r={allTime:0,requestTime:0,selfTime:0};t.__parent&&(r=ns.Update.calcPerformanceTimings(t.__parent));var o={blockname:this.id,request:n.requestTime+r.requestTime,event:"BlockTimings",visibilityState:document.visibilityState,show:n.allTime+r.allTime,browser:Daria.UA.BrowserName};if(o=a()(n,o),Jane.ErrorLog.send(o),Jane.watcher.get("pageVisible")){e=[i.a.ru,i.a.mail,i.a.desktop,i.a.block].concat(e);var s=Ya.Rum.makeSubPage(e.join("."));Ya.Rum.sendDelta(i.a.request,o.request,s),Ya.Rum.sendDelta(i.a.render,o.selfTime,s),Ya.Rum.sendDelta(i.a.show,o.show,s)}},ns.View.prototype.updateByLayout=function(t,e,n){var r=ns.layout.page(t,e);if(n=n||{},n.execFlag=n.execFlag||ns.U.EXEC.ASYNC,this.layout){var o=this.layout[this.id].views;for(var i in o)delete o[i];no.extend(o,r[this.id].views)}else this.layout=r;return new ns.Update(this,this.layout,e,n).render()},ns.View.prototype.forceUpdate=function(){this.info&&!this.info.isCollection&&this.invalidate(),this.lazyUpdate()},ns.View.prototype.lazyUpdate=function(){this.isVisible()&&ns.page.lazyRefresh()},ns.View.isDefined=function(t){var e=!1;try{ns.View.infoLite(t)&&(e=!0)}catch(t){}return e};var s=Math.floor(100*Math.random());ns.View.prototype.__setUniqueId=function(){this.__uniqueId||(this.__uniqueId="ns-view-id-"+ ++s)},ns.View.prototype.patchTree=function(){return{bosphorus:this}}})()},6346:function(t,e,n){t.exports=n(6347)},6347:function(t,e,n){var r=n(462),o=n(2018),i=n(524),s=o((function(t,e){r(e,i(e),t)}));t.exports=s},6348:function(t,e){ns.ViewCollection=function(){},no.extend(ns.ViewCollection,ns.View),no.inherit(ns.ViewCollection,ns.View),ns.ViewCollection.define=function(t,e,n){e=e||{},n=n||this;var r=ns.View.define.call(this,t,e,n);if(ns.assert(e.split,"ns.ViewCollection","'%s'  must define 'split' section",t),ns.assert(!(e.split.intoViews&&e.split.intoLayouts),"ns.ViewCollection","'%s' can't define 'split.intoViews' and 'split.intoLayouts' sections at same time",t),"string"==typeof e.split.intoViews){var o=ns.layout.generateSimple(e.split.intoViews,"ns-auto-layout-"+t);delete e.split.intoViews,e.split.intoLayouts=new Function("",'return "'+o+'"')}else"function"==typeof e.split.intoViews&&(e.split.intoLayouts=function(n,r){var o=e.split.intoViews.call(this,n,r);return o?ns.layout.generateSimple(o,"ns-auto-layout-"+t):null});ns.assert(e.split.intoLayouts,"ns.ViewCollection","'%s'  must define 'split.intoLayouts' section",t),ns.assert(e.split.byModel,"ns.ViewCollection","'%s'  must define 'split.byModel' section",t);var i=e.split.byModel in e.models&&ns.Model.infoLite(e.split.byModel).isCollection;return ns.assert(i,"ns.ViewCollection","'%s'  must depend on ns.ModelCollection",t),e.isCollection=!0,e.modelCollectionId=e.split.byModel,r},ns.ViewCollection.prototype.__customInit=function(){this.__itemsToRemove=[],this.__model2View={},this.__view2ModelKey={}},ns.ViewCollection.eventsModelCollectionDefault={"ns-model-insert":"keepValid","ns-model-remove":"keepValid","ns-model-changed":"invalidate","ns-model-destroyed":"invalidate"},ns.ViewCollection._expandModelsDecl=function(t){if(!Array.isArray(t))return t;for(var e={},n=0,r=t.length;n<r;n++){var o=t[n];ns.Model.infoLite(o).isCollection?e[o]=no.extend({},this.eventsModelCollectionDefault):e[o]=no.extend({},this.defaultModelEvents)}return e},ns.ViewCollection.prototype._invokeModelHandler=function(t,e,n,r){if(!r||!r.model)return this._saveModelVersion(e.id),t.apply(this,Array.prototype.slice.call(arguments,2))},ns.ViewCollection.prototype._getModelVersion=function(t){var e=this.models[t];return t===this.info.modelCollectionId?e.getSelfVersion():e.getVersion()},ns.ViewCollection.prototype.forEachItem=function(t){var e=this.models[this.info.modelCollectionId];if(e.isValid())for(var n=e.models,r=0,o=n.length;r<o;r++){var i=this.getItemByModel(n[r]);i&&t(i)}},ns.ViewCollection.prototype.getItemByModel=function(t){var e=t.key;return this.__model2View[e]},ns.ViewCollection.prototype.isValid=function(){return this.isValidSelf()&&this.isValidDesc()},ns.ViewCollection.prototype.isValidDesc=function(){for(var t in this.views)if(!this.views[t].isValid())return!1;return!0},ns.ViewCollection.prototype.invalidate=function(){this.status===this.STATUS.OK&&(this.status=this.STATUS.INVALID)},ns.ViewCollection.prototype.invalidateAll=ns.View.prototype.invalidate,ns.ViewCollection.prototype._getView=function(t,e){var n=ns.View.getKey(t,e);return this._getViewByKey(n)},ns.ViewCollection.prototype._getViewByKey=function(t){return this.views&&this.views[t]||null},ns.ViewCollection.prototype._addView=function(t,e,n){var r=this._getView(t,e);if(!r){r=ns.View.create(t,e);var o=r.key,i=n.key;this.views[o]=r,this.__model2View[i]=r,this.__view2ModelKey[o]=i}return r},ns.ViewCollection.prototype._deleteView=function(t){var e=t.key,n=this.__view2ModelKey[e];delete this.views[e],delete this.__model2View[n],delete this.__view2ModelKey[e]},ns.ViewCollection.prototype._apply=function(t){var e=this.views;for(var n in e)t(e[n],e[n].id)},ns.ViewCollection.prototype._getRequestViews=function(t,e,n){var r=e.views,o=this.__evaluateState();if(this.__registerInUpdate(o,t),o){var i=this.models[this.info.modelCollectionId],s={};if(i.isValid()){for(var a=i.models,u=this.info.split.intoLayouts,c=[],l=0,f=a.length;l<f;l++){var p=a[l],h=no.extend({},n,p.params),d=u.call(this,p,h);if(d){var v=ns.layout.page(d,h);c.push(v);for(var y in v){var _=this._addView(y,h,p);_._getRequestViews(t,v[y],h),s[_.key]=null}}}r["ns-view-container"]=c,this.__collectInactiveViews(s)}else t.hasPatchLayout=!0}return this._saveLayout(r),t},ns.ViewCollection.prototype.__collectInactiveViews=function(t){var e=this;this._apply((function(n){n.key in t||(e._deleteView(n),e.__itemsToRemove.push(n))}))},ns.ViewCollection.prototype.__destroyInactiveViews=function(){for(var t=this.__itemsToRemove,e=0,n=t.length;e<n;e++)t[e].destroy();this.__itemsToRemove=[]},ns.ViewCollection.prototype._getUpdateTree=function(t){var e;return e=this.isValidSelf()?this._getPlaceholderTree():this._getViewTree(),t.views[this.id]=e,t},ns.ViewCollection.prototype._getDescViewTree=function(){var t={};t["ns-view-collection-container"]=[];var e=this.isValidSelf();return this.forEachItem((function(n){var r=null;if(e)if(n.info.isCollection&&n.isValidSelf())r=n._getPlaceholderTree();else if(n.isValid()){if(!n.isValidWithDesc()){var o={views:{}};return n._getUpdateTree(o),void t["ns-view-collection-container"].push(o.views)}}else r=n._getViewTree();else r=n.isValidSelf()?n._getPlaceholderTree():n._getViewTree();if(r){var i={};i[n.id]=r,t["ns-view-collection-container"].push(i)}})),t},ns.ViewCollection.prototype._updateHTML=function(t,e,n){var r,o=this._extractNode(t),i=$(o).hasClass("ns-view-placeholder");if(r=e.toplevel?no.extend({},e):e,this.isValidSelf())!e.toplevel&&i&&(ns.replaceNode(o,this.node),r=no.extend({},e),r.toplevel=!0,r.parent_added=!0);else{var s=Boolean(this.node);if(!o)throw new Error("[ns.ViewCollection] Can't find node for '"+this.id+"'");e.toplevel?i?r.toplevel=!0:(this.node&&ns.replaceNode(this.node,o),r.toplevel=!1,r.parent_added=!0,this._setNode(o)):i?(ns.replaceNode(o,this.node),r.toplevel=!1,r.parent_added=!0):this._setNode(o),s&&!this.isLoading()&&(this.__onHide(),this.__onHtmldestroy()),this.isOk()?this._htmlinit(n["ns-view-htmlinit"]):this.isLoading()&&n["ns-view-async"].push(this)}if(this.isOk()&&(this._show(n["ns-view-show"]),n["ns-view-touch"].push(this),this._saveModelsVersions()),!this.isLoading()){var a={},u=this.__getContainer();o=o||this.node;var c;this.forEachItem((function(t){if(i){var e=!t.isValid();t._updateHTML(o,r,n),e&&(c?$(c.node).after(t.node):$(u).prepend(t.node))}else{var s=t.isValid(),l=r;s&&(l=no.extend({},r),l.toplevel=!0),t._updateHTML(o,l,n),s&&ns.replaceNode(t._extractNode(o),t.node)}a[t.key]=t,c=t}))}this.__destroyInactiveViews(),this.isLoading()||this.__sortViewItems()},ns.ViewCollection.prototype.__getContainer=function(){var t;return t=ns.hasClass(this.node,"ns-view-container-desc")?this.node:ns.byClass("ns-view-container-desc",this.node)[0],ns.assert(t,"ns.ViewCollection","Can't find descendants container (.ns-view-container-desc element) for '"+this.id+"'"),t},ns.ViewCollection.prototype.__sortViewItems=function(){var t=this.__getContainer(),e=ns.childrenIterator(t);this.forEachItem((function(n){var r=e.getNext();r!==n.node&&(r?t.insertBefore(n.node,r):t.appendChild(n.node))}))},ns.ViewCollection.prototype.forEachValidItem=function(t){this.forEachItem((function(e){e.isValid()&&t(e)}))}},6349:function(t,e){function n(t,e){return e.forEach((function(e){if("string"==typeof e){var n=ns.View.info(e);t.events=no.extend({},n.events,t.events)}})),e.slice(0,e.length-1).forEach((function(e){if("string"==typeof e){var n=ns.View.info(e);t.methods=no.extend({},n.methods,t.methods)}})),t}[ns.View,ns.ViewCollection].forEach((function(t){t.edefine=function(e,r){return r=r||{},r=n(r,Array.prototype.slice.call(arguments,2)),t.define(e,r,arguments[arguments.length-1])}}))},6350:function(t,e,n){function r(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=t&&(_(t)?t.apply(this,r):y.apply(void 0,[this,t].concat(r))),s=e&&(_(e)?e.apply(this,r):y.apply(void 0,[this,e].concat(r)));!ns.DEBUG||m(i)&&m(s)||k("Обработчик события не должен возвращать результат")}function o(t,e,n){return c(t,e)?e:(("invalidate"===t&&"keepValid"===e||"keepValid"===t&&"invalidate"===e)&&ns.assert.fail("ns.View.define","Попытка определить подписки с противоположными действиями. Событие: %s",n),M(t,M(e,r)))}function i(t,e){return c(t,e)?e:b(t,e,o)}function s(t,e){return c(t,e)?e:t}function a(t,e,n){return c(t,e)?e:"methods"===n?b(t,e,s):"events"===n?i(t,e):"models"===n?b(this._formatModelsDecl(t),this._formatModelsDecl(e),i):"ctor"===n?function(){e&&e.call(this),t&&t.call(this)}:void 0}function u(t){return g(t)&&ns.View.info(t)||t}function c(t,e){return m(t)||t===e}function l(t,e,n){n=f(n);var r=u(n.pop()),o=a.bind(t),i=v(e,"mixins",[]);return i=p(i,n),i=h(i),i.unshift(e),i=E(i,(function(t){return x(u(t),T)})),i.push(o),i=j(i,A),i=b(i,x(r,S),o),i=d(i,e)}var f=n(2013),p=n(6351),h=n(6352),d=n(6353),v=n(685),y=n(6354),_=n(469),g=n(1481),m=n(2016),w=n(893),b=n(6355),x=n(6360),V=n(6364),M=n(6365),E=n(6382),j=n(6384),T=["methods","ctor","events","models"],S=["ctor","events","models"],A=V(b),k=M(y,(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=n.shift();t.apply(void 0,[window,"console.warn","[ns.View.define] "+o].concat(n))})),O=M(y,(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=n.shift();t.apply(void 0,[window,"console.log","[ns.View.define] "+o].concat(n))}));[ns.View,ns.ViewCollection].forEach((function(t){t.defineNg=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return ns.DEBUG&&O("Определение вида %s, mixins: %o, %o",e,o,v(n,"mixins",[])),t.define(e,l(t,n,o),w(o))},t.defineModelEvents=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d({},e,v(t._formatModelsDecl({test:n}),"test"))}}))},6351:function(t,e,n){function r(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return o(a(n)?s(n):[n],i(e,1))}var o=n(463),i=n(675),s=n(562),a=n(378);t.exports=r},6352:function(t,e){function n(t){return null==t?t:o.call(t)}var r=Array.prototype,o=r.reverse;t.exports=n},6353:function(t,e,n){var r=n(698),o=n(449),i=n(936),s=n(524),a=Object.prototype,u=a.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],f=s(l),p=-1,h=f.length;++p<h;){var d=f[p],v=t[d];(void 0===v||o(v,a[d])&&!u.call(t,d))&&(t[d]=l[d])}return t}));t.exports=c},6354:function(t,e,n){var r=n(2017),o=n(698),i=o(r);t.exports=i},6355:function(t,e,n){var r=n(6356),o=n(2018),i=o((function(t,e,n,o){r(t,e,n,o)}));t.exports=i},6356:function(t,e,n){function r(t,e,n,f,p){t!==e&&s(e,(function(s,c){if(p||(p=new o),u(s))a(t,e,c,n,r,f,p);else{var h=f?f(l(t,c),s,c+"",t,e,p):void 0;void 0===h&&(h=s),i(t,c,h)}}),c)}var o=n(523),i=n(2019),s=n(929),a=n(6357),u=n(387),c=n(524),l=n(2020);t.exports=r},6357:function(t,e,n){function r(t,e,n,r,m,w,b){var x=_(t,n),V=_(e,n),M=b.get(V);if(M)return void o(t,n,M);var E=w?w(x,V,n+"",t,e,b):void 0,j=void 0===E;if(j){var T=l(V),S=!T&&p(V),A=!T&&!S&&y(V);E=V,T||S||A?l(x)?E=x:f(x)?E=a(x):S?(j=!1,E=i(V,!0)):A?(j=!1,E=s(V,!0)):E=[]:v(V)||c(V)?(E=x,c(x)?E=g(x):d(x)&&!h(x)||(E=u(V))):j=!1}j&&(b.set(V,E),m(E,V,r,w,b),b.delete(V)),o(t,n,E)}var o=n(2019),i=n(889),s=n(891),a=n(562),u=n(892),c=n(461),l=n(378),f=n(6358),p=n(477),h=n(469),d=n(387),v=n(1253),y=n(520),_=n(2020),g=n(6359);t.exports=r},6358:function(t,e,n){function r(t){return i(t)&&o(t)}var o=n(415),i=n(388);t.exports=r},6359:function(t,e,n){function r(t){return o(t,i(t))}var o=n(462),i=n(524);t.exports=r},6360:function(t,e,n){var r=n(6361),o=n(1254),i=o((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},6361:function(t,e,n){function r(t,e){return o(t,e,(function(e,n){return i(t,n)}))}var o=n(6362),i=n(912);t.exports=r},6362:function(t,e,n){function r(t,e,n){for(var r=-1,a=e.length,u={};++r<a;){var c=e[r],l=o(t,c);n(l,c)&&i(u,s(c,t),l)}return u}var o=n(527),i=n(6363),s=n(465);t.exports=r},6363:function(t,e,n){function r(t,e,n,r){if(!a(t))return t;e=i(e,t);for(var c=-1,l=e.length,f=l-1,p=t;null!=p&&++c<l;){var h=u(e[c]),d=n;if(c!=f){var v=p[h];d=r?r(v,h,p):void 0,void 0===d&&(d=a(v)?v:s(e[c+1])?[]:{})}o(p,h,d),p=p[h]}return t}var o=n(668),i=n(465),s=n(478),a=n(387),u=n(443);t.exports=r},6364:function(t,e,n){function r(t,e){if("function"!=typeof t)throw new TypeError(c);return e=null==e?0:l(u(e),0),s((function(n){var r=n[e],s=a(n,0,e);return r&&i(s,r),o(t,this,s)}))}var o=n(616),i=n(463),s=n(698),a=n(1221),u=n(686),c="Expected a function",l=Math.max;t.exports=r},6365:function(t,e,n){function r(t,e){return i(o(e),t)}var o=n(2014),i=n(6366);t.exports=r},6366:function(t,e,n){var r=n(698),o=n(6367),i=n(1484),s=n(943),a=r((function(t,e){var n=s(e,i(a));return o(t,32,void 0,e,n)}));a.placeholder={},t.exports=a},6367:function(t,e,n){function r(t,e,n,r,x,V,M,E){var j=e&y;if(!j&&"function"!=typeof t)throw new TypeError(d);var T=r?r.length:0;if(T||(e&=~(m|w),r=x=void 0),M=void 0===M?M:b(h(M),0),E=void 0===E?E:h(E),T-=x?x.length:0,e&w){var S=r,A=x;r=x=void 0}var k=j?void 0:c(t),O=[t,e,n,r,x,S,A,V,M,E];if(k&&l(O,k),t=O[0],e=O[1],n=O[2],r=O[3],x=O[4],E=O[9]=void 0===O[9]?j?0:t.length:b(O[9]-T,0),!E&&e&(_|g)&&(e&=~(_|g)),e&&e!=v)C=e==_||e==g?s(t,e,E):e!=m&&e!=(v|m)||x.length?a.apply(void 0,O):u(t,e,n,r);else var C=i(t,e,n);return p((k?o:f)(C,O),t,e)}var o=n(2021),i=n(6368),s=n(6369),a=n(2023),u=n(6380),c=n(2027),l=n(6381),f=n(2029),p=n(2030),h=n(686),d="Expected a function",v=1,y=2,_=8,g=16,m=32,w=64,b=Math.max;t.exports=r},6368:function(t,e,n){function r(t,e,n){function r(){return(this&&this!==i&&this instanceof r?u:t).apply(a?n:this,arguments)}var a=e&s,u=o(t);return r}var o=n(942),i=n(379),s=1;t.exports=r},6369:function(t,e,n){function r(t,e,n){function r(){for(var i=arguments.length,p=Array(i),h=i,d=u(r);h--;)p[h]=arguments[h];var v=i<3&&p[0]!==d&&p[i-1]!==d?[]:c(p,d);return(i-=v.length)<n?a(t,e,s,r.placeholder,void 0,p,v,void 0,void 0,n-i):o(this&&this!==l&&this instanceof r?f:t,this,p)}var f=i(t);return r}var o=n(616),i=n(942),s=n(2023),a=n(2026),u=n(1484),c=n(943),l=n(379);t.exports=r},6370:function(t,e){function n(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}t.exports=n},6371:function(t,e,n){function r(t){var e=s(t),n=a[e];if("function"!=typeof n||!(e in o.prototype))return!1;if(t===n)return!0;var r=i(n);return!!r&&t===r[0]}var o=n(1482),i=n(2027),s=n(6372),a=n(6374);t.exports=r},6372:function(t,e,n){function r(t){for(var e=t.name+"",n=o[e],r=s.call(o,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}var o=n(6373),i=Object.prototype,s=i.hasOwnProperty;t.exports=r},6373:function(t,e){var n={};t.exports=n},6374:function(t,e,n){function r(t){if(u(t)&&!a(t)&&!(t instanceof o)){if(t instanceof i)return t;if(f.call(t,"__wrapped__"))return c(t)}return new i(t)}var o=n(1482),i=n(2028),s=n(1483),a=n(378),u=n(388),c=n(6375),l=Object.prototype,f=l.hasOwnProperty;r.prototype=s.prototype,r.prototype.constructor=r,t.exports=r},6375:function(t,e,n){function r(t){if(t instanceof o)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=s(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var o=n(1482),i=n(2028),s=n(562);t.exports=r},6376:function(t,e){function n(t){var e=t.match(r);return e?e[1].split(o):[]}var r=/\{\n\/\* \[wrapped with (.+)\] \*/,o=/,? & /;t.exports=n},6377:function(t,e){function n(t,e){var n=e.length;if(!n)return t;var o=n-1;return e[o]=(n>1?"& ":"")+e[o],e=e.join(n>2?", ":" "),t.replace(r,"{\n/* [wrapped with "+e+"] */\n")}var r=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=n},6378:function(t,e,n){function r(t,e){return o(s,(function(n){var r="_."+n[0];e&n[1]&&!i(t,r)&&t.push(r)})),t.sort()}var o=n(776),i=n(1327),s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=r},6379:function(t,e,n){function r(t,e){for(var n=t.length,r=s(e.length,n),a=o(t);r--;){var u=e[r];t[r]=i(u,n)?a[u]:void 0}return t}var o=n(562),i=n(478),s=Math.min;t.exports=r},6380:function(t,e,n){function r(t,e,n,r){function u(){for(var e=-1,i=arguments.length,a=-1,f=r.length,p=Array(f+i),h=this&&this!==s&&this instanceof u?l:t;++a<f;)p[a]=r[a];for(;i--;)p[a++]=arguments[++e];return o(h,c?n:this,p)}var c=e&a,l=i(t);return u}var o=n(616),i=n(942),s=n(379),a=1;t.exports=r},6381:function(t,e,n){function r(t,e){var n=t[1],r=e[1],v=n|r,y=v<(u|c|p),_=r==p&&n==f||r==p&&n==h&&t[7].length<=e[8]||r==(p|h)&&e[7].length<=e[8]&&n==f;if(!y&&!_)return t;r&u&&(t[2]=e[2],v|=n&u?0:l);var g=e[3];if(g){var m=t[3];t[3]=m?o(m,g,e[4]):g,t[4]=m?s(t[3],a):e[4]}return g=e[5],g&&(m=t[5],t[5]=m?i(m,g,e[6]):g,t[6]=m?s(t[5],a):e[6]),g=e[7],g&&(t[7]=g),r&p&&(t[8]=null==t[8]?e[8]:d(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=v,t}var o=n(2024),i=n(2025),s=n(943),a="__lodash_placeholder__",u=1,c=2,l=4,f=8,p=128,h=256,d=Math.min;t.exports=r},6382:function(t,e,n){function r(t,e){return(a(t)?o:s)(t,i(e,3))}var o=n(517),i=n(619),s=n(6383),a=n(378);t.exports=r},6383:function(t,e,n){function r(t,e){var n=-1,r=i(t)?Array(t.length):[];return o(t,(function(t,o,i){r[++n]=e(t,o,i)})),r}var o=n(805),i=n(415);t.exports=r},6384:function(t,e){function n(t,e){return e(t)}t.exports=n},6385:function(t,e){ns.Box=function(t,e){this.id=t,this.__setUniqueId(),this.params=e,this.views={},this.key=ns.Box.getKey(t),this.node=null,this.active={},this._visible=!1,this.destroyed=!1,this.info={isBox:!0,isCollection:!1}},ns.Box.prototype._getViewKey=function(t,e,n){return n===ns.L.BOX?ns.Box.getKey(t):ns.View.getKey(t,e)},ns.Box.prototype._getView=function(t,e,n){var r=this._getViewKey(t,e,n);return this.views[r]},ns.Box.prototype._addView=function(t,e,n){var r=this._getView(t,e,n);return r||(r=n===ns.L.BOX?new ns.Box(t,e):ns.View.create(t,e,n===ns.L.ASYNC),this.views[r.key]=r),r},ns.Box.prototype._getDescendantsAndSelf=function(t){var e=this.views;t.push(this);for(var n in e){e[n]._getDescendantsAndSelf(t)}return t},ns.Box.prototype._getRequestViews=function(t,e,n){var r=e.views,o={};for(var i in r){var s=r[i],a=this._addView(i,n,s.type);a._getRequestViews(t,s,n),o[i]=a.key}this.active=o},ns.Box.prototype._getUpdateTree=function(t){if(this.isNone())t.views[this.id]=this._getViewTree();else for(var e in this.active){var n=this.active[e];this.views[n]._getUpdateTree(t)}},ns.Box.prototype._getViewTree=function(){var t=this._getCommonTree();for(var e in this.active){var n=this.active[e];t.views[e]=this.views[n]._getViewTree()}return t},ns.Box.prototype.beforeUpdateHTML=function(t,e){for(var n in this.views){var r=this.views[n],o=e||this.active[r.id]!==r.key;r.beforeUpdateHTML(t,o)}},ns.Box.prototype._hideInactiveViews=function(){for(var t in this.views){var e=this.views[t];if(this.active[e.id]!==e.key){e.node&&ns.removeNode(e.node);for(var n=e._getDescendantsAndSelf([]),r=0,o=n.length;r<o;r++)n[r].hideAndUnbindEvents()}}},ns.Box.prototype._updateHTML=function(t,e,n){var r;if(!this.node||!e.toplevel){var o=ns.byClass("ns-view-"+this.id,t)[0];o&&(r=this.node,this.node=o,this._visible=!1)}if(!this.node)throw new Error("[ns.Box] Can't find node for '"+this.id+"'");this._hideInactiveViews();var i=this.views,s=this.active;for(var a in s){i[s[a]]._updateHTML(t,e,n)}this._transferViewsToNewNode(r),this._sortViewNodes(),this._show()},ns.Box.prototype._sortViewNodes=function(){var t=this.active,e=this.views,n=ns.childrenIterator(this.node);for(var r in t){var o=t[r],i=e[o],s=n.getNext();s!==i.node&&(s?this.node.insertBefore(i.node,s):this.node.appendChild(i.node))}},ns.Box.prototype._transferViewsToNewNode=function(t){if(t){var e=this.views;for(var n in e){var r=e[n];if(this.active[r.id]!==r.key){var o=r.node;t.contains(o)&&this.node.appendChild(o)}}}},ns.Box.prototype._show=function(){return!1===this._visible&&(this._visible=!0),!1},ns.Box.prototype.hideAndUnbindEvents=function(){!0===this._visible&&(this._visible=!1)},ns.Box.prototype.isNone=function(){return!this.node},ns.Box.prototype.isValid=function(){return Boolean(this.node)},ns.Box.prototype.destroy=function(){var t=this.views;for(var e in t)t[e].destroy();this.node&&($(this.node).off().removeData().remove(),this.node=null,this.$node=null),this.active=null,this.key=null,this.params=null,this.views=null,this._visible=!1,this.destroyed=!0},ns.Box.prototype.__setUniqueId=ns.View.prototype.__setUniqueId,ns.Box.prototype._getCommonTree=ns.View.prototype._getCommonTree,ns.Box.prototype.isValidWithDesc=ns.View.prototype.isValidWithDesc,ns.Box.prototype.isOk=no.true,ns.Box.prototype.isLoading=no.false,ns.Box.getKey=function(t){return"box="+t}},6386:function(t,e,n){"use strict";function r(t,e,n,r,o,s,u){return a(i(yr.nodeset2data(t).bosphorus,e,n,r,o,s,u))}function o(t,e,n,r,o,i,u,c){var l=yr.nodeset2data(t),f=l.bosphorus,p=f.getModel(e);return ns.assert(p,"noscript-bosphorus","Model is undefined"),a(s(f,p,n,r,o,i,u,c))}function i(t,e,n,r,o,i,s){try{return t[e](n,r,o,i,s)}catch(n){return ns.log.exception("ns-view-call",n,{id:t.id,key:t.key,method:e}),[]}}function s(t,e,n,r,o,i,s,a){try{return e[n](r,o,i,s,a)}catch(r){return ns.log.exception("ns-model-call",r,{id:t.id,key:t.key,method:n,model:e.id}),[]}}function a(t){return Array.isArray(t)?yr.array2nodeset(t):yr.object2nodeset(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.nsModelCallHelper=o,yr.externals["ns-url"]=function(t){return ns.router.url(t)},yr.externals["ns-generate-url"]=function(t,e){return ns.router.generateUrl(t,e)},yr.externals["_ns-view-call"]=r,yr.externals["_ns-view-call-scalar"]=r,yr.externals["_ns-model-call"]=o,yr.externals["_ns-model-call-scalar"]=o},640:function(t,e,n){"use strict";function r(){return Date.now()-s}function o(t){s=Date.now()-t}e.a=r,e.b=o;var i=n(5),s=i.a.timestamp?Date.now()-i.a.timestamp:0},664:function(t,e,n){function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(498),i=n(768),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},668:function(t,e,n){function r(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}var o=n(561),i=n(449),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},669:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}t.exports=n},670:function(t,e,n){function r(t){return o(t,s,i)}var o=n(614),i=n(525),s=n(419);t.exports=r},671:function(t,e,n){var r=n(392),o=n(379),i=r(o,"Set");t.exports=i},672:function(t,e,n){var r=n(392),o=n(379),i=r(o,"WeakMap");t.exports=i},673:function(t,e,n){var r=n(379),o=r.Uint8Array;t.exports=o},674:function(t,e,n){var r=n(387),o=Object.create,i=(function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();t.exports=i},675:function(t,e,n){function r(t,e,n,s,a){var u=-1,c=t.length;for(n||(n=i),a||(a=[]);++u<c;){var l=t[u];e>0&&n(l)?e>1?r(l,e-1,n,s,a):o(a,l):s||(a[a.length]=l)}return a}var o=n(463),i=n(783);t.exports=r},683:function(t,e,n){function r(t,e,n,s,a){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:o(t,e,n,s,r,a))}var o=n(1286),i=n(388);t.exports=r},684:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}t.exports=n},685:function(t,e,n){function r(t,e,n){var r=null==t?void 0:o(t,e);return void 0===r?n:r}var o=n(527);t.exports=r},686:function(t,e,n){function r(t){var e=o(t),n=e%1;return e===e?n?e-n:e:0}var o=n(1299);t.exports=r},698:function(t,e,n){function r(t,e){return s(i(t,e,o),t+"")}var o=n(528),i=n(894),s=n(784);t.exports=r},705:function(t,e,n){function r(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=n(706),i=n(437),s=n(470);t.exports=r},706:function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(707),i=n(714),s=n(715),a=n(716),u=n(717);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},707:function(t,e,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(436);t.exports=r},708:function(t,e,n){function r(t){return!(!s(t)||i(t))&&(o(t)?d:c).test(a(t))}var o=n(469),i=n(711),s=n(387),a=n(548),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,p=l.toString,h=f.hasOwnProperty,d=RegExp("^"+p.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},709:function(t,e,n){function r(t){var e=s.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}var o=n(401),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,u=o?o.toStringTag:void 0;t.exports=r},710:function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},711:function(t,e,n){function r(t){return!!i&&i in t}var o=n(712),i=(function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();t.exports=r},712:function(t,e,n){var r=n(379),o=r["__core-js_shared__"];t.exports=o},713:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},714:function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},715:function(t,e,n){function r(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}var o=n(436),i="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;t.exports=r},716:function(t,e,n){function r(t){var e=this.__data__;return o?void 0!==e[t]:s.call(e,t)}var o=n(436),i=Object.prototype,s=i.hasOwnProperty;t.exports=r},717:function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}var o=n(436),i="__lodash_hash_undefined__";t.exports=r},718:function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},719:function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)}var o=n(438),i=Array.prototype,s=i.splice;t.exports=r},720:function(t,e,n){function r(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}var o=n(438);t.exports=r},721:function(t,e,n){function r(t){return o(this.__data__,t)>-1}var o=n(438);t.exports=r},722:function(t,e,n){function r(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o=n(438);t.exports=r},723:function(t,e,n){function r(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=n(439);t.exports=r},724:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},725:function(t,e,n){function r(t){return o(this,t).get(t)}var o=n(439);t.exports=r},726:function(t,e,n){function r(t){return o(this,t).has(t)}var o=n(439);t.exports=r},727:function(t,e,n){function r(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var o=n(439);t.exports=r},760:function(t,e,n){function r(t){if("string"==typeof t)return t;if(s(t))return i(t,r)+"";if(a(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var o=n(401),i=n(517),s=n(378),a=n(454),u=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;t.exports=r},763:function(t,e,n){function r(t){return null==t?[]:o(t,i(t))}var o=n(1225),i=n(419);t.exports=r},764:function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},765:function(t,e,n){function r(t){return i(t)&&o(t)==s}var o=n(396),i=n(388),s="[object Arguments]";t.exports=r},766:function(t,e){function n(){return!1}t.exports=n},767:function(t,e,n){function r(t){return s(t)&&i(t.length)&&!!a[o(t)]}var o=n(396),i=n(497),s=n(388),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=r},768:function(t,e,n){var r=n(608),o=r(Object.keys,Object);t.exports=o},771:function(t,e,n){function r(){this.__data__=new o,this.size=0}var o=n(437);t.exports=r},772:function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},773:function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},774:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},775:function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this}var o=n(437),i=n(470),s=n(486),a=200;t.exports=r},776:function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},777:function(t,e,n){var r=n(463),o=n(613),i=n(525),s=n(612),a=Object.getOwnPropertySymbols,u=a?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:s;t.exports=u},778:function(t,e,n){var r=n(392),o=n(379),i=r(o,"DataView");t.exports=i},779:function(t,e,n){var r=n(392),o=n(379),i=r(o,"Promise");t.exports=i},780:function(t,e,n){var r=n(781),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=s},781:function(t,e,n){function r(t){var e=o(t,(function(t){return n.size===i&&n.clear(),t})),n=e.cache;return e}var o=n(423),i=500;t.exports=r},782:function(t,e,n){function r(t){return(null==t?0:t.length)?o(t,1):[]}var o=n(675);t.exports=r},783:function(t,e,n){function r(t){return s(t)||i(t)||!!(a&&t&&t[a])}var o=n(401),i=n(461),s=n(378),a=o?o.isConcatSpreadable:void 0;t.exports=r},784:function(t,e,n){var r=n(1255),o=n(895),i=o(r);t.exports=i},796:function(t,e,n){function r(t,e,n,r,c,l){var f=n&a,p=t.length,h=e.length;if(p!=h&&!(f&&h>p))return!1;var d=l.get(t);if(d&&l.get(e))return d==e;var v=-1,y=!0,_=n&u?new o:void 0;for(l.set(t,e),l.set(e,t);++v<p;){var g=t[v],m=e[v];if(r)var w=f?r(m,g,v,e,t,l):r(g,m,v,t,e,l);if(void 0!==w){if(w)continue;y=!1;break}if(_){if(!i(e,(function(t,e){if(!s(_,e)&&(g===t||c(g,t,n,r,l)))return _.push(e)}))){y=!1;break}}else if(g!==m&&!c(g,m,n,r,l)){y=!1;break}}return l.delete(t),l.delete(e),y}var o=n(909),i=n(1289),s=n(910),a=1,u=2;t.exports=r},797:function(t,e,n){function r(t){return t===t&&!o(t)}var o=n(387);t.exports=r},798:function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},805:function(t,e,n){var r=n(1330),o=n(1332),i=o(r);t.exports=i},885:function(t,e){function n(t){return r.test(t)}var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=n},889:function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}var o=n(379),i="object"==typeof e&&e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i,u=a?o.Buffer:void 0,c=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(357)(t))},890:function(t,e,n){function r(t){return o(t,s,i)}var o=n(614),i=n(777),s=n(524);t.exports=r},891:function(t,e,n){function r(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var o=n(615);t.exports=r},892:function(t,e,n){function r(t){return"function"!=typeof t.constructor||s(t)?{}:o(i(t))}var o=n(674),i=n(613),s=n(498);t.exports=r},893:function(t,e){function n(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}t.exports=n},894:function(t,e,n){function r(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=i(r.length-e,0),u=Array(a);++s<a;)u[s]=r[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=r[s];return c[e]=n(u),o(t,this,c)}}var o=n(616),i=Math.max;t.exports=r},895:function(t,e){function n(t){var e=0,n=0;return function(){var s=i(),a=o-(s-n);if(n=s,a>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;t.exports=n},909:function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new o;++e<n;)this.add(t[e])}var o=n(486),i=n(1287),s=n(1288);r.prototype.add=r.prototype.push=i,r.prototype.has=s,t.exports=r},910:function(t,e){function n(t,e){return t.has(e)}t.exports=n},911:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}t.exports=n},912:function(t,e,n){function r(t,e){return null!=t&&i(t,e,o)}var o=n(1294),i=n(1295);t.exports=r},913:function(t,e){function n(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}t.exports=n},914:function(t,e,n){function r(t){if("number"==typeof t)return t;if(i(t))return s;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=c.test(t);return n||l.test(t)?f(t.slice(2),n?2:8):u.test(t)?s:+t}var o=n(387),i=n(454),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;t.exports=r},928:function(t,e,n){function r(t,e,n){return e===e?s(t,e,n):o(t,i,n)}var o=n(913),i=n(1328),s=n(1329);t.exports=r},929:function(t,e,n){var r=n(1331),o=r();t.exports=o},936:function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;return!!("number"==r?i(n)&&s(e,n.length):"string"==r&&e in n)&&o(n[e],t)}var o=n(449),i=n(415),s=n(478),a=n(387);t.exports=r},942:function(t,e,n){function r(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=o(t.prototype),r=t.apply(n,e);return i(r)?r:n}}var o=n(674),i=n(387);t.exports=r},943:function(t,e){function n(t,e){for(var n=-1,o=t.length,i=0,s=[];++n<o;){var a=t[n];a!==e&&a!==r||(t[n]=r,s[i++]=n)}return s}var r="__lodash_placeholder__";t.exports=n}});